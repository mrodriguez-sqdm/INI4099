<?xml version="1.0" encoding="UTF-8"?>

<mule xmlns:etbutilities="http://www.mulesoft.org/schema/mule/etbutilities" xmlns:ee="http://www.mulesoft.org/schema/mule/ee/core"
	xmlns="http://www.mulesoft.org/schema/mule/core"
	xmlns:doc="http://www.mulesoft.org/schema/mule/documentation" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://www.mulesoft.org/schema/mule/core http://www.mulesoft.org/schema/mule/core/current/mule.xsd
http://www.mulesoft.org/schema/mule/ee/core http://www.mulesoft.org/schema/mule/ee/core/current/mule-ee.xsd
http://www.mulesoft.org/schema/mule/etbutilities http://www.mulesoft.org/schema/mule/etbutilities/current/mule-etbutilities.xsd">
	<sub-flow name="get-servicios-svas-orchestratorSub_Flow" doc:id="90fb5da8-68d4-45bc-8a8f-c84947ec1eb4" >
		<try doc:name="Try" doc:id="d5306113-bb74-4eea-8096-3d417570ead0">
					<flow-ref doc:name="Go to Client" doc:id="0195bc50-d487-4f0b-8ae9-0d6e000a444b" name="get-servicios-svas-clientSub_Flow" />
					<error-handler>
						<on-error-continue enableNotifications="true" logException="true" doc:name="On Error Continue" doc:id="fdd4fb10-68a7-48a3-bb97-ec59abbe11ce">
							<ee:transform doc:name="Negative 500 Failed" doc:id="79e2c0e0-c1cd-431b-aa81-6bf5f4816354">
								<ee:message>
									<ee:set-payload><![CDATA[%dw 2.0
output application/java
---
write(
{
	"status": 500,
	"code": "CONSULT_BALANCE",
	"message": {
	  "message": "Error obtaining balances"
	},
	"messageServer": "Error obtaining balances",
	"cause": [
	  {
	    "origin": app.name,
	    "message": "org.mule.extension.http.api.request.validator.ResponseValidatorTypedException"
	  }
	]
}
)]]></ee:set-payload>
								</ee:message>
								<ee:variables>
									<ee:set-variable variableName="httpStatus"><![CDATA[%dw 2.0
output application/java
---
500]]></ee:set-variable>
								</ee:variables>
							</ee:transform>
						</on-error-continue>
					</error-handler>
				</try>
		<async doc:name="Async" doc:id="14b361ce-8b2c-4031-85b6-5b44ceb2d36b">
						<flow-ref doc:name="Call logger after" doc:id="5f0e8ed2-a811-4545-9f31-966a5e81257b" name="audits-mongo-log-after" />
					</async>
	</sub-flow>
</mule>
