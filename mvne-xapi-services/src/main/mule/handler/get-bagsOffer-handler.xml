<?xml version="1.0" encoding="UTF-8"?>

<mule xmlns:ee="http://www.mulesoft.org/schema/mule/ee/core" xmlns="http://www.mulesoft.org/schema/mule/core"
	xmlns:doc="http://www.mulesoft.org/schema/mule/documentation"
	xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://www.mulesoft.org/schema/mule/core http://www.mulesoft.org/schema/mule/core/current/mule.xsd
http://www.mulesoft.org/schema/mule/ee/core http://www.mulesoft.org/schema/mule/ee/core/current/mule-ee.xsd">
	<sub-flow name="get-bagsOffer-handlerSub_Flow" doc:id="f5872ae4-8bd9-4e28-bd07-79cb5679fb88" >
		<set-variable value="#[attributes.headers]" doc:name="Set initial headers" doc:id="28d82a5a-2529-4efa-889a-5dc6ee54bb57" variableName="headers" />
		<async doc:name="Async" doc:id="2a6634a4-f8a1-4225-9729-d0c2a6564fda" >
			<ee:transform doc:name="Map Log Body" doc:id="9d49287d-e7bd-4b13-a0fd-11353ad2fdb6" >
				<ee:message >
					<ee:set-payload ><![CDATA[output application/json
---
{
	correlationId: correlationId,
	(path: attributes.requestUri) if(!isEmpty(attributes.requestUri)),
	(uriParams: attributes.uriParams) if (!isEmpty(attributes.uriParams)),
	(queryParams: attributes.queryParams) if (!isEmpty(attributes.queryParams)),
	(headers: attributes.headers) if (!isEmpty(attributes.headers)),
	(payload: payload) if (!isEmpty(payload))
}]]></ee:set-payload>
				</ee:message>
			</ee:transform>
			<flow-ref doc:name="Call logger before audits-mongo" doc:id="dadf7ab4-120c-41b2-9fbb-b926eeeccc8e" name="audits-mongo-log-before" />
		</async>
		<flow-ref doc:name="Go to orchestrator" doc:id="51787655-f7d5-4a29-9101-5e20156296dc" name="get-bagsOffer-orchestratorSub_Flow" />
	</sub-flow>
</mule>
