<?xml version="1.0" encoding="UTF-8"?>

<mule xmlns:etbutilities="http://www.mulesoft.org/schema/mule/etbutilities" xmlns:ee="http://www.mulesoft.org/schema/mule/ee/core"
	xmlns="http://www.mulesoft.org/schema/mule/core"
	xmlns:doc="http://www.mulesoft.org/schema/mule/documentation" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://www.mulesoft.org/schema/mule/core http://www.mulesoft.org/schema/mule/core/current/mule.xsd
http://www.mulesoft.org/schema/mule/ee/core http://www.mulesoft.org/schema/mule/ee/core/current/mule-ee.xsd
http://www.mulesoft.org/schema/mule/etbutilities http://www.mulesoft.org/schema/mule/etbutilities/current/mule-etbutilities.xsd">
	<sub-flow name="get-servicios-svas-handlerSub_Flow" doc:id="8fba1dbe-0745-4b10-8f2b-50dbd60aca21" >
		<set-variable value="#[attributes.uriParams.id]" doc:name="id" doc:id="b1d78128-aa49-43bf-b67b-38be2bdfe0ee" variableName="id" />
		<async doc:name="Async" doc:id="d9815ab0-6beb-40cc-83d6-884f83d915f8">
			<ee:transform doc:name="Map Log Body" doc:id="59447f46-c0fa-476b-a8ed-76742a3d8f61">
				<ee:message>
					<ee:set-payload><![CDATA[output application/json
---
{
	correlationId: correlationId,
	(path: attributes.requestUri) if(!isEmpty(attributes.requestUri)),
	(uriParams: attributes.uriParams) if (!isEmpty(attributes.uriParams)),
	(queryParams: attributes.queryParams) if (!isEmpty(attributes.queryParams)),
	(headers: attributes.headers) if (!isEmpty(attributes.headers)),
	(payload: payload) if (!isEmpty(payload))
}]]></ee:set-payload>
				</ee:message>
			</ee:transform>
			<flow-ref doc:name="Call logger before audits-mongo" doc:id="75c5c7aa-d679-4d93-9c73-664b337a1a9c" name="audits-mongo-log-before" />
		</async>
		<flow-ref doc:name="Go to Orchestrator" doc:id="9d839541-fb04-4237-b3a4-c42e5e262095" name="get-servicios-svas-orchestratorSub_Flow" />
	</sub-flow>
</mule>
