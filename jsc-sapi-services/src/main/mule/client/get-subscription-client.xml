<?xml version="1.0" encoding="UTF-8"?>

<mule xmlns:ee="http://www.mulesoft.org/schema/mule/ee/core" xmlns:http="http://www.mulesoft.org/schema/mule/http"
	xmlns="http://www.mulesoft.org/schema/mule/core"
	xmlns:doc="http://www.mulesoft.org/schema/mule/documentation" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://www.mulesoft.org/schema/mule/core http://www.mulesoft.org/schema/mule/core/current/mule.xsd
http://www.mulesoft.org/schema/mule/http http://www.mulesoft.org/schema/mule/http/current/mule-http.xsd
http://www.mulesoft.org/schema/mule/ee/core http://www.mulesoft.org/schema/mule/ee/core/current/mule-ee.xsd">
	<sub-flow name="get-subscription-clientSub_Flow" doc:id="1f9548f2-d237-4a6e-ad74-96c8bd54ea42" >
		<http:request method="GET" doc:name="Request to get subscription JSC" doc:id="25c561a0-4a2c-4e1d-888b-d92d6002dce9" config-ref="JSC_Request_configuration" path="${jsc.path.get-subscription}">
				<http:headers><![CDATA[#[output application/java
---
{
	Authorization : vars.token
}]]]></http:headers>
				<http:query-params><![CDATA[#[output application/java
---
{
	"externalID" : vars.externalId
}]]]></http:query-params>
			</http:request>
	</sub-flow>
	<sub-flow name="get-subscription-SID-clientSub_Flow" doc:id="59fecba9-cec5-4ec8-910b-6d260580d19e" >
		<ee:transform doc:name="Transform SID" doc:id="093c695d-c483-4d7a-abd4-c9dcc83b83e9">
				<ee:message>
				</ee:message>
				<ee:variables>
					<ee:set-variable variableName="SID"><![CDATA[%dw 2.0
output application/java
---
vars.SID replace "#" with "%23"]]></ee:set-variable>
				</ee:variables>
			</ee:transform>
		<http:request method="GET" doc:name="Request to get subscription JSC" doc:id="f83a2029-7e21-4814-98a0-8d7ba435402f" config-ref="JSC_Request_configuration" path="${jsc.path.get-subscription-sid}">
				<http:headers><![CDATA[#[output application/java
---
{
	Authorization : vars.token
}]]]></http:headers>
				<http:uri-params><![CDATA[#[output application/java
---
{
	"SID" : vars.SID
}]]]></http:uri-params>
			</http:request>
	</sub-flow>
	<sub-flow name="get-subscription-by-msisdn" doc:id="5d587bd8-d077-4eff-97a2-ca9b82cbadf9" >
		<http:request method="GET" doc:name="Request to get subscription JSC by msisdn" doc:id="6bfb6521-7c2f-4d60-9daf-130b0b44927e" config-ref="JSC_Request_configuration" path="${jsc.path.get-subscription}">
				<http:headers><![CDATA[#[output application/java
---
{
	Authorization : vars.token
}]]]></http:headers>
				<http:query-params><![CDATA[#[output application/java
---
{
	"msisdn" : attributes.queryParams.msisdn
}]]]></http:query-params>
			</http:request>
	</sub-flow>
</mule>
