<?xml version="1.0" encoding="UTF-8"?>

<mule xmlns:ee="http://www.mulesoft.org/schema/mule/ee/core" xmlns:mongo="http://www.mulesoft.org/schema/mule/mongo"
	xmlns="http://www.mulesoft.org/schema/mule/core"
	xmlns:doc="http://www.mulesoft.org/schema/mule/documentation" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://www.mulesoft.org/schema/mule/core http://www.mulesoft.org/schema/mule/core/current/mule.xsd
http://www.mulesoft.org/schema/mule/mongo http://www.mulesoft.org/schema/mule/mongo/current/mule-mongo.xsd
http://www.mulesoft.org/schema/mule/ee/core http://www.mulesoft.org/schema/mule/ee/core/current/mule-ee.xsd">
	<sub-flow name="get-serviceProblem-consecutive-find-clientSub_Flow" doc:id="46ed2992-0476-4d5e-a9c5-2b3539a78ddb" >
		<mongo:find-documents doc:name="Find documents" doc:id="1f59e70a-1e78-4bbd-8e6f-85f56ba279ae" config-ref="mdm_db_Config" collectionName="${mongoDb-mdm.serviceProblem.collection-consecutives}" fields=",">
			<mongo:query ><![CDATA[#[%dw 2.0
output application/json
---
{ 
	Serie: vars.parameters.series
}]]]></mongo:query>
		</mongo:find-documents>
	</sub-flow>
	<sub-flow name="get-serviceProblem-consecutive-update-clientSub_Flow" doc:id="1dda68f4-1123-459a-8b48-08686c6b5b26" >
		<mongo:update-documents doc:name="Update documents" doc:id="aefcd55a-2e24-46dc-83ee-0594adef429e" config-ref="mdm_db_Config" collectionName="${mongoDb-mdm.serviceProblem.collection-consecutives}">
			<mongo:query><![CDATA[#[%dw 2.0
output application/json
---
{ 
	Serie: payload[0].Serie
}]]]></mongo:query>
			<mongo:content-to-update><![CDATA[#[%dw 2.0
output application/json
---
{ 
	Valor: vars.consecutive
}]]]></mongo:content-to-update>
		</mongo:update-documents>
	</sub-flow>
</mule>
