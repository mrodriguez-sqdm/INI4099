<?xml version="1.0" encoding="UTF-8"?>

<mule xmlns:ee="http://www.mulesoft.org/schema/mule/ee/core" xmlns:mongo="http://www.mulesoft.org/schema/mule/mongo"
	xmlns="http://www.mulesoft.org/schema/mule/core"
	xmlns:doc="http://www.mulesoft.org/schema/mule/documentation" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://www.mulesoft.org/schema/mule/core http://www.mulesoft.org/schema/mule/core/current/mule.xsd
http://www.mulesoft.org/schema/mule/mongo http://www.mulesoft.org/schema/mule/mongo/current/mule-mongo.xsd
http://www.mulesoft.org/schema/mule/ee/core http://www.mulesoft.org/schema/mule/ee/core/current/mule-ee.xsd">
	<sub-flow name="get-bussiness-days-clientSub_Flow" doc:id="d55a1229-c004-4bee-8006-11f2f6c2565e" >
		<try doc:name="Try" doc:id="bac9b536-4f23-46b9-82a9-764d837666ef" >
			<mongo:find-documents collectionName="${mongoDb-mdm.collection-bussiness-days}" fields="," doc:name="Find documents" doc:id="26c038db-6186-4bc9-9d38-cad4b0c74798" config-ref="mdm_db_Config" >
				<mongo:sort-by ><![CDATA[#[%dw 2.0
output application/json
---
{ "_id": -1 }]]]></mongo:sort-by>
			</mongo:find-documents>
			<ee:transform doc:name="Transform Message" doc:id="d8295bf7-501a-4ce8-8612-bebe11eaaf68" >
				<ee:message >
					<ee:set-payload ><![CDATA[%dw 2.0
output application/json
---
payload]]></ee:set-payload>
				</ee:message>
			</ee:transform>
			<error-handler >
				<on-error-continue enableNotifications="true" logException="true" doc:name="On Error Continue" doc:id="2b764a9f-4cea-4d8f-a21c-1a33690a1468" type="ANY" >
					<ee:transform doc:name="Set Response Fail Body" doc:id="5a6b007c-20e7-4992-b775-79eb1665cb70" >
						<ee:message >
							<ee:set-payload ><![CDATA[%dw 2.0
output application/json
---
{
	mensaje: error.description
}]]></ee:set-payload>
						</ee:message>
					</ee:transform>
					<set-variable value="500" doc:name="Set http status code" doc:id="3688941f-8500-4bdb-afeb-a0b602e3df8e" variableName="httpStatus" />
				</on-error-continue>
			</error-handler>
		</try>
	</sub-flow>
</mule>
