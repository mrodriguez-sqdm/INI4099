#%RAML 1.0
title: Business Experience API Services
version: v2
baseUri: https://business-xapi-services-v2-{env}.us-e2.cloudhub.io/{version}
protocols:
  - HTTPS

traits:
  tibcoHeaders: !include exchange_module/35a39a92-efa9-49b6-8f13-d66508fd2f35/tibcorequestheaders/1.0.6/tibcorequestheaders.raml

mediaType: 
  - application/json

securitySchemes:
  etb_oauth_2_0: !include exchange_module/35a39a92-efa9-49b6-8f13-d66508fd2f35/etb-oauth-20/1.0.1/etb-oauth-20.raml


/partyInteraction:
  post:
    is: 
    - tibcoHeaders
    securedBy: [etb_oauth_2_0]
    displayName: Register Customer Interaction
    description: Creates a new customer interaction to record actions or intentions from the customer, such as cancellations, term acceptance, or retention cases.
    queryParameters:
      ORIGIN:
        type: string
        example: "WHATSAPP"
        description: "Parameter that allows the origin of the request to be identified"
    body:
      application/json:
        type: !include /datatypes/request/interaction.raml
        example: !include /examples/request/interaction.json
    responses:
        200:
          body:
            application/json:
              type: !include /datatypes/response/create-interaction.raml
        400:
            body:
              application/json:
                type: !include /datatypes/response/error.raml
                example: !include /examples/response/error-400.json
        401:
          body:
            application/json:
              type: !include /datatypes/response/error.raml
              example: !include /examples/response/error-401.json
        404:
          body:
            application/json:
              type: !include /datatypes/response/error.raml
              example: !include /examples/response/error-404.json
        500:
          body:
            application/json:
              type: !include /datatypes/response/error.raml
              example: !include /examples/response/error-500.json
  patch:
      is: 
      - tibcoHeaders
      securedBy: [etb_oauth_2_0]
      displayName: Update Customer Interaction
      description: Updates the status or outcome of an existing customer interaction.
      queryParameters:
        ORIGIN:
          type: string
          example: "WHATSAPP"
          description: "Parameter that allows the origin of the request to be identified"
      body:
        application/json:
          type: !include /datatypes/request/interaction.raml
          example: !include /examples/request/interaction.json
      responses:
          200:
            body:
              application/json:
                type: !include /datatypes/response/update-interaction.raml
          400:
              body:
                application/json:
                  type: !include /datatypes/response/error.raml
                  example: !include /examples/response/error-400.json
          401:
            body:
              application/json:
                type: !include /datatypes/response/error.raml
                example: !include /examples/response/error-401.json
          404:
            body:
              application/json:
                type: !include /datatypes/response/error.raml
                example: !include /examples/response/error-404.json
          500:
            body:
              application/json:
                type: !include /datatypes/response/error.raml
                example: !include /examples/response/error-500.json
/billingAccount:
  get:
    is: 
    - tibcoHeaders
    securedBy: [etb_oauth_2_0]
    displayName: Retrieve Billing Account
    description: Retrieves billing account details such as cycle, due date, and financial status. 
    queryParameters:
        ORIGIN:
          type: string
          example: "WHATSAPP"
          description: "Parameter that allows the origin of the request to be identified"
        CUSTOMER_ID:
          type: string
          example: "12552454"
          description: Customer identification number can be ID card or tax ID number
          required: false
        CUSTOMER_ID_TYPE:
          type: string
          enum: ["CC","CE","PASAPORTE","NIT","RUT","TI"]
          example: "CC"
          description: Type of customer identification document
          required: false
        BILLING_ACCOUNT:
          type: string
          example: "12552454"
          description: Billing account
          required: false
        LIMIT:
          type: number
          description: "Limit on orders to display"
          required: false
        OFFSET:
          type: string
          description: "used to organize information and establish a logical order"
          required: false
    responses:
          200:
            body:
              application/json:
                type: !include /datatypes/response/get-billingAccount.raml
                example: !include /examples/response/get-billingAccount.json
          400:
            body:
              application/json:
                type: !include /datatypes/response/error.raml
                example: !include /examples/response/error-400.json
          401:
            body:
              application/json:
                type: !include /datatypes/response/error.raml
                example: !include /examples/response/error-401.json
          404:
            body:
              application/json:
                type: !include /datatypes/response/error.raml
                example: !include /examples/response/error-404.json
          500:
            body:
              application/json:
                type: !include /datatypes/response/error.raml
                example: !include /examples/response/error-500.json

/agreement:
  get:
    is: 
    - tibcoHeaders
    securedBy: [etb_oauth_2_0]
    displayName: Retrieve Agreement Information
    description: Retrieves contract details including start date, end date, and minimum commitment clause. 
    queryParameters:
        ORIGIN:
          type: string
          example: "WHATSAPP"
          description: "Parameter that allows the origin of the request to be identified"
        INTERACTION_ID:
          type: string
          example: "12552454"
          description: "Number Interaction"
          required: false
        PARENT_ACCOUNT:
          type: string
          example: "9876543210"
          description: "Parent account number associated with the customer"
          required: false
        ACTIVE_DATE:
          type: string
          example: "2025-10-22T00:00:00Z"
          description: "Date used to filter active records as of the specified timestamp (ISO 8601 format)"
          required: false
        FILTERS:
          type: string
          example: ""
          description: "String used to apply filters such as start date, end date, penalty value, and clause duration. Follow the example: separate the filter name and its value with a colon, and multiple filters with a semicolon."
          required: false
        LIMIT:
          type: number
          description: "Limit on orders to display"
          required: false
        OFFSET:
          type: string
          description: "used to organize information and establish a logical order"
          required: false
    responses:
          200:
            body:
              application/json:
                type: !include /datatypes/response/get-agreement.raml
                example: !include /examples/response/get-agreement.json
          400:
            body:
              application/json:
                type: !include /datatypes/response/error.raml
                example: !include /examples/response/error-400.json
          401:
            body:
              application/json:
                type: !include /datatypes/response/error.raml
                example: !include /examples/response/error-401.json
          404:
            body:
              application/json:
                type: !include /datatypes/response/error.raml
                example: !include /examples/response/error-404.json
          500:
            body:
              application/json:
                type: !include /datatypes/response/error.raml
                example: !include /examples/response/error-500.json