<?xml version="1.0" encoding="UTF-8"?>

<mule xmlns:tls="http://www.mulesoft.org/schema/mule/tls" xmlns:api-gateway="http://www.mulesoft.org/schema/mule/api-gateway"
	xmlns:apikit="http://www.mulesoft.org/schema/mule/mule-apikit"
	xmlns:http="http://www.mulesoft.org/schema/mule/http" xmlns="http://www.mulesoft.org/schema/mule/core" xmlns:doc="http://www.mulesoft.org/schema/mule/documentation" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://www.mulesoft.org/schema/mule/core http://www.mulesoft.org/schema/mule/core/current/mule.xsd
http://www.mulesoft.org/schema/mule/http http://www.mulesoft.org/schema/mule/http/current/mule-http.xsd
http://www.mulesoft.org/schema/mule/mule-apikit http://www.mulesoft.org/schema/mule/mule-apikit/current/mule-apikit.xsd
http://www.mulesoft.org/schema/mule/api-gateway http://www.mulesoft.org/schema/mule/api-gateway/current/mule-api-gateway.xsd
http://www.mulesoft.org/schema/mule/tls http://www.mulesoft.org/schema/mule/tls/current/mule-tls.xsd">
	<http:listener-config name="product-xapi-services-httpListenerConfig" doc:name="HTTP Listener config" doc:id="10af84a6-848d-4f7d-a3b9-349133b067f6" >
		<http:listener-connection host="0.0.0.0" port="${https.port}" tlsContext="TLS_Context" protocol="HTTPS"/>
	</http:listener-config>
	<configuration-properties doc:name="Configuration properties" doc:id="f8a298fb-0ea8-406c-916b-2c8f08ebb5fb" file="${env}-properties.yaml" />
	<apikit:config outboundHeadersMapName="outboundHeaders" httpStatusVarName="httpStatus" doc:name="product-xapi-services-config" doc:id="171b031f-9dd3-407c-8070-6d7fe6db4850" name="product-xapi-services-config" api="product-xapi-services.raml" />
	<http:request-config name="HTTP_Request_configuration_product-papi" doc:name="HTTP Request configuration" doc:id="0ddbf09c-725c-4297-b28a-fca439f02a89" basePath="${product-papi.basepath}" responseTimeout="${configurationTimeout.product-sapi}">
		<http:request-connection protocol="${product-papi.protocol}" host="${product-papi.host}" port="${product-papi.port}" />
	</http:request-config>
	
	<import doc:name="Import" doc:id="d79bd4d3-0adc-4eae-acb4-d9e6ee03fe62" file="error-handler.xml" />
	<import doc:name="Import" doc:id="5cb4a0a6-d274-4e3a-bf7d-19e9cd431500" file="loggin.xml" />
	<import doc:name="Import" doc:id="435d5cc0-311f-44b0-b2f3-317f27956669" file="audits-sapi-client.xml" />
	<import doc:name="Import" doc:id="e0304cd8-f3f8-4453-a81f-7a4f1e7c719c" file="etb-common-lib.xml" />
	<api-gateway:autodiscovery apiId="${autodiscovery}" ignoreBasePath="true" doc:name="API Autodiscovery" doc:id="bbaf2c46-0a33-474d-8dbc-833fa8758483" flowRef="product-xapi-services-main" />
	<tls:context name="TLS_Context" doc:name="TLS Context" doc:id="4f0afd27-38d0-4385-ba30-9ad6b684ddf0" >
		<tls:key-store type="${tls.type}" path="${tls.path}" keyPassword="${tls.keyPassword}" password="${tls.password}" />
	</tls:context>

</mule>
