<?xml version="1.0" encoding="UTF-8"?>

<mule xmlns:ee="http://www.mulesoft.org/schema/mule/ee/core" xmlns:http="http://www.mulesoft.org/schema/mule/http"
	xmlns="http://www.mulesoft.org/schema/mule/core"
	xmlns:doc="http://www.mulesoft.org/schema/mule/documentation" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://www.mulesoft.org/schema/mule/core http://www.mulesoft.org/schema/mule/core/current/mule.xsd
http://www.mulesoft.org/schema/mule/http http://www.mulesoft.org/schema/mule/http/current/mule-http.xsd
http://www.mulesoft.org/schema/mule/ee/core http://www.mulesoft.org/schema/mule/ee/core/current/mule-ee.xsd">
	<sub-flow name="GetSubscriberInfo-dgo-client" doc:id="5ce0a5b1-3c4b-493d-9708-ef0784921828" >
		<async doc:name="Async" doc:id="a992c72a-1a4c-4976-a4be-d63fbbeb18e1" >
			<flow-ref doc:name="Call logger before" doc:id="c72c896f-2d8c-48f4-bd0b-203353ea94ab" name="audits-mongo-log-before"/>
		</async>
		<http:request method="GET" doc:name="Call DGO" doc:id="81e00073-d3ac-456c-8f83-159d090afa90" config-ref="DGO_HTTP_Request_configuration" path="${dgo.path.getSubscriber}" sendCorrelationId="ALWAYS" outputEncoding="UTF-8">
			<http:headers ><![CDATA[#[output application/java
---
{
	"Authorization" : p('dgo.key')
}]]]></http:headers>
			<http:uri-params ><![CDATA[#[output application/java
---
{
	"subscriber_id" : vars.uriParams.subscriber_id,
	"country_code" : p('dgo.country')
}]]]></http:uri-params>
		</http:request>
		<async doc:name="Async" doc:id="0ebef7f8-302e-48a9-8508-967d4aa3b3d9" >
			<flow-ref doc:name="Call logger after" doc:id="d4fc76e8-d8a4-4fd5-8c21-230da3d175e3" name="audits-mongo-log-after" />
		</async>
	</sub-flow>
	<sub-flow name="EditSubscriber-dgo-client" doc:id="9fcda889-b1d7-473b-b512-0152e9149f45" >
		<async doc:name="Async" doc:id="88d42d1a-dd4c-4a7b-807e-db6489213bad" >
			<flow-ref doc:name="Call logger before" doc:id="75b907eb-120d-4e38-b9e0-88e0b45c8888" name="audits-mongo-log-before" />
		</async>
		<http:request method="PATCH" doc:name="Call DGO" doc:id="520a1862-346a-4708-9a3f-c925feaef93b" config-ref="DGO_HTTP_Request_configuration" path="${dgo.path.getSubscriber}" sendCorrelationId="ALWAYS" outputEncoding="UTF-8" >
			<http:headers ><![CDATA[#[output application/java
---
{
	"Authorization" : p('dgo.key')
}]]]></http:headers>
			<http:uri-params ><![CDATA[#[output application/java
---
{
	"subscriber_id" : vars.uriParams.subscriber_id,
	"country_code" : p('dgo.country')
}]]]></http:uri-params>
		</http:request>
		<async doc:name="Async" doc:id="0a849897-4843-4ab6-88c0-dfa8cdb19635" >
			<flow-ref doc:name="Call logger after" doc:id="1bfb8a15-f163-4677-baca-ad18b2a5b236" name="audits-mongo-log-after" />
		</async>
	</sub-flow>
	<sub-flow name="AccountRegistration-dgo-client" doc:id="7ec90254-d178-4814-8bac-e6f90eed3943" >
		<async doc:name="Async" doc:id="2c3df948-adb7-41ff-9300-7e44368ed27f">
			<flow-ref doc:name="Call logger before" doc:id="5ca0e135-947f-4f63-ae64-1c3c30a4f2b7" name="audits-mongo-log-before" />
		</async>
		<http:request method="POST" doc:name="Call DGO" doc:id="412a3dc5-ebd7-49ef-a262-383ad1fa7041" config-ref="DGO_HTTP_Request_configuration" path="${dgo.path.postSubscriber}" sendCorrelationId="ALWAYS" outputEncoding="UTF-8" >
			<http:headers ><![CDATA[#[output application/java
---
{
	"Authorization" : p('dgo.key')
}]]]></http:headers>
		</http:request>
		<async doc:name="Async" doc:id="70173cac-eec5-49d7-aabb-9a8402323cc6" >
			<flow-ref doc:name="Call logger after" doc:id="330b9efa-5672-4dc2-8981-0804a2baa856" name="audits-mongo-log-after" />
		</async>
	</sub-flow>
	<sub-flow name="AddURNs-dgo-client" doc:id="ea4a688e-1a50-45cd-8085-6ebab64d43f6" >
		<async doc:name="Async" doc:id="2c4452a1-3144-4a6f-b075-b811eec3cc4c" >
			<flow-ref doc:name="Call logger before" doc:id="bae182e6-d115-4de2-87c6-f9d5e362374f" name="audits-mongo-log-before" />
		</async>
		<http:request method="PATCH" doc:name="Call DGO" doc:id="4cd7a6fe-d9f6-454f-957c-d296dea69165" config-ref="DGO_HTTP_Request_configuration" path="${dgo.path.addUrn}" sendCorrelationId="ALWAYS" outputEncoding="UTF-8" >
			<http:headers ><![CDATA[#[output application/java
---
{
	"Authorization" : p('dgo.key')
}]]]></http:headers>
			<http:uri-params ><![CDATA[#[output application/java
---
{
	"subscriber_id" : vars.uriParams.subscriber_id,
	"country_code" : p('dgo.country')
}]]]></http:uri-params>
		</http:request>
		<async doc:name="Async" doc:id="80b3c779-72a6-4e98-b4fe-2b712e45b504" >
			<flow-ref doc:name="Call logger after" doc:id="d204f0c7-2dde-4bbd-87d5-448dbf700cb5" name="audits-mongo-log-after" />
		</async>
	</sub-flow>
	<sub-flow name="DeactivateUser-dgo-client" doc:id="5fccbdb1-1623-4377-b46d-47461214fe73" >
		<async doc:name="Async" doc:id="9e0a4034-ccad-4e32-b669-c1520b714551" >
			<flow-ref doc:name="Call logger before" doc:id="dc299aeb-65ee-4474-8eca-b513a6fa9816" name="audits-mongo-log-before" />
		</async>
		<http:request method="PATCH" doc:name="Call DGO" doc:id="f4842b5f-fcaa-4af7-8225-dc9c1e15be18" config-ref="DGO_HTTP_Request_configuration" path="${dgo.path.deactivateUser}" sendCorrelationId="ALWAYS" outputEncoding="UTF-8" >
			<http:headers ><![CDATA[#[output application/java
---
{
	"Authorization" : p('dgo.key')
}]]]></http:headers>
			<http:uri-params ><![CDATA[#[output application/java
---
{
	"subscriber_id" : vars.uriParams.subscriber_id,
	"country_code" : p('dgo.country')
}]]]></http:uri-params>
		</http:request>
		<async doc:name="Async" doc:id="0d905fd7-dcad-4275-9d8e-0f75549e5682" >
			<flow-ref doc:name="Call logger after" doc:id="bb529c0d-6292-4113-84a2-6f77f0c8c861" name="audits-mongo-log-after" />
		</async>
	</sub-flow>
</mule>
