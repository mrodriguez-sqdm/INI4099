<?xml version="1.0" encoding="UTF-8"?>

<mule xmlns:ee="http://www.mulesoft.org/schema/mule/ee/core" xmlns="http://www.mulesoft.org/schema/mule/core"
	xmlns:doc="http://www.mulesoft.org/schema/mule/documentation"
	xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://www.mulesoft.org/schema/mule/core http://www.mulesoft.org/schema/mule/core/current/mule.xsd
http://www.mulesoft.org/schema/mule/ee/core http://www.mulesoft.org/schema/mule/ee/core/current/mule-ee.xsd">
	<sub-flow name="post-rne-orchestratorSub_Flow" doc:id="d9f91abc-faa1-4aef-acfa-72cd38c511d7" >
		<ee:transform doc:name="Json to XML" doc:id="01dc22d2-bf06-45b9-9033-8a1dc8b68c0b" >
			<ee:message >
				<ee:set-payload ><![CDATA[%dw 2.0
ns soap http://schemas.xmlsoap.org/soap/envelope/
output text/xml
---
{
  soap#"Envelope": {
    soap#"Body": {
      "RegistroRNE" @(xmlns:'VMRWebServiceETB'): {
        "datos": {
          "Msisdn": payload.Msisdn as Number as String {format: ".00"} as Number,
          "NombrePersona": payload.NombrePersona,
          "TipoDocumento": payload.TipoDocumento,
          "NumeroDocumento": payload.NumeroDocumento,
          "TipoSolicitud": payload.TipoSolicitud as Number,
          "Email": payload.Email,
          "SistemaOrigen": payload.SistemaOrigen        
          }
      }
    }
  }
}]]></ee:set-payload>
			</ee:message>
		</ee:transform>
		<flow-ref doc:name="Go to client" doc:id="13c844cd-b636-4b78-af77-b5c57ab24b17" name="post-vmr-clientSub_Flow"/>
		<ee:transform doc:name="Xml to Json" doc:id="63b54c87-8870-477a-972c-234fa88b8503" >
			<ee:message >
				<ee:set-payload ><![CDATA[%dw 2.0
output application/json
---
{
	"Codigo" : payload.Envelope.Body.RegistroRNEResponse.RegistroRNEResult.Codigo,
	"Descripcion" : payload.Envelope.Body.RegistroRNEResponse.RegistroRNEResult.Descripcion
}]]></ee:set-payload>
			</ee:message>
		</ee:transform>
	</sub-flow>
</mule>
