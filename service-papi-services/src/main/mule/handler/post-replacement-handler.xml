<?xml version="1.0" encoding="UTF-8"?>

<mule xmlns:ee="http://www.mulesoft.org/schema/mule/ee/core" xmlns="http://www.mulesoft.org/schema/mule/core"
	xmlns:doc="http://www.mulesoft.org/schema/mule/documentation"
	xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://www.mulesoft.org/schema/mule/core http://www.mulesoft.org/schema/mule/core/current/mule.xsd
http://www.mulesoft.org/schema/mule/ee/core http://www.mulesoft.org/schema/mule/ee/core/current/mule-ee.xsd">
	<sub-flow name="post-replacement-handlerSub_Flow" doc:id="be52f66f-0d1d-409a-a4a2-f66196c081b4" >
		<set-variable value="#[payload.connectionNumber]" doc:name="Set connectionNumber" doc:id="9124d9a6-b1bb-4d91-a6e6-2ef56d996e52" variableName="connectionNumber"/>
		<set-variable value="#[payload.simNumber]" doc:name="Set ICCID" doc:id="87459573-1235-42df-8622-bb1fa36d6059" variableName="ICCID"/>
		<set-variable value="#[%dw 2.0&#10;output application/json&#10;---&#10;payload.packageId default p('global.renoRepo.packageId')]" doc:name="Set packageId" doc:id="976ec1aa-3b93-4b4c-8179-6a5cebd2430a" variableName="packageId"/>
		<choice doc:name="Choice" doc:id="9697c0ae-112c-4a42-bfc7-da2dec050cfb" >
			<when expression='#[upper(attributes.headers.origenTransaccion) == upper("salesforce-xapi-services")]'>
				<set-variable value='#["oracle"]' doc:name="Set logs" doc:id="24569a53-d87d-4863-ba1f-92cb80793555" variableName="logs" />
				<set-variable value='#["TRANSACCCIONES_OM"]' doc:name="systemId" doc:id="e0c108c3-17cc-4592-a0fc-19de86026e3b" variableName="systemId" />
			</when>
			<otherwise >
				<set-variable value='#["mongo"]' doc:name="Set logs" doc:id="0a88ba9f-29c9-48aa-8307-6d7d5c84e344" variableName="logs" />
			</otherwise>
		</choice>
		<flow-ref doc:name="Go to orchestrator" doc:id="9044e8b9-c1b0-4aea-855b-ead62b3abbe4" name="post-replacement-orchestratorSub_Flow"/>
	</sub-flow>
</mule>
