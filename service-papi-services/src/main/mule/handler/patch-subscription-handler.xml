<?xml version="1.0" encoding="UTF-8"?>

<mule xmlns:ee="http://www.mulesoft.org/schema/mule/ee/core" xmlns="http://www.mulesoft.org/schema/mule/core"
	xmlns:doc="http://www.mulesoft.org/schema/mule/documentation"
	xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://www.mulesoft.org/schema/mule/core http://www.mulesoft.org/schema/mule/core/current/mule.xsd
http://www.mulesoft.org/schema/mule/ee/core http://www.mulesoft.org/schema/mule/ee/core/current/mule-ee.xsd">
	<sub-flow name="patch-subscription-handlerSub_Flow" doc:id="c96f5a9f-927f-4403-afdb-0bd5b96524f4" >
		<set-variable value="#[attributes.uriParams.connectionNumber]" doc:name="set connectionNumber" doc:id="f6cae522-998c-45f7-b8ee-89a323596e74" variableName="connectionNumber" />
		<set-variable value="#[payload]" doc:name="Set inputPayload" doc:id="303e8add-8721-4ede-adff-f171fa759ed4" variableName="inputPayload"/>
		<choice doc:name="Choice" doc:id="9e536c18-464a-4ad8-82fb-2cc2ef9acb1b" >
			<when expression='#[upper(attributes.headers.origenTransaccion) == upper("salesforce-xapi-services")]'>
				<set-variable value='#["oracle"]' doc:name="Set logs" doc:id="d42285fa-b3e9-4709-aade-cd83c2f98446" variableName="logs" />
				<set-variable value='#["TRANSACCCIONES_OM"]' doc:name="systemId" doc:id="9e0e4641-ab2f-4839-829b-a7403a74f882" variableName="systemId" />
			</when>
			<otherwise >
				<set-variable value='#["mongo"]' doc:name="Set logs" doc:id="5a3d67ad-35e7-4f4f-9b87-6908fff43bc8" variableName="logs" />
			</otherwise>
		</choice>
		<flow-ref doc:name="Go to orchestrator" doc:id="61bbfd92-2575-4ac3-804f-30072976a07f" name="patch-subscription-orchestratorSub_Flow"/>
	</sub-flow>
</mule>
