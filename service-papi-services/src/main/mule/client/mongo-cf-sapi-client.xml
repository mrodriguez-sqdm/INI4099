<?xml version="1.0" encoding="UTF-8"?>

<mule xmlns:ee="http://www.mulesoft.org/schema/mule/ee/core" xmlns:http="http://www.mulesoft.org/schema/mule/http"
	xmlns="http://www.mulesoft.org/schema/mule/core"
	xmlns:doc="http://www.mulesoft.org/schema/mule/documentation" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://www.mulesoft.org/schema/mule/core http://www.mulesoft.org/schema/mule/core/current/mule.xsd
http://www.mulesoft.org/schema/mule/http http://www.mulesoft.org/schema/mule/http/current/mule-http.xsd
http://www.mulesoft.org/schema/mule/ee/core http://www.mulesoft.org/schema/mule/ee/core/current/mule-ee.xsd">
	<sub-flow name="get-exclusionClientes-client" doc:id="08934391-1a69-493e-a0df-d4d51de52825" >
		<http:request method="GET" doc:name="Call Exclusion Clientes" doc:id="3ea5c444-bc92-4d4f-8fea-586f33a76fad" config-ref="HTTP_Request_configuration_mongo_cf" path="${mongo-cf-sapi.path.exclusionClientes}">
			<http:headers ><![CDATA[#[output application/java
---
{
	"source" : "",
	"name" : "",
	"X-CORRELATION-ID" : vars.initialHeaders.'X-CORRELATION-ID' default correlationId,
	"client_secret" : p('mongo-cf-sapi.client_secret'),
	"systemId" : "OTINICIATIVAS",
	"client_id" : p('mongo-cf-sapi.client_id')
}]]]></http:headers>
			<http:query-params ><![CDATA[#[output application/java
---
{
	"numeroIdentificacion" : vars.numeroIdentificacion,
	"tipoIdentificacion" : vars.tipoIdentificacion
}]]]></http:query-params>
		</http:request>
	</sub-flow>
	<sub-flow name="get-parameters-client" doc:id="d05a5bc2-d3b9-48fb-a6c7-9f08fd470368" >
		<http:request method="GET" doc:name="Call Type Parameters" doc:id="eaf6e1a8-0680-4574-a56b-782262132dc7" config-ref="HTTP_Request_configuration_mongo_cf" path="${mongo-cf-sapi.path.parametros}">
			<http:headers ><![CDATA[#[output application/java
---
{
	"source" : attributes.headers.'source',
	"name" : attributes.headers.'name',
	"X-CORRELATION-ID" : vars.initialHeaders.'X-CORRELATION-ID' default correlationId,
	"client_secret" : p('mongo-cf-sapi.client_secret'),
	"systemId" : "OTINICIATIVAS",
	"client_id" : p('mongo-cf-sapi.client_id'),
	"logs": vars.logs
}]]]></http:headers>
			<http:uri-params ><![CDATA[#[output application/java
---
{
	"typeParameter" : vars.currentParameter
}]]]></http:uri-params>
		</http:request>
	</sub-flow>
	<sub-flow name="get-ordenes-client" doc:id="8d70858f-7188-46c2-90b1-10def2448f92" >
		<http:request method="GET" doc:name="Call Get Ordenes" doc:id="7fe55dac-6fab-46a9-b8bb-b509ab112041" config-ref="HTTP_Request_configuration_mongo_cf" path="${mongo-cf-sapi.path.consultarOrdenes}">
			<http:headers ><![CDATA[#[output application/java
---
{
	"source" : "",
	"name" : "",
	"X-CORRELATION-ID" : vars.initialHeaders.'X-CORRELATION-ID' default correlationId,
	"client_secret" : p('mongo-cf-sapi.client_secret'),
	"systemId" : "OTINICIATIVAS",
	"client_id" : p('mongo-cf-sapi.client_id')
}]]]></http:headers>
			<http:query-params ><![CDATA[#[output application/java
---
{
	"filtroTramite" : p('mongo-cf-sapi.consultarOrdenes.filtroTramite'),
	"numeroIdentificacion" : vars.numeroIdentificacion,
	"tipoIdentificacion" : vars.tipoIdentificacion
}]]]></http:query-params>
		</http:request>
	</sub-flow>
	<sub-flow name="get-encuestas-client" doc:id="23f1eed7-4368-4958-9964-46ca164724c7" >
		<http:request method="GET" doc:name="Call Get Encuestas" doc:id="b49cdf0c-ca09-41b1-8ee9-9e3a70ba72e6" config-ref="HTTP_Request_configuration_mongo_cf" path="${mongo-cf-sapi.path.consultarEncuestas}">
			<http:headers ><![CDATA[#[output application/java
---
{
	"source" : "",
	"name" : "",
	"X-CORRELATION-ID" : vars.initialHeaders.'X-CORRELATION-ID' default correlationId,
	"client_secret" : p('mongo-cf-sapi.client_secret'),
	"systemId" : "OTINICIATIVAS",
	"client_id" : p('mongo-cf-sapi.client_id')
}]]]></http:headers>
			<http:uri-params ><![CDATA[#[output application/java
---
{
	"numeroIdentificacion" : vars.numeroIdentificacion
}]]]></http:uri-params>
		</http:request>		
	</sub-flow>
	<sub-flow name="get-pqrs-client" doc:id="58124e28-3b9b-477c-a7b3-4f402648a2c0" >
		<http:request method="GET" doc:name="Call Get PQRs" doc:id="1b4f8837-8325-4588-b7b6-c08c7c01208d" config-ref="HTTP_Request_configuration_mongo_cf" path="${mongo-cf-sapi.path.pqrs}">
			<http:headers ><![CDATA[#[output application/java
---
{
	"source" : "",
	"name" : "",
	"X-CORRELATION-ID" : vars.initialHeaders.'X-CORRELATION-ID' default correlationId,
	"client_secret" : p('mongo-cf-sapi.client_secret'),
	"systemId" : "OTINICIATIVAS",
	"client_id" : p('mongo-cf-sapi.client_id')
}]]]></http:headers>
			<http:query-params ><![CDATA[#[output application/java
---
{
	"numIdentificacion" : vars.numeroIdentificacion,
	"tipoIdentificacion" : vars.tipoIdentificacion
}]]]></http:query-params>
		</http:request>
		
	</sub-flow>
	<sub-flow name="get-agendaTmr-client" doc:id="57a180a7-e4ac-4ce2-930b-2de2734a3bb8" >
		<http:request method="GET" doc:name="Call Get Agenda TMR" doc:id="dc872985-63a4-4219-bc6b-2fd45868cb11" config-ref="HTTP_Request_configuration_mongo_cf" path="${mongo-cf-sapi.path.agendaTmr}">
			<http:headers ><![CDATA[#[output application/java
---
{
	"source" : "",
	"name" : "",
	"X-CORRELATION-ID" : vars.initialHeaders.'X-CORRELATION-ID' default correlationId,
	"client_secret" : p('mongo-cf-sapi.client_secret'),
	"systemId" : "OTINICIATIVAS",
	"client_id" : p('mongo-cf-sapi.client_id')
}]]]></http:headers>
			<http:query-params ><![CDATA[#[%dw 2.0
output application/json
---
vars.inputAgendaTmr reduce ((item, accumulator={}) -> accumulator ++ {
    orderNumbers: item
})]]]></http:query-params>
		</http:request>
	</sub-flow>
	<sub-flow name="get-tipoAtencion-client" doc:id="40fed466-08c3-4668-ab48-b659d88efc79" >
		<http:request method="GET" doc:name="Call Get Tipo Atencion" doc:id="bbfc25a2-8093-406e-b4cf-c55beff75faa" config-ref="HTTP_Request_configuration_mongo_cf" path="${mongo-cf-sapi.path.consultarTipoAtencion}">
			<http:headers ><![CDATA[#[output application/java
---
{
	"source" : "",
	"name" : "",
	"X-CORRELATION-ID" : vars.initialHeaders.'X-CORRELATION-ID' default correlationId,
	"client_secret" : p('mongo-cf-sapi.client_secret'),
	"systemId" : "OTINICIATIVAS",
	"client_id" : p('mongo-cf-sapi.client_id')
}]]]></http:headers>
			<http:query-params ><![CDATA[#[output application/java
---
{
	"ClienteConcurrenteComercial" : payload.ClienteConcurrenteComercial,
	"EncuestaCliente" : payload.EncuestaCliente,
	"ClienteConcurrenteTecnico" : payload.ClienteConcurrenteTecnico
}]]]></http:query-params>
		</http:request>
		
	</sub-flow>
	<sub-flow name="get-contactoFrecuenteByNumero-client" doc:id="3cbc1392-c438-4102-9659-668ec4923eb0" >
		<http:request method="GET" doc:name="Call Get Contacto Frecuente" doc:id="078e01a0-1904-459c-9d0a-a3de515d6491" config-ref="HTTP_Request_configuration_mongo_cf" path="${mongo-cf-sapi.path.contacto-frecuente}">
			<http:headers ><![CDATA[#[output application/java
---
{
	"source" : "",
	"name" : "",
	"X-CORRELATION-ID" : vars.initialHeaders.'X-CORRELATION-ID' default correlationId,
	"client_secret" : p('mongo-cf-sapi.client_secret'),
	"systemId" : "OTINICIATIVAS",
	"client_id" : p('mongo-cf-sapi.client_id')
}]]]></http:headers>
			<http:query-params ><![CDATA[#[output application/java
---
{
	"numeroConexion" : vars.inputBody.numeroConexion,
	"numeroIVR" : vars.inputBody.numeroIVR
}]]]></http:query-params>
		</http:request>
		
	</sub-flow>
	<sub-flow name="get-services_mongo-clientSub_Flow" doc:id="4fd8ae95-d678-4b40-8bc9-de952537f9e0" >
		<http:request method="GET" doc:name="Call get services" doc:id="f397417d-1116-4ebf-a7ef-83860f25232b" config-ref="HTTP_Request_configuration_mongo_cf" path="${mongo-cf-sapi.path.services}" >
			<http:headers ><![CDATA[#[output application/java
---
{
	"source" : "",
	"name" : vars.headers.name,
	"X-CORRELATION-ID" : vars.headers.'X-CORRELATION-ID' default correlationId,
	"client_secret" : p('mongo-cf-sapi.client_secret'),
	"systemId" : "OTINICIATIVAS",
	"logs" : vars.logs,
	"client_id" : p('mongo-cf-sapi.client_id')
}]]]></http:headers>
			<http:query-params ><![CDATA[#[output application/java
---
{
	"numConexionOrCtaFacturacion": vars.numero,
	"numeroDoc" : vars.numeroIdentificacion,
	"tipoDoc" : vars.tipoIdentificacion,
	"activo": vars.activo
}]]]></http:query-params>
		</http:request>
	</sub-flow>
	<sub-flow name="get-status_in_collections_mongo-clientSub_Flow" doc:id="feefe109-f4c6-4060-91e9-8626c1de9642" >
		<http:request method="GET" doc:name="Consultar tramites" doc:id="f28c814b-6629-40dc-afb8-e1846219512a" config-ref="HTTP_Request_configuration_mongo_cf" path="${mongo-cf-sapi.path.tramites}" >
			<http:headers ><![CDATA[#[output application/java
---
{
	"source" : "",
	"name" : vars.headers.name,
	"X-CORRELATION-ID" : vars.headers.'X-CORRELATION-ID' default correlationId,
	"client_secret" : p('mongo-cf-sapi.client_secret'),
	"systemId" : "OTINICIATIVAS",
	"logs" : vars.logs,
	"client_id" : p('mongo-cf-sapi.client_id')
}]]]></http:headers>
			<http:query-params ><![CDATA[#[output application/java
---
{
	"cuenta": vars.numeroInicial
}]]]></http:query-params>
		</http:request>
	</sub-flow>
	<sub-flow name="get-mdm_client_mongo-clientSub_Flow" doc:id="1e480d2a-45b8-4550-84e2-72e63db3bde7" >
		<http:request method="GET" doc:name="Call get client" doc:id="6aaeae02-c9e6-4117-b8a9-166b69e35812" config-ref="HTTP_Request_configuration_mongo_cf" path="${mongo-cf-sapi.path.clientes}" >
			<http:headers ><![CDATA[#[output application/java
---
{
	"source" : "",
	"name" : vars.headers.name,
	"X-CORRELATION-ID" : vars.headers.'X-CORRELATION-ID' default correlationId,
	"client_secret" : p('mongo-cf-sapi.client_secret'),
	"systemId" : "OTINICIATIVAS",
	"logs" : vars.logs,
	"client_id" : p('mongo-cf-sapi.client_id')
}]]]></http:headers>
			<http:query-params ><![CDATA[#[output application/java
---
{
	"tipoDocumento" : vars.tipoIdentificacion,
	"numeroIdentificacion" : vars.numeroIdentificacion
}]]]></http:query-params>
		</http:request>
	</sub-flow>
	<sub-flow name="post-interactionTransaction-clientSub_Flow" doc:id="804f5c10-7af1-4777-a40d-e0922340ed0b">
		<http:request method="POST" doc:name="Call post interaction" doc:id="19644852-5793-4ee5-a4f0-89ac5b75a0b7" config-ref="HTTP_Request_configuration_mongo_cf" path="${mongo-cf-sapi.path.interaction}">
			<http:headers><![CDATA[#[output application/java
---
{
	"source" : "",
	"name" : vars.headers.name,
	"X-CORRELATION-ID" : vars.headers.'X-CORRELATION-ID' default correlationId,
	"client_secret" : p('mongo-cf-sapi.client_secret'),
	"systemId" : "OTINICIATIVAS",
	"client_id" : p('mongo-cf-sapi.client_id')
}]]]></http:headers>
		</http:request>
	</sub-flow>
	<sub-flow name="get-msParameter-clientSub_Flow" doc:id="ec8fd142-2f17-44b1-8ccb-9c522ae5757e">
		<http:request method="GET" doc:name="Call get parameter" doc:id="a9d13112-7629-4f15-b29b-caad2bafe2d3" config-ref="HTTP_Request_configuration_mongo_cf" path="${mongo-cf-sapi.path.msParameter}" >
			<http:headers><![CDATA[#[output application/java
---
{
	"source" : "",
	"name" : vars.headers.name,
	"X-CORRELATION-ID" : vars.headers.'X-CORRELATION-ID' default correlationId,
	"client_secret" : p('mongo-cf-sapi.client_secret'),
	"systemId" : "OTINICIATIVAS",
	"client_id" : p('mongo-cf-sapi.client_id')
}]]]></http:headers>
			<http:query-params><![CDATA[#[output application/java
---
{
	"parametro" : p('global-vars.parametro-contactoFrecuente')
}]]]></http:query-params>
		</http:request>
	</sub-flow>
	<sub-flow name="post-contactoFrecuente-clientSub_Flow" doc:id="d5c9b76c-ea9d-4b3f-8baa-61b6ff8ec1a3">
		<http:request method="POST" doc:name="Call post contacto frecuente" doc:id="08992927-3443-4455-bef4-1e6288089d09" config-ref="HTTP_Request_configuration_mongo_cf" path="${mongo-cf-sapi.path.contacto-frecuente}" >
			<http:headers><![CDATA[#[output application/java
---
{
	"source" : "",
	"name" : vars.headers.name,
	"X-CORRELATION-ID" : vars.headers.'X-CORRELATION-ID' default correlationId,
	"client_secret" : p('mongo-cf-sapi.client_secret'),
	"systemId" : "OTINICIATIVAS",
	"client_id" : p('mongo-cf-sapi.client_id')
}]]]></http:headers>
		</http:request>
	</sub-flow>
	<sub-flow name="patch-contactoFrecuente-client" doc:id="76f6f81e-34f8-4297-ba06-a280bc929857" >
		<http:request method="PATCH" doc:name="Call Patch Contacto Frecuente" doc:id="a55b82e8-5430-4434-b0f9-20a51c697f1f" config-ref="HTTP_Request_configuration_mongo_cf" path="${mongo-cf-sapi.path.contacto-frecuente}">
			<http:headers ><![CDATA[#[output application/java
---
{
	"source" : "",
	"name" : "",
	"X-CORRELATION-ID" : vars.initialHeaders.'X-CORRELATION-ID' default correlationId,
	"client_secret" : p('mongo-cf-sapi.client_secret'),
	"systemId" : "OTINICIATIVAS",
	"client_id" : p('mongo-cf-sapi.client_id')
}]]]></http:headers>
			<http:query-params ><![CDATA[#[output application/java
---
{
	"id" : vars.id
}]]]></http:query-params>
		</http:request>
	</sub-flow>
	<sub-flow name="get-contactoFrecuenteByCliente" doc:id="21bcc166-4422-4551-a7b7-137bf056a590" >
		<http:request method="GET" doc:name="Call Get Contacto Frecuente" doc:id="03a9ba8a-c22a-402f-a4db-5cc865899fac" config-ref="HTTP_Request_configuration_mongo_cf" path="${mongo-cf-sapi.path.contacto-frecuente}" >
			<http:headers ><![CDATA[#[output application/java
---
{
	"source" : "",
	"name" : "",
	"X-CORRELATION-ID" : vars.initialHeaders.'X-CORRELATION-ID' default correlationId,
	"client_secret" : p('mongo-cf-sapi.client_secret'),
	"systemId" : "OTINICIATIVAS",
	"client_id" : p('mongo-cf-sapi.client_id')
}]]]></http:headers>
			<http:query-params ><![CDATA[#[output application/java
---
{
	"numeroDocumento" : vars.numeroIdentificacion,
	"tipoDocumento" : vars.tipoIdentificacion
}]]]></http:query-params>
		</http:request>
	</sub-flow>
</mule>
