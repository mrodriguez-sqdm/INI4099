<?xml version="1.0" encoding="UTF-8"?>

<mule xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
	xmlns:munit="http://www.mulesoft.org/schema/mule/munit" xmlns:munit-tools="http://www.mulesoft.org/schema/mule/munit-tools"
	xmlns="http://www.mulesoft.org/schema/mule/core" xmlns:doc="http://www.mulesoft.org/schema/mule/documentation"
	xsi:schemaLocation="
		http://www.mulesoft.org/schema/mule/core http://www.mulesoft.org/schema/mule/core/current/mule.xsd
		http://www.mulesoft.org/schema/mule/munit http://www.mulesoft.org/schema/mule/munit/current/mule-munit.xsd
		http://www.mulesoft.org/schema/mule/munit-tools  http://www.mulesoft.org/schema/mule/munit-tools/current/mule-munit-tools.xsd">
	<munit:config name="post-svas-test-suite.xml" />
	<munit:test name="post-svas-test-suite-post:\v1\svas:application\json:service-papi-services-configTest" doc:id="62ab6237-c7be-427f-9b82-8fbf5e28cbd9" description="Test">
		<munit:behavior >
			<munit-tools:mock-when doc:name="Mock when Get catalog" doc:id="5353eb17-4231-4523-be6e-e6b11582911f" processor="http:request">
				<munit-tools:with-attributes >
					<munit-tools:with-attribute whereValue="08c08175-76af-4df5-b7d3-ba3ed3b4e633" attributeName="doc:id" />
				</munit-tools:with-attributes>
				<munit-tools:then-return >
					<munit-tools:payload value='#[output application/json&#10;---&#10;[{&#10;    "usuario_creo" : "yonaest1",&#10;    "fecha_creacion" : "2022-04-21T20:19:28.272+0000",&#10;    "cod_configuracion" : "31111200991",&#10;    "secuencia" : 0,&#10;    "dependencia" : 0,&#10;    "num_agrupacion" : 5733,&#10;    "id_producto" : "6261bc507b67fb35d089d5fa",&#10;    "producto" : "DATOS 20 GB",&#10;    "id_tipo_producto" : "3",&#10;    "tipo_producto" : "OPCIONAL",&#10;    "id_producto_principal" : "5733Opcional",&#10;    "producto_principal" : "5733Opcional",&#10;    "id_bundle_principal" : null,&#10;    "bundle_principal" : null,&#10;    "fecha_ini_vigencia" : "2022-04-21T05:00:00.000+0000",&#10;    "fecha_fin_vigencia" : null,&#10;    "estado" : "Activo",&#10;    "id_tipo_servicio" : "1",&#10;    "tipo_servicio" : "LTE",&#10;    "id_subtipo_servicio" : "11",&#10;    "subtipo_servicio" : "POSPAGO",&#10;    "id_subtipo_producto" : "1200",&#10;    "subtipo_producto" : "DATOS",&#10;    "id_opcional_auxiliar" : null,&#10;    "es_tipo_bundle" : false,&#10;    "tipo_bundle" : null,&#10;    "clasificacion" : "SERVICIO",&#10;    "cantidad_minima" : 0,&#10;    "cantidad_maxima" : 0,&#10;    "precio_minimo" : 0,&#10;    "precio_maximo" : 0,&#10;    "rangoInicioSeguro" : null,&#10;    "rangoFinSeguro" : null,&#10;    "fase" : null,&#10;    "fase_update" : null,&#10;    "estado_update" : null,&#10;    "icono" : "datos",&#10;    "archivo" : "data:image/PNG;base64,iVBORw0KGgoAAAANSUhEUgAAAC0AAAAxCAYAAABODiB6AAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsMAAA7DAcdvqGQAAAPpSURBVGhD7Zm9ayJBGIfvX7FKly7ddXbp7NLZpUt3Xbp0+QfSpRNBDAgBkQiBhUA8iK5ishj8QHERRZFbIySbD/jdO+uszopmd3ZX4TgfeCG6s87j7DvvzJgf+AfZSW+LnfS2+N+lP2EaLzDf+csNElD6A0O1hpNUEXuJIiI89pJlnOQb0IxP3i5c/EtPdVxeFbF/pUFpjzEcvWAytmMEVaniMFHC2cMffkN4+Jc2OkjfDTBs1nFKIx0hwcMURXI26vF8B8NBG4n7Ib8hPIKlx7uOi1QFiboBczyAqnZQqI9gTkdQspQi9+GPMiOEiWhCzZdodEky+zjL7+QjlBG/vAFCkCamBibzqvFp5fUmCUea8T5GQdFwfttAc8rf2xDhSL8PkaZKMi95qRq0DYoHl14SjiSrOM1sVjyY9HSAhENYQ4EtKF8j3FzT5NyQuH9pLrxHi8s5E7eFbZbFKec1Vg6/ZpeD4E96LvwMRalQiVsStpmLV3BMiw57GtFcl4pkMOSlafm+YLVYEFa/S4FxCyd2+rDItDDhl/wiJ82FWeexVNldGH1c8hG2gtrfPD3jJFlCLNuC7jNVvEsLwiz2Um7CjD4ubGkuHLe/AK2giS5vJolH6TcUsnZnC2GzptFOjvL0uoW126JBlzZWbTRpY7UQZulVh9Zu0zUdQ8kR9yj9ghuqvTNhu4y9Qbm2JcpID6yGa1FzovAzba40RPnr6G2ft/KG9/TotfCLHnUsr89m/2sHp7xTL9LoNSiXizjI1KE+PM6FWcQUek6vb7yhO3ITURCfPGnCaYXShTdxZdBwpEk010LhlqoQ/b2faaxPMwE5aQYXj1IFsDuOUH7q/LIrwhMShWefVcWNwdt9g7w0o+ecVNK11xhCrY+h34vCRRyxNPGAP+mBU/pQcUvoVSwmt/UZdFSLWIcH98OwL+nJ7+q8M6vDHJ+csvTaOMtU6PBLe5Iur+GuC5YvabHUieIB9hRd55OLu5wt5aW/ujgTOhDDl/iSMDvVXzb5tTXIS9dr+OnoxBky4mZTXNZZlHD25Lo3kJduKkKpWxNetp9MmG2cDub3lXDuQZghLS0ux99FNNfBZM2ewhphXtv1uzK19y7MkJaedbJadDlWiS9SooTjrIZfV2UpYUboOb0corhJ98Yc1+VG2EZeGoZjUfAS0SxtTWvLwmVc1OWFGT6kiSmVPXtz7xbJMuLC4WEW/oUZ/qQZtNU8doisCFrdrAOv40sGE2b4l2YYfSTWpMoR+6lX/K8A+wlB7aI5/uBv+CeYtMUnzF4f1+x3vHwN6Yc+9Ff3TU8QQpDePjvpbbGT3hY76e0A/AWDu58mJVKdpAAAAABJRU5ErkJggg==",&#10;    "display" : "20 GB",&#10;    "es_modificacion" : false,&#10;    "usuario_bloqueo" : null,&#10;    "descripcion_plan" : null,&#10;    "especificacion_tecnica" : null,&#10;    "observaciones" : null,&#10;    "serviceclass" : null,&#10;    "nombreserviceclass" : null,&#10;    "flag_agendamiento" : false,&#10;    "flag_disponibilidad" : false,&#10;    "flag_aprovisionamiento" : true,&#10;    "flag_facturacion" : true,&#10;    "respuesta_complementos_revchain" : null,&#10;    "respuesta_catalogo_produccion_lte" : null,&#10;    "sincronizacion_compl_revchain" : null,&#10;    "especificaciones_facturacion_upd" : null,&#10;    "valor_espec_tecnica_oferta" : [&#10;        {&#10;            "id_producto_espeficificacion" : null,&#10;            "producto_espeficificacion" : null,&#10;            "sistema" : "REVCHAIN",&#10;            "tipo_especificacion" : "PARAMETRO",&#10;            "parametro" : "RVC FEAT",&#10;            "valor" : "SVA Bolsa Paquete Recurrente 20GB",&#10;            "accion_esp_tecnica_oferta" : [&#10;                {&#10;                    "accion" : "ADD"&#10;                }&#10;            ]&#10;        },&#10;        {&#10;            "id_producto_espeficificacion" : null,&#10;            "producto_espeficificacion" : null,&#10;            "sistema" : "REVCHAIN",&#10;            "tipo_especificacion" : "PARAMETRO",&#10;            "parametro" : "RVC PLN ",&#10;            "valor" : "Bolsa Datos 20GB",&#10;            "accion_esp_tecnica_oferta" : [&#10;                {&#10;                    "accion" : "ADD"&#10;                }&#10;            ]&#10;        },&#10;        {&#10;            "id_producto_espeficificacion" : null,&#10;            "producto_espeficificacion" : null,&#10;            "sistema" : "REVCHAIN",&#10;            "tipo_especificacion" : "PARAMETRO",&#10;            "parametro" : "RVC PARM Index DS",&#10;            "valor" : "0-20GB3G4G-0",&#10;            "accion_esp_tecnica_oferta" : [&#10;                {&#10;                    "accion" : "ADD"&#10;                }&#10;            ]&#10;        },&#10;        {&#10;            "id_producto_espeficificacion" : null,&#10;            "producto_espeficificacion" : null,&#10;            "sistema" : "REVCHAIN",&#10;            "tipo_especificacion" : "PARAMETRO",&#10;            "parametro" : "RVC PARM Descuento DS",&#10;            "valor" : "0.000",&#10;            "accion_esp_tecnica_oferta" : [&#10;                {&#10;                    "accion" : "ADD"&#10;                }&#10;            ]&#10;        },&#10;        {&#10;            "id_producto_espeficificacion" : null,&#10;            "producto_espeficificacion" : null,&#10;            "sistema" : "REVCHAIN",&#10;            "tipo_especificacion" : "PARAMETRO",&#10;            "parametro" : "RVC PARM Index desc",&#10;            "valor" : "D-Ad",&#10;            "accion_esp_tecnica_oferta" : [&#10;                {&#10;                    "accion" : "ADD"&#10;                }&#10;            ]&#10;        },&#10;        {&#10;            "id_producto_espeficificacion" : null,&#10;            "producto_espeficificacion" : null,&#10;            "sistema" : "REVCHAIN",&#10;            "tipo_especificacion" : "PARAMETRO",&#10;            "parametro" : "RVC PARM Cargo Datos DS",&#10;            "valor" : "16806.72",&#10;            "accion_esp_tecnica_oferta" : [&#10;                {&#10;                    "accion" : "ADD"&#10;                }&#10;            ]&#10;        },&#10;        {&#10;            "id_producto_espeficificacion" : null,&#10;            "producto_espeficificacion" : null,&#10;            "sistema" : "REVCHAIN",&#10;            "tipo_especificacion" : "PARAMETRO",&#10;            "parametro" : "RVC PARM Cargo Datos Adic DS",&#10;            "valor" : "0",&#10;            "accion_esp_tecnica_oferta" : [&#10;                {&#10;                    "accion" : "ADD"&#10;                }&#10;            ]&#10;        },&#10;        {&#10;            "id_producto_espeficificacion" : null,&#10;            "producto_espeficificacion" : null,&#10;            "sistema" : "OCS",&#10;            "tipo_especificacion" : "PARAMETRO",&#10;            "parametro" : "refillProfileID",&#10;            "valor" : "D265",&#10;            "accion_esp_tecnica_oferta" : [&#10;                {&#10;                    "accion" : "ADD"&#10;                }&#10;            ]&#10;        },&#10;        {&#10;            "id_producto_espeficificacion" : null,&#10;            "producto_espeficificacion" : null,&#10;            "sistema" : "OCS",&#10;            "tipo_especificacion" : "PARAMETRO",&#10;            "parametro" : "OfferID",&#10;            "valor" : "66364",&#10;            "accion_esp_tecnica_oferta" : [&#10;                {&#10;                    "accion" : "ADD"&#10;                }&#10;            ]&#10;        },&#10;        {&#10;            "id_producto_espeficificacion" : null,&#10;            "producto_espeficificacion" : null,&#10;            "sistema" : "OCS",&#10;            "tipo_especificacion" : "PARAMETRO",&#10;            "parametro" : "Primary_Class_Code",&#10;            "valor" : "LTE SVA Prorrated and Recurring Package Class",&#10;            "accion_esp_tecnica_oferta" : [&#10;                {&#10;                    "accion" : "ADD"&#10;                }&#10;            ]&#10;        }&#10;    ],&#10;    "caracteristicas_producto_oferta" : [&#10;        {&#10;            "caracteristica" : "TIENDA_SERVICIO_COMPRA",&#10;            "valor" : "buybag",&#10;            "accion_caracteristica_oferta" : [&#10;                {&#10;                    "accion" : "ADD"&#10;                }&#10;            ]&#10;        }&#10;    ],&#10;    "agrupa_filtros_oferta" : null,&#10;    "parametros_bundle" : [&#10;        {&#10;            "parametro" : "CANAL VENTA",&#10;            "tipo_parametro" : "Parámetro General",&#10;            "valor" : "MOVILIDAD"&#10;        },&#10;        {&#10;            "parametro" : "UEN",&#10;            "tipo_parametro" : "Parámetro General",&#10;            "valor" : "HOGARES/EMPRESAS/NEGOCIOS"&#10;        },&#10;        {&#10;            "parametro" : "SCORING CLIENTE",&#10;            "tipo_parametro" : "Parámetro General",&#10;            "valor" : "0"&#10;        },&#10;        {&#10;            "parametro" : "TECNOLOGÍA",&#10;            "tipo_parametro" : "Parámetro General",&#10;            "valor" : "LTE"&#10;        }&#10;    ],&#10;    "precio_oferta" : [&#10;        {&#10;            "_id" : "5e2879727b67fb10b8f54c47",&#10;            "usuario_creo" : null,&#10;            "fecha_creacion" : "0001-01-01T00:00:00.000+0000",&#10;            "canal_venta" : null,&#10;            "servicio" : null,&#10;            "precio_sin_iva" : 20000,&#10;            "precio_con_iva" : 20000,&#10;            "iva" : 19,&#10;            "fecha_aplicacion" : null,&#10;            "estado" : null,&#10;            "precio_filtros" : null&#10;        }&#10;    ],&#10;    "precio_oferta_upd" : null,&#10;    "agrupacion_filtros" : null,&#10;    "imagenes_plan" : null,&#10;    "atributos_agendamiento" : null,&#10;    "atributos_disponibilidad" : null,&#10;    "atributos_aprovisionamiento" : null,&#10;    "bundles_auxiliares" : null&#10;}&#10;]]' />
				</munit-tools:then-return>
			</munit-tools:mock-when>
			<munit-tools:mock-when doc:name="Get token" doc:id="9cdb5c4c-28e6-4092-af3e-384a18fa3286" processor="http:request" >
				<munit-tools:with-attributes >
					<munit-tools:with-attribute whereValue="a0904c22-a3d7-4db1-937f-39c97089e3b8" attributeName="doc:id" />
				</munit-tools:with-attributes>
				<munit-tools:then-return >
					<munit-tools:variables >
						<munit-tools:variable key="jscToken" value='#["Bearer eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzI1NiJ9.eyJhdWQiOiJjYW1wYWlnbnMiLCJzdWIiOiI2aXc4d2tkSjY3ZGdoYWplcnQ5MDJqYWQ5blJFYWlkaGZvciIsImlzcyI6IiIsImV4cCI6MTcxOTMzOTkyNX0.EP83zflrqnApTpfqRwbzcfK8yVs5Js7lSJzjLVIF72k"]' mediaType="application/java" />
					</munit-tools:variables>
				</munit-tools:then-return>
			</munit-tools:mock-when>
			<munit-tools:mock-when doc:name="Get subscription" doc:id="67411c1e-4132-4372-ab5d-97a3789ee1ff" processor="http:request" >
				<munit-tools:with-attributes >
					<munit-tools:with-attribute whereValue="3e255e92-7e96-4da6-bc0a-1b2385a56081" attributeName="doc:id" />
				</munit-tools:with-attributes>
				<munit-tools:then-return >
					<munit-tools:payload value='#[output application/json &#10;--- &#10;{&#10;  "links": [&#10;    {&#10;      "rel": "string",&#10;      "href": "string",&#10;      "hreflang": "string",&#10;      "media": "string",&#10;      "title": "string",&#10;      "type": "string",&#10;      "deprecation": "string",&#10;      "profile": "string",&#10;      "name": "string"&#10;    }&#10;  ],&#10;  "content": [&#10;    {&#10;      "id": "1234",&#10;      "name": "Name",&#10;      "domain": "string",&#10;      "status": "PRE_ACTIVE",&#10;      "networkStatus": "PRE_ACTIVE",&#10;      "type": "RETAIL",&#10;      "portabilityStatus": "NO_PORTABILITY",&#10;      "billingType": "PREPAY",&#10;      "creationDate": "2022-04-20T10:13:15.686Z",&#10;      "firstActivationDate": "2022-04-20T10:13:15.686Z",&#10;      "terminationDate": "2022-04-20T10:13:15.686Z",&#10;      "balance": {&#10;      	"amount": 100000&#10;      	},&#10;      "balanceExpirationDate": "2022-04-20T10:13:15.686Z",&#10;      "lastTrafficDate": "2022-04-20T10:13:15.686Z",&#10;      "externalName": "Prepay Mobile",&#10;      "language": "en_US",&#10;      "ntwID": "555112",&#10;      "publicIdentity": "555112",&#10;      "externalID": "555112",      &#10;      "subscriber": {&#10;        "id": "1234",&#10;        "name": "Name",&#10;        "links": [&#10;          {&#10;            "rel": "string",&#10;            "href": "string",&#10;            "hreflang": "string",&#10;            "media": "string",&#10;            "title": "string",&#10;            "type": "string",&#10;            "deprecation": "string",&#10;            "profile": "string",&#10;            "name": "string"&#10;          }&#10;        ]      &#10;      },&#10;      "lastUpdate": "2022-04-20T10:13:15.686Z",&#10;      "links": [&#10;        {&#10;          "rel": "string",&#10;          "href": "string",&#10;          "hreflang": "string",&#10;          "media": "string",&#10;          "title": "string",&#10;          "type": "string",&#10;          "deprecation": "string",&#10;          "profile": "string",&#10;          "name": "string"&#10;        }&#10;      ]&#10;    }&#10;  ],&#10;  "page": {&#10;    "size": 0,&#10;    "totalElements": 0,&#10;    "totalPages": 0,&#10;    "number": 0&#10;  }&#10;}]' mediaType="application/json" />
				</munit-tools:then-return>
			</munit-tools:mock-when>
			<munit-tools:mock-when doc:name="CreateOrder" doc:id="febceeb3-64cf-4e9f-8f0e-338abdfcbfeb" processor="http:request" >
				<munit-tools:with-attributes >
					<munit-tools:with-attribute whereValue="Post order" attributeName="doc:name" />
					<munit-tools:with-attribute whereValue="089db6f5-e7ae-4b06-8af1-f52f93dfecb3" attributeName="doc:id" />
				</munit-tools:with-attributes>
				<munit-tools:then-return >
					<munit-tools:payload value='#[output application/json &#10;---     &#10;{&#10;  "links": [&#10;    {&#10;      "rel": "string",&#10;      "href": "string",&#10;      "hreflang": "string",&#10;      "media": "string",&#10;      "title": "string",&#10;      "type": "string",&#10;      "deprecation": "string",&#10;      "profile": "string",&#10;      "name": "string"&#10;    }&#10;  ],&#10;  "content": [&#10;    {&#10;      "id": "1234",&#10;      "name": "Name",&#10;      "domain": "string",&#10;      "status": "PRE_ACTIVE",&#10;      "networkStatus": "PRE_ACTIVE",&#10;      "type": "RETAIL",&#10;      "portabilityStatus": "NO_PORTABILITY",&#10;      "billingType": "PREPAY",&#10;      "creationDate": "2022-04-20T10:13:15.686Z",&#10;      "firstActivationDate": "2022-04-20T10:13:15.686Z",&#10;      "terminationDate": "2022-04-20T10:13:15.686Z",&#10;      "balance": 15.45,&#10;      "balanceExpirationDate": "2022-04-20T10:13:15.686Z",&#10;      "lastTrafficDate": "2022-04-20T10:13:15.686Z",&#10;      "externalName": "Prepay Mobile",&#10;      "language": "en_US",&#10;      "ntwID": "555112",&#10;      "publicIdentity": "555112",&#10;      "externalID": "555112",&#10;      "priceplan": {&#10;        "id": "1234",&#10;        "name": "Name",&#10;        "pricePlanName": "Brand price plan"&#10;      },&#10;      "salesData": {&#10;        "salesChannel": "OWN_CALLCENTER",&#10;        "salesPerson": "cac_agent_john"&#10;      },&#10;      "packageList": [&#10;        {&#10;          "id": "1234",&#10;          "name": "Name",&#10;          "links": [&#10;            {&#10;              "rel": "string",&#10;              "href": "string",&#10;              "hreflang": "string",&#10;              "media": "string",&#10;              "title": "string",&#10;              "type": "string",&#10;              "deprecation": "string",&#10;              "profile": "string",&#10;              "name": "string"&#10;            }&#10;          ]&#10;        }&#10;      ],&#10;      "msisdnList": [&#10;        {&#10;          "id": "1234",&#10;          "name": "Name",&#10;          "links": [&#10;            {&#10;              "rel": "string",&#10;              "href": "string",&#10;              "hreflang": "string",&#10;              "media": "string",&#10;              "title": "string",&#10;              "type": "string",&#10;              "deprecation": "string",&#10;              "profile": "string",&#10;              "name": "string"&#10;            }&#10;          ]&#10;        }&#10;      ],      &#10;      "simList": [&#10;        {&#10;          "id": "1234",&#10;          "name": "Name",&#10;          "links": [&#10;            {&#10;              "rel": "string",&#10;              "href": "string",&#10;              "hreflang": "string",&#10;              "media": "string",&#10;              "title": "string",&#10;              "type": "string",&#10;              "deprecation": "string",&#10;              "profile": "string",&#10;              "name": "string"&#10;            }&#10;          ]&#10;        }&#10;      ],&#10;      "subscriber": {&#10;        "id": "1234",&#10;        "name": "Name",&#10;        "links": [&#10;          {&#10;            "rel": "string",&#10;            "href": "string",&#10;            "hreflang": "string",&#10;            "media": "string",&#10;            "title": "string",&#10;            "type": "string",&#10;            "deprecation": "string",&#10;            "profile": "string",&#10;            "name": "string"&#10;          }&#10;        ]&#10;      }&#10;    }&#10;  ]&#10;}]' mediaType="application/json" />
				</munit-tools:then-return>
			</munit-tools:mock-when>
			<munit-tools:mock-when doc:name="Apply Order" doc:id="2ed512fb-f174-46ff-9111-f42a9767035b" processor="http:request" >
				<munit-tools:with-attributes >
					<munit-tools:with-attribute whereValue="End order" attributeName="doc:name" />
					<munit-tools:with-attribute whereValue="de69c118-3d0c-4e07-8c64-4c8eb28ac386" attributeName="doc:id" />
				</munit-tools:with-attributes>
				<munit-tools:then-return >
					<munit-tools:payload value="#[output application/json ---&#10;{}]" mediaType="application/json" />
				</munit-tools:then-return>
			</munit-tools:mock-when>
		</munit:behavior>
		<munit:execution >
			<munit:set-event doc:name="Set Event" doc:id="983dc5f6-3d89-4f3b-946e-12eddee09d1e" >
				<munit:payload value='#[output application/json&#10;---&#10;{&#10;    "numeroConexion":"3058331893",&#10;    "svas":[&#10;        {&#10;            "id":"5733"&#10;        }&#10;    ]&#10;}]' />
			</munit:set-event>
			<flow-ref doc:name="Flow-ref to post:\v1\svas:application\json:service-papi-services-config" doc:id="af88f71c-7ff9-4619-8bdf-259244e56b11" name="post:\v1\svas:application\json:service-papi-services-config"/>
		</munit:execution>
		<munit:validation >
			<munit-tools:assert-that doc:name="Assert that" doc:id="7d112023-918b-48b8-8753-6e2b96e45555" expression="#[payload]" is="#[MunitTools::notNullValue()]"/>
		</munit:validation>
	</munit:test>


</mule>
