<?xml version="1.0" encoding="UTF-8"?>

<mule xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
	xmlns:munit="http://www.mulesoft.org/schema/mule/munit" xmlns:munit-tools="http://www.mulesoft.org/schema/mule/munit-tools"
	xmlns="http://www.mulesoft.org/schema/mule/core" xmlns:doc="http://www.mulesoft.org/schema/mule/documentation"
	xsi:schemaLocation="
		http://www.mulesoft.org/schema/mule/core http://www.mulesoft.org/schema/mule/core/current/mule.xsd
		http://www.mulesoft.org/schema/mule/munit http://www.mulesoft.org/schema/mule/munit/current/mule-munit.xsd
		http://www.mulesoft.org/schema/mule/munit-tools  http://www.mulesoft.org/schema/mule/munit-tools/current/mule-munit-tools.xsd">
	<munit:config name="service-papi-services-test-suite.xml" />
	<munit:test name="post-sva-test-suite-add" doc:id="83518152-8a8f-44c0-bb20-2eb5a8a7f04c" description="Test">
		<munit:behavior>
			<munit-tools:mock-when doc:name="Get token" doc:id="106a2429-ad92-4a6f-b4e3-422cec714db9" processor="http:request">
			<munit-tools:with-attributes>
				<munit-tools:with-attribute whereValue="a0904c22-a3d7-4db1-937f-39c97089e3b8" attributeName="doc:id" />
			</munit-tools:with-attributes>
			<munit-tools:then-return>
				<munit-tools:payload value='#[output application/json --- {&#10;  "accessToken": "eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzI1NiJ9.eyJhdWQiOiJjYW1wYWlnbnMiLCJzdWIiOiI2aXc4d2tkSjY3ZGdoYWplcnQ5MDJqYWQ5blJFYWlkaGZvciIsImlzcyI6IiIsImV4cCI6MTcwODQ1MjMyNX0.ve9-4YF96RQXBjcZ42z3lr1rYPdgUgbm-FAflIDheRw",&#10;  "tokenType": "Bearer",&#10;  "ipOrigen": "0.0.0.0",&#10;  "expiresIn": "2024-02-07T20:00:00.000Z"&#10;}]' mediaType="application/json" />
			</munit-tools:then-return>
		</munit-tools:mock-when>
			<munit-tools:mock-when doc:name="Get subscription" doc:id="286bb192-1ae1-4002-a731-b3ee89cecd6c" processor="http:request">
				<munit-tools:with-attributes >
					<munit-tools:with-attribute whereValue="Get subscription" attributeName="doc:name" />
					<munit-tools:with-attribute whereValue="2a6f3410-1023-471f-a692-c18b2850a358" attributeName="doc:id" />
				</munit-tools:with-attributes>
				<munit-tools:then-return >
					<munit-tools:payload value='#[output application/json &#10;--- &#10;{&#10;  "links": [&#10;    {&#10;      "rel": "string",&#10;      "href": "string",&#10;      "hreflang": "string",&#10;      "media": "string",&#10;      "title": "string",&#10;      "type": "string",&#10;      "deprecation": "string",&#10;      "profile": "string",&#10;      "name": "string"&#10;    }&#10;  ],&#10;  "content": [&#10;    {&#10;      "id": "1234",&#10;      "name": "Name",&#10;      "domain": "string",&#10;      "status": "PRE_ACTIVE",&#10;      "networkStatus": "PRE_ACTIVE",&#10;      "type": "RETAIL",&#10;      "portabilityStatus": "NO_PORTABILITY",&#10;      "billingType": "PREPAY",&#10;      "creationDate": "2022-04-20T10:13:15.686Z",&#10;      "firstActivationDate": "2022-04-20T10:13:15.686Z",&#10;      "terminationDate": "2022-04-20T10:13:15.686Z",&#10;      "balance": 15.45,&#10;      "balanceExpirationDate": "2022-04-20T10:13:15.686Z",&#10;      "lastTrafficDate": "2022-04-20T10:13:15.686Z",&#10;      "externalName": "Prepay Mobile",&#10;      "language": "en_US",&#10;      "ntwID": "555112",&#10;      "publicIdentity": "555112",&#10;      "externalID": "555112",      &#10;      "subscriber": {&#10;        "id": "1234",&#10;        "name": "Name",&#10;        "links": [&#10;          {&#10;            "rel": "string",&#10;            "href": "string",&#10;            "hreflang": "string",&#10;            "media": "string",&#10;            "title": "string",&#10;            "type": "string",&#10;            "deprecation": "string",&#10;            "profile": "string",&#10;            "name": "string"&#10;          }&#10;        ]      &#10;      },&#10;      "lastUpdate": "2022-04-20T10:13:15.686Z",&#10;      "links": [&#10;        {&#10;          "rel": "string",&#10;          "href": "string",&#10;          "hreflang": "string",&#10;          "media": "string",&#10;          "title": "string",&#10;          "type": "string",&#10;          "deprecation": "string",&#10;          "profile": "string",&#10;          "name": "string"&#10;        }&#10;      ]&#10;    }&#10;  ],&#10;  "page": {&#10;    "size": 0,&#10;    "totalElements": 0,&#10;    "totalPages": 0,&#10;    "number": 0&#10;  }&#10;}]' mediaType="application/json" />
				</munit-tools:then-return>
			</munit-tools:mock-when>
			<munit-tools:mock-when doc:name="Retrieve promXpkg" doc:id="a4e166a3-684c-4886-b7a1-75e565dec6f4" processor="os:retrieve">
				<munit-tools:with-attributes >
					<munit-tools:with-attribute whereValue="Retrieve promXpkg" attributeName="doc:name" />
					<munit-tools:with-attribute whereValue="8b657bea-bd7b-48cb-832f-d1bc6f2a885b" attributeName="doc:id" />
				</munit-tools:with-attributes>
				<munit-tools:then-return >
					<munit-tools:payload value='#[output application/json &#10;--- &#10;{&#10;      "promXpkg": [&#10;        {&#10;            "Campa単aId": "1",&#10;            "Paquete_Seleccionado": "234",&#10;            "Paquete_Entregar": "999"&#10;        },&#10;        {&#10;            "Campa単aId": "1",&#10;            "Paquete_Seleccionado": "543",&#10;            "Paquete_Entregar": "998"&#10;        },&#10;        {&#10;            "Campa単aId": "2",&#10;            "Paquete_Seleccionado": "324",&#10;            "Paquete_Entregar": "997"&#10;        },&#10;        {&#10;            "Campa単aId": "2",&#10;            "Paquete_Seleccionado": "156",&#10;            "Paquete_Entregar": "990"&#10;        }&#10;    ]&#10;}]' mediaType="application/json" />
				</munit-tools:then-return>
			</munit-tools:mock-when>
			<munit-tools:mock-when doc:name="CreateOrder" doc:id="521c6264-8d6d-473b-9889-0027db933fe0" processor="http:request">
				<munit-tools:with-attributes >
					<munit-tools:with-attribute whereValue="Post order" attributeName="doc:name" />
					<munit-tools:with-attribute whereValue="089db6f5-e7ae-4b06-8af1-f52f93dfecb3" attributeName="doc:id" />
				</munit-tools:with-attributes>
				<munit-tools:then-return >
					<munit-tools:payload value='#[output application/json &#10;---     &#10;{&#10;  "links": [&#10;    {&#10;      "rel": "string",&#10;      "href": "string",&#10;      "hreflang": "string",&#10;      "media": "string",&#10;      "title": "string",&#10;      "type": "string",&#10;      "deprecation": "string",&#10;      "profile": "string",&#10;      "name": "string"&#10;    }&#10;  ],&#10;  "content": [&#10;    {&#10;      "id": "1234",&#10;      "name": "Name",&#10;      "domain": "string",&#10;      "status": "PRE_ACTIVE",&#10;      "networkStatus": "PRE_ACTIVE",&#10;      "type": "RETAIL",&#10;      "portabilityStatus": "NO_PORTABILITY",&#10;      "billingType": "PREPAY",&#10;      "creationDate": "2022-04-20T10:13:15.686Z",&#10;      "firstActivationDate": "2022-04-20T10:13:15.686Z",&#10;      "terminationDate": "2022-04-20T10:13:15.686Z",&#10;      "balance": 15.45,&#10;      "balanceExpirationDate": "2022-04-20T10:13:15.686Z",&#10;      "lastTrafficDate": "2022-04-20T10:13:15.686Z",&#10;      "externalName": "Prepay Mobile",&#10;      "language": "en_US",&#10;      "ntwID": "555112",&#10;      "publicIdentity": "555112",&#10;      "externalID": "555112",&#10;      "priceplan": {&#10;        "id": "1234",&#10;        "name": "Name",&#10;        "pricePlanName": "Brand price plan"&#10;      },&#10;      "salesData": {&#10;        "salesChannel": "OWN_CALLCENTER",&#10;        "salesPerson": "cac_agent_john"&#10;      },&#10;      "packageList": [&#10;        {&#10;          "id": "1234",&#10;          "name": "Name",&#10;          "links": [&#10;            {&#10;              "rel": "string",&#10;              "href": "string",&#10;              "hreflang": "string",&#10;              "media": "string",&#10;              "title": "string",&#10;              "type": "string",&#10;              "deprecation": "string",&#10;              "profile": "string",&#10;              "name": "string"&#10;            }&#10;          ]&#10;        }&#10;      ],&#10;      "msisdnList": [&#10;        {&#10;          "id": "1234",&#10;          "name": "Name",&#10;          "links": [&#10;            {&#10;              "rel": "string",&#10;              "href": "string",&#10;              "hreflang": "string",&#10;              "media": "string",&#10;              "title": "string",&#10;              "type": "string",&#10;              "deprecation": "string",&#10;              "profile": "string",&#10;              "name": "string"&#10;            }&#10;          ]&#10;        }&#10;      ],      &#10;      "simList": [&#10;        {&#10;          "id": "1234",&#10;          "name": "Name",&#10;          "links": [&#10;            {&#10;              "rel": "string",&#10;              "href": "string",&#10;              "hreflang": "string",&#10;              "media": "string",&#10;              "title": "string",&#10;              "type": "string",&#10;              "deprecation": "string",&#10;              "profile": "string",&#10;              "name": "string"&#10;            }&#10;          ]&#10;        }&#10;      ],&#10;      "subscriber": {&#10;        "id": "1234",&#10;        "name": "Name",&#10;        "links": [&#10;          {&#10;            "rel": "string",&#10;            "href": "string",&#10;            "hreflang": "string",&#10;            "media": "string",&#10;            "title": "string",&#10;            "type": "string",&#10;            "deprecation": "string",&#10;            "profile": "string",&#10;            "name": "string"&#10;          }&#10;        ]&#10;      }&#10;    }&#10;  ]&#10;}]' mediaType="application/json" />
				</munit-tools:then-return>
			</munit-tools:mock-when>
			<munit-tools:mock-when doc:name="Apply Order" doc:id="114d49c3-46cc-4067-803f-2ea30d8d937a" processor="http:request">
				<munit-tools:with-attributes >
					<munit-tools:with-attribute whereValue="End order" attributeName="doc:name" />
					<munit-tools:with-attribute whereValue="de69c118-3d0c-4e07-8c64-4c8eb28ac386" attributeName="doc:id" />
				</munit-tools:with-attributes>
				<munit-tools:then-return >
					<munit-tools:payload value="#[output application/json ---&#10;{}]" mediaType="application/json" />
				</munit-tools:then-return>
			</munit-tools:mock-when>
		</munit:behavior>
		<munit:execution >
			<munit:set-event doc:name="Set Event" doc:id="8d0cd22e-f645-4d7d-9869-5d212dda750e">
				<munit:payload value='#[output application/json &#10;--- &#10;{&#10;   "integrationId": "MDM-MOV-5002334-1",&#10;   "svas":[&#10;      {&#10;         "action": "ADD",&#10;         "packageId": "D272"&#10;      },&#10;      {&#10;         "action": "ADD",&#10;         "packageId": "D273"&#10;      }&#10;   ]&#10;}]' mediaType="application/json" />
				<munit:attributes value='#[{ &#10;	headers: { &#10;		origenTransaccion: "salesforce-xapi-services" &#10;	}&#10;}]' />
			</munit:set-event>
			<flow-ref doc:name="Flow-ref to post:\v1\sva:application\json:service-papi-services-config" doc:id="1a58c164-fa03-4075-ba07-d49a1d9a326e" name="post:\v1\sva:application\json:service-papi-services-config"/>
		</munit:execution>
		<munit:validation >
			<munit-tools:assert-that doc:name="Assert that" doc:id="ced2e1ee-d44b-4fe4-8af0-348a2358de8b" expression="#[payload]" is="#[MunitTools::notNullValue()]"/>
		</munit:validation>
	</munit:test>
	<munit:test name="post-sva-test-suite-delete" doc:id="3798925e-bba9-4faa-8c98-62495a5a38a0" description="Test" >
		<munit:behavior >
			<munit-tools:mock-when doc:name="Get token" doc:id="940806b2-7094-4d3d-a925-1480170400d7" processor="http:request" >
				<munit-tools:with-attributes >
					<munit-tools:with-attribute whereValue="a0904c22-a3d7-4db1-937f-39c97089e3b8" attributeName="doc:id" />
				</munit-tools:with-attributes>
				<munit-tools:then-return >
					<munit-tools:payload value='#[output application/json --- {&#10;  "accessToken": "eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzI1NiJ9.eyJhdWQiOiJjYW1wYWlnbnMiLCJzdWIiOiI2aXc4d2tkSjY3ZGdoYWplcnQ5MDJqYWQ5blJFYWlkaGZvciIsImlzcyI6IiIsImV4cCI6MTcwODQ1MjMyNX0.ve9-4YF96RQXBjcZ42z3lr1rYPdgUgbm-FAflIDheRw",&#10;  "tokenType": "Bearer",&#10;  "ipOrigen": "0.0.0.0",&#10;  "expiresIn": "2024-02-07T20:00:00.000Z"&#10;}]' mediaType="application/json" />
				</munit-tools:then-return>
			</munit-tools:mock-when>
			<munit-tools:mock-when doc:name="Get subscription" doc:id="87a1aca5-9eb6-4081-a005-a357e0581f06" processor="http:request" >
				<munit-tools:with-attributes >
					<munit-tools:with-attribute whereValue="Get subscription" attributeName="doc:name" />
					<munit-tools:with-attribute whereValue="2a6f3410-1023-471f-a692-c18b2850a358" attributeName="doc:id" />
				</munit-tools:with-attributes>
				<munit-tools:then-return >
					<munit-tools:payload value='#[output application/json &#10;--- &#10;{&#10;  "links": [&#10;    {&#10;      "rel": "string",&#10;      "href": "string",&#10;      "hreflang": "string",&#10;      "media": "string",&#10;      "title": "string",&#10;      "type": "string",&#10;      "deprecation": "string",&#10;      "profile": "string",&#10;      "name": "string"&#10;    }&#10;  ],&#10;  "content": [&#10;    {&#10;      "id": "1234",&#10;      "name": "Name",&#10;      "domain": "string",&#10;      "status": "PRE_ACTIVE",&#10;      "networkStatus": "PRE_ACTIVE",&#10;      "type": "RETAIL",&#10;      "portabilityStatus": "NO_PORTABILITY",&#10;      "billingType": "PREPAY",&#10;      "creationDate": "2022-04-20T10:13:15.686Z",&#10;      "firstActivationDate": "2022-04-20T10:13:15.686Z",&#10;      "terminationDate": "2022-04-20T10:13:15.686Z",&#10;      "balance": 15.45,&#10;      "balanceExpirationDate": "2022-04-20T10:13:15.686Z",&#10;      "lastTrafficDate": "2022-04-20T10:13:15.686Z",&#10;      "externalName": "Prepay Mobile",&#10;      "language": "en_US",&#10;      "ntwID": "555112",&#10;      "publicIdentity": "555112",&#10;      "externalID": "555112",      &#10;      "subscriber": {&#10;        "id": "1234",&#10;        "name": "Name",&#10;        "links": [&#10;          {&#10;            "rel": "string",&#10;            "href": "string",&#10;            "hreflang": "string",&#10;            "media": "string",&#10;            "title": "string",&#10;            "type": "string",&#10;            "deprecation": "string",&#10;            "profile": "string",&#10;            "name": "string"&#10;          }&#10;        ]      &#10;      },&#10;      "lastUpdate": "2022-04-20T10:13:15.686Z",&#10;      "links": [&#10;        {&#10;          "rel": "string",&#10;          "href": "string",&#10;          "hreflang": "string",&#10;          "media": "string",&#10;          "title": "string",&#10;          "type": "string",&#10;          "deprecation": "string",&#10;          "profile": "string",&#10;          "name": "string"&#10;        }&#10;      ]&#10;    }&#10;  ],&#10;  "page": {&#10;    "size": 0,&#10;    "totalElements": 0,&#10;    "totalPages": 0,&#10;    "number": 0&#10;  }&#10;}]' mediaType="application/json" />
				</munit-tools:then-return>
			</munit-tools:mock-when>
			<munit-tools:mock-when doc:name="Mock Get PKGI with SID by status" doc:id="17728198-2276-47ac-9dec-67a920c57fe7" processor="http:request" >
				<munit-tools:with-attributes >
					<munit-tools:with-attribute whereValue="74f4f955-51e4-495d-ab84-bfb840a4fafe" attributeName="doc:id" />
				</munit-tools:with-attributes>
				<munit-tools:then-return >
					<munit-tools:payload value='#[output application/json&#10;---&#10;{ &#10;  "content": [&#10;    {&#10;      "id": "PKGID3725606_TS1726668154462",&#10;      "name": "Name",&#10;      "cancellationDate": "2022-04-20T10:13:15.686Z",&#10;      "provisioningDate": "2022-04-20T10:13:15.686Z",&#10;      "applicationDate": "2022-04-20T10:13:15.686Z",&#10;      "billingIgnore": true,&#10;      "status": "FREE",&#10;      "packageType": "INITIAL",&#10;      "pkg": {&#10;        "id": "1234",&#10;        "name": "Name",&#10;        "links": [&#10;          {&#10;            "rel": "string",&#10;            "href": "string",&#10;            "hreflang": "string",&#10;            "media": "string",&#10;            "title": "string",&#10;            "type": "string",&#10;            "deprecation": "string",&#10;            "profile": "string",&#10;            "name": "string"&#10;          }&#10;        ]&#10;      },&#10;      "subscription": {&#10;        "id": "1234",&#10;        "name": "Name",&#10;        "links": [&#10;          {&#10;            "rel": "string",&#10;            "href": "string",&#10;            "hreflang": "string",&#10;            "media": "string",&#10;            "title": "string",&#10;            "type": "string",&#10;            "deprecation": "string",&#10;            "profile": "string",&#10;            "name": "string"&#10;          }&#10;        ]&#10;      }&#10;    }&#10;  ]&#10;}]' mediaType="application/json" />
				</munit-tools:then-return>
			</munit-tools:mock-when>
			<munit-tools:mock-when doc:name="Mock Patch pkgid with status" doc:id="5ce62e6e-d27b-46ec-869b-86b8a9d7f3fd" processor="http:request" >
				<munit-tools:with-attributes >
					<munit-tools:with-attribute whereValue="021ec9cd-1eff-4da8-b7b9-b0e5df9b3f0f" attributeName="doc:id" />
				</munit-tools:with-attributes>
				<munit-tools:then-return >
					<munit-tools:payload value="#[output application/json&#10;---&#10;{}]" />
				</munit-tools:then-return>
			</munit-tools:mock-when>
		</munit:behavior>
		<munit:execution >
			<munit:set-event doc:name="Set Event" doc:id="432ab61f-1c4a-4ac8-8917-3112ead7d40e" >
				<munit:payload value='#[output application/json &#10;--- &#10;{&#10;   "integrationId": "MDM-MOV-5002334-1",&#10;   "svas":[&#10;      {&#10;         "action": "DELETE",&#10;         "idInstanceJSC": "PKGID3725606_TS1726668154462"&#10;      }&#10;   ]&#10;}]' mediaType="application/json" />
				<munit:attributes value='#[{ &#10;	"attributes": { &#10;		"headers": { &#10;			"origenTransaccion": "salesforce-xapi-services" &#10;		}&#10;	}&#10;}]' />
			</munit:set-event>
			<flow-ref doc:name="Flow-ref to post:\v1\sva:application\json:service-papi-services-config" doc:id="d57feb36-042f-4b43-a5a1-5cd0ff3c5bd4" name="post:\v1\sva:application\json:service-papi-services-config" />
		</munit:execution>
		<munit:validation >
			<munit-tools:assert-that doc:name="Assert that" doc:id="fe8b5e36-64f9-4937-b340-31cd610dbe79" expression="#[payload]" is="#[MunitTools::notNullValue()]" />
		</munit:validation>
	</munit:test>
	<munit:test name="post-sva-test-suite-delete-missmatch" doc:id="180845bd-ae98-4215-8221-4a0bce8c811e" description="Test" >
		<munit:behavior >
			<munit-tools:mock-when doc:name="Get token" doc:id="2224be1e-b484-48cf-8670-79ad98bc6772" processor="http:request" >
				<munit-tools:with-attributes >
					<munit-tools:with-attribute whereValue="a0904c22-a3d7-4db1-937f-39c97089e3b8" attributeName="doc:id" />
				</munit-tools:with-attributes>
				<munit-tools:then-return >
					<munit-tools:payload value='#[output application/json --- {&#10;  "accessToken": "eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzI1NiJ9.eyJhdWQiOiJjYW1wYWlnbnMiLCJzdWIiOiI2aXc4d2tkSjY3ZGdoYWplcnQ5MDJqYWQ5blJFYWlkaGZvciIsImlzcyI6IiIsImV4cCI6MTcwODQ1MjMyNX0.ve9-4YF96RQXBjcZ42z3lr1rYPdgUgbm-FAflIDheRw",&#10;  "tokenType": "Bearer",&#10;  "ipOrigen": "0.0.0.0",&#10;  "expiresIn": "2024-02-07T20:00:00.000Z"&#10;}]' mediaType="application/json" />
				</munit-tools:then-return>
			</munit-tools:mock-when>
			<munit-tools:mock-when doc:name="Get subscription" doc:id="d4bb0b4b-f352-412b-97fd-2ac0252a28f5" processor="http:request" >
				<munit-tools:with-attributes >
					<munit-tools:with-attribute whereValue="Get subscription" attributeName="doc:name" />
					<munit-tools:with-attribute whereValue="2a6f3410-1023-471f-a692-c18b2850a358" attributeName="doc:id" />
				</munit-tools:with-attributes>
				<munit-tools:then-return >
					<munit-tools:payload value='#[output application/json &#10;--- &#10;{&#10;  "links": [&#10;    {&#10;      "rel": "string",&#10;      "href": "string",&#10;      "hreflang": "string",&#10;      "media": "string",&#10;      "title": "string",&#10;      "type": "string",&#10;      "deprecation": "string",&#10;      "profile": "string",&#10;      "name": "string"&#10;    }&#10;  ],&#10;  "content": [&#10;    {&#10;      "id": "1234",&#10;      "name": "Name",&#10;      "domain": "string",&#10;      "status": "PRE_ACTIVE",&#10;      "networkStatus": "PRE_ACTIVE",&#10;      "type": "RETAIL",&#10;      "portabilityStatus": "NO_PORTABILITY",&#10;      "billingType": "PREPAY",&#10;      "creationDate": "2022-04-20T10:13:15.686Z",&#10;      "firstActivationDate": "2022-04-20T10:13:15.686Z",&#10;      "terminationDate": "2022-04-20T10:13:15.686Z",&#10;      "balance": 15.45,&#10;      "balanceExpirationDate": "2022-04-20T10:13:15.686Z",&#10;      "lastTrafficDate": "2022-04-20T10:13:15.686Z",&#10;      "externalName": "Prepay Mobile",&#10;      "language": "en_US",&#10;      "ntwID": "555112",&#10;      "publicIdentity": "555112",&#10;      "externalID": "555112",      &#10;      "subscriber": {&#10;        "id": "1234",&#10;        "name": "Name",&#10;        "links": [&#10;          {&#10;            "rel": "string",&#10;            "href": "string",&#10;            "hreflang": "string",&#10;            "media": "string",&#10;            "title": "string",&#10;            "type": "string",&#10;            "deprecation": "string",&#10;            "profile": "string",&#10;            "name": "string"&#10;          }&#10;        ]      &#10;      },&#10;      "lastUpdate": "2022-04-20T10:13:15.686Z",&#10;      "links": [&#10;        {&#10;          "rel": "string",&#10;          "href": "string",&#10;          "hreflang": "string",&#10;          "media": "string",&#10;          "title": "string",&#10;          "type": "string",&#10;          "deprecation": "string",&#10;          "profile": "string",&#10;          "name": "string"&#10;        }&#10;      ]&#10;    }&#10;  ],&#10;  "page": {&#10;    "size": 0,&#10;    "totalElements": 0,&#10;    "totalPages": 0,&#10;    "number": 0&#10;  }&#10;}]' mediaType="application/json" />
				</munit-tools:then-return>
			</munit-tools:mock-when>
			<munit-tools:mock-when doc:name="Mock Get PKGI with SID by status" doc:id="bdb3096c-0388-4958-966c-a481d8e16327" processor="http:request" >
				<munit-tools:with-attributes >
					<munit-tools:with-attribute whereValue="74f4f955-51e4-495d-ab84-bfb840a4fafe" attributeName="doc:id" />
				</munit-tools:with-attributes>
				<munit-tools:then-return >
					<munit-tools:payload value='#[output application/json&#10;---&#10;{ &#10;  "content": [&#10;    {&#10;      "id": "1234",&#10;      "name": "Name",&#10;      "cancellationDate": "2022-04-20T10:13:15.686Z",&#10;      "provisioningDate": "2022-04-20T10:13:15.686Z",&#10;      "applicationDate": "2022-04-20T10:13:15.686Z",&#10;      "billingIgnore": true,&#10;      "status": "FREE",&#10;      "packageType": "INITIAL",&#10;      "pkg": {&#10;        "id": "1234",&#10;        "name": "Name",&#10;        "links": [&#10;          {&#10;            "rel": "string",&#10;            "href": "string",&#10;            "hreflang": "string",&#10;            "media": "string",&#10;            "title": "string",&#10;            "type": "string",&#10;            "deprecation": "string",&#10;            "profile": "string",&#10;            "name": "string"&#10;          }&#10;        ]&#10;      },&#10;      "subscription": {&#10;        "id": "1234",&#10;        "name": "Name",&#10;        "links": [&#10;          {&#10;            "rel": "string",&#10;            "href": "string",&#10;            "hreflang": "string",&#10;            "media": "string",&#10;            "title": "string",&#10;            "type": "string",&#10;            "deprecation": "string",&#10;            "profile": "string",&#10;            "name": "string"&#10;          }&#10;        ]&#10;      }&#10;    }&#10;  ]&#10;}]' mediaType="application/json" />
				</munit-tools:then-return>
			</munit-tools:mock-when>
			<munit-tools:mock-when doc:name="Mock Patch pkgid with status" doc:id="2bd6d541-2f3f-4357-ba8c-530f8d1d5156" processor="http:request" >
				<munit-tools:with-attributes >
					<munit-tools:with-attribute whereValue="021ec9cd-1eff-4da8-b7b9-b0e5df9b3f0f" attributeName="doc:id" />
				</munit-tools:with-attributes>
				<munit-tools:then-return >
					<munit-tools:payload value="#[output application/json&#10;---&#10;{}]" />
				</munit-tools:then-return>
			</munit-tools:mock-when>
		</munit:behavior>
		<munit:execution >
			<munit:set-event doc:name="Set Event" doc:id="f4e487de-c969-4781-886a-bdc95ae7b2fb" >
				<munit:payload value='#[output application/json &#10;--- &#10;{&#10;   "integrationId": "MDM-MOV-5002334-1",&#10;   "svas":[&#10;      {&#10;         "action": "DELETE",&#10;         "idInstanceJSC": "PKGID3725606_TS1726668154462"&#10;      }&#10;   ]&#10;}]' mediaType="application/json" />
				<munit:attributes value='#[{ &#10;	"attributes": { &#10;		"headers": { &#10;			"origenTransaccion": "salesforce-xapi-services" &#10;		}&#10;	}&#10;}]' />
			</munit:set-event>
			<flow-ref doc:name="Flow-ref to post:\v1\sva:application\json:service-papi-services-config" doc:id="c04971f0-d48a-42a9-bfc8-4f9ecc6025c7" name="post:\v1\sva:application\json:service-papi-services-config" />
		</munit:execution>
		<munit:validation >
			<munit-tools:assert-that doc:name="Assert that" doc:id="3618e10d-6875-42b4-b44b-9c9f31b0b09e" expression="#[payload]" is="#[MunitTools::notNullValue()]" />
		</munit:validation>
	</munit:test>
	<munit:test name="post-sva-test-suite-empty-subscription" doc:id="05893b49-952f-450b-8df2-e9d62dafb5ba" description="Test">
		<munit:behavior>
			<munit-tools:mock-when doc:name="Get token" doc:id="23bc92b6-421e-4188-bc9b-bee9931fb72a" processor="http:request">
				<munit-tools:with-attributes>
					<munit-tools:with-attribute whereValue="a0904c22-a3d7-4db1-937f-39c97089e3b8" attributeName="doc:id" />
				</munit-tools:with-attributes>
				<munit-tools:then-return>
					<munit-tools:payload value='#[output application/json --- {&#10;  "accessToken": "eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzI1NiJ9.eyJhdWQiOiJjYW1wYWlnbnMiLCJzdWIiOiI2aXc4d2tkSjY3ZGdoYWplcnQ5MDJqYWQ5blJFYWlkaGZvciIsImlzcyI6IiIsImV4cCI6MTcwODQ1MjMyNX0.ve9-4YF96RQXBjcZ42z3lr1rYPdgUgbm-FAflIDheRw",&#10;  "tokenType": "Bearer",&#10;  "ipOrigen": "0.0.0.0",&#10;  "expiresIn": "2024-02-07T20:00:00.000Z"&#10;}]' mediaType="application/json" />
				</munit-tools:then-return>
			</munit-tools:mock-when>
			<munit-tools:mock-when doc:name="Get subscription" doc:id="40fe3e6b-826e-4c2c-95b8-762e268f22eb" processor="http:request">
				<munit-tools:with-attributes>
					<munit-tools:with-attribute whereValue="Get subscription" attributeName="doc:name" />
					<munit-tools:with-attribute whereValue="2a6f3410-1023-471f-a692-c18b2850a358" attributeName="doc:id" />
				</munit-tools:with-attributes>
				<munit-tools:then-return>
					<munit-tools:payload value="#[output application/json &#10;--- &#10;null]" mediaType="application/json" />
				</munit-tools:then-return>
			</munit-tools:mock-when>
		</munit:behavior>
		<munit:execution>
			<munit:set-event doc:name="Set Event" doc:id="aba44e8b-8f11-404b-8ea5-89a32636db10">
				<munit:payload value='#[output application/json &#10;--- &#10;{&#10;   "integrationId": "MDM-MOV-5002334-1",&#10;   "svas":[&#10;      {&#10;         "action": "DELETE",&#10;         "idInstanceJSC": "PKGID3725606_TS1726668154462"&#10;      }&#10;   ]&#10;}]' mediaType="application/json" />
				<munit:attributes value='#[{ &#10;	"attributes": { &#10;		"headers": { &#10;			"origenTransaccion": "salesforce-xapi-services" &#10;		}&#10;	}&#10;}]' />
			</munit:set-event>
			<flow-ref doc:name="Flow-ref to post:\v1\sva:application\json:service-papi-services-config" doc:id="5f9b77de-dbec-436f-91c9-002cc2a682a7" name="post:\v1\sva:application\json:service-papi-services-config" />
		</munit:execution>
		<munit:validation>
			<munit-tools:assert-that doc:name="Assert that" doc:id="c8086d88-11f5-4d85-bb17-fe254b7ac1f5" expression="#[payload]" is="#[MunitTools::notNullValue()]" />
		</munit:validation>
	</munit:test>
	<munit:test name="post-sva-test-suite-update-pasagigas" doc:id="f5097a79-09e3-4c64-8d61-c4d163fd4e65" description="Test" >
		<munit:behavior >
			<munit-tools:mock-when doc:name="Get token" doc:id="286658db-adfe-4163-96c6-1335125c532a" processor="http:request" >
				<munit-tools:with-attributes >
					<munit-tools:with-attribute whereValue="a0904c22-a3d7-4db1-937f-39c97089e3b8" attributeName="doc:id" />
				</munit-tools:with-attributes>
				<munit-tools:then-return >
					<munit-tools:payload value='#[output application/json --- {&#10;  "accessToken": "eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzI1NiJ9.eyJhdWQiOiJjYW1wYWlnbnMiLCJzdWIiOiI2aXc4d2tkSjY3ZGdoYWplcnQ5MDJqYWQ5blJFYWlkaGZvciIsImlzcyI6IiIsImV4cCI6MTcwODQ1MjMyNX0.ve9-4YF96RQXBjcZ42z3lr1rYPdgUgbm-FAflIDheRw",&#10;  "tokenType": "Bearer",&#10;  "ipOrigen": "0.0.0.0",&#10;  "expiresIn": "2024-02-07T20:00:00.000Z"&#10;}]' mediaType="application/json" />
				</munit-tools:then-return>
			</munit-tools:mock-when>
			<munit-tools:mock-when doc:name="Get subscription" doc:id="f5772c80-aedf-4fd3-a373-b77dd73019a3" processor="http:request" >
				<munit-tools:with-attributes >
					<munit-tools:with-attribute whereValue="Get subscription" attributeName="doc:name" />
					<munit-tools:with-attribute whereValue="2a6f3410-1023-471f-a692-c18b2850a358" attributeName="doc:id" />
				</munit-tools:with-attributes>
				<munit-tools:then-return >
					<munit-tools:payload value='#[output application/json &#10;--- &#10;{&#10;  "links": [&#10;    {&#10;      "rel": "string",&#10;      "href": "string",&#10;      "hreflang": "string",&#10;      "media": "string",&#10;      "title": "string",&#10;      "type": "string",&#10;      "deprecation": "string",&#10;      "profile": "string",&#10;      "name": "string"&#10;    }&#10;  ],&#10;  "content": [&#10;    {&#10;      "id": "1234",&#10;      "name": "Name",&#10;      "domain": "string",&#10;      "status": "PRE_ACTIVE",&#10;      "networkStatus": "PRE_ACTIVE",&#10;      "type": "RETAIL",&#10;      "portabilityStatus": "NO_PORTABILITY",&#10;      "billingType": "PREPAY",&#10;      "creationDate": "2022-04-20T10:13:15.686Z",&#10;      "firstActivationDate": "2022-04-20T10:13:15.686Z",&#10;      "terminationDate": "2022-04-20T10:13:15.686Z",&#10;      "balance": 15.45,&#10;      "balanceExpirationDate": "2022-04-20T10:13:15.686Z",&#10;      "lastTrafficDate": "2022-04-20T10:13:15.686Z",&#10;      "externalName": "Prepay Mobile",&#10;      "language": "en_US",&#10;      "ntwID": "555112",&#10;      "publicIdentity": "555112",&#10;      "externalID": "555112",      &#10;      "subscriber": {&#10;        "id": "1234",&#10;        "name": "Name",&#10;        "links": [&#10;          {&#10;            "rel": "string",&#10;            "href": "string",&#10;            "hreflang": "string",&#10;            "media": "string",&#10;            "title": "string",&#10;            "type": "string",&#10;            "deprecation": "string",&#10;            "profile": "string",&#10;            "name": "string"&#10;          }&#10;        ]      &#10;      },&#10;      "lastUpdate": "2022-04-20T10:13:15.686Z",&#10;      "links": [&#10;        {&#10;          "rel": "string",&#10;          "href": "string",&#10;          "hreflang": "string",&#10;          "media": "string",&#10;          "title": "string",&#10;          "type": "string",&#10;          "deprecation": "string",&#10;          "profile": "string",&#10;          "name": "string"&#10;        }&#10;      ]&#10;    }&#10;  ],&#10;  "page": {&#10;    "size": 0,&#10;    "totalElements": 0,&#10;    "totalPages": 0,&#10;    "number": 0&#10;  }&#10;}]' mediaType="application/json" />
				</munit-tools:then-return>
			</munit-tools:mock-when>
			<munit-tools:mock-when doc:name="Mock Get PKGI with SID by status" doc:id="0c76cef9-e110-4fbe-bfc3-255f11b0c8b1" processor="http:request" >
				<munit-tools:with-attributes >
					<munit-tools:with-attribute whereValue="74f4f955-51e4-495d-ab84-bfb840a4fafe" attributeName="doc:id" />
				</munit-tools:with-attributes>
				<munit-tools:then-return >
					<munit-tools:payload value='#[output application/json&#10;---&#10;{&#10;	"links": [&#10;		{&#10;			"rel": "self",&#10;			"href": "http://10.0.255.32/bssrest/v1/pkgi?subscription=SID2767408_TS1741280509210_0&amp;page=0&amp;size=10"&#10;		}&#10;	],&#10;	"content": [&#10;		{&#10;			"id": "PKGID6255085_TS1741280509370",&#10;			"provisioningDate": "2025-03-06T12:01:52.000-05:00",&#10;			"applicationDate": "2025-03-06T12:01:52.000-05:00",&#10;			"billingIgnore": false,&#10;			"contractStartDate": "2025-03-06T00:00:00.000-05:00",&#10;			"status": "ACTIVE",&#10;			"packageType": "INITIAL",&#10;			"pkg": {&#10;				"id": "CONTR0003419221",&#10;				"links": [&#10;					{&#10;						"rel": "getPackage",&#10;						"href": "http://10.0.255.32/bssrest/v1/package/CONTR0003419221"&#10;					}&#10;				]&#10;			},&#10;			"salesData": {&#10;				"salesChannel": "OWN_CALLCENTER"&#10;			},&#10;			"isVisible": true,&#10;			"prices": {&#10;				"activationPrice": {&#10;					"amount": 0.0&#10;				},&#10;				"price": {&#10;					"amount": 0.0&#10;				},&#10;				"renewalPrice": {&#10;					"amount": 0.0&#10;				},&#10;				"wholeSalePrice": {&#10;					"amount": 0.0&#10;				}&#10;			},&#10;			"isTariff": false,&#10;			"bonuses": [&#10;				{&#10;					"id": "26601289",&#10;					"links": [&#10;						{&#10;							"rel": "getDppi",&#10;							"href": "http://10.0.255.32/bssrest/v1/dppi/26601289"&#10;						}&#10;					]&#10;				},&#10;				{&#10;					"id": "26601292",&#10;					"links": [&#10;						{&#10;							"rel": "getDppi",&#10;							"href": "http://10.0.255.32/bssrest/v1/dppi/26601292"&#10;						}&#10;					]&#10;				},&#10;				{&#10;					"id": "26601295",&#10;					"links": [&#10;						{&#10;							"rel": "getDppi",&#10;							"href": "http://10.0.255.32/bssrest/v1/dppi/26601295"&#10;						}&#10;					]&#10;				},&#10;				{&#10;					"id": "26601298",&#10;					"links": [&#10;						{&#10;							"rel": "getDppi",&#10;							"href": "http://10.0.255.32/bssrest/v1/dppi/26601298"&#10;						}&#10;					]&#10;				}&#10;			],&#10;			"mpps": [],&#10;			"packs": [],&#10;			"msisdns": [&#10;				{&#10;					"id": "3058180669",&#10;					"links": [&#10;						{&#10;							"rel": "getMsisdn",&#10;							"href": "http://10.0.255.32/bssrest/v1/msisdn/3058180669"&#10;						}&#10;					]&#10;				}&#10;			],&#10;			"terminals": [],&#10;			"sims": [&#10;				{&#10;					"id": "89571871150031781308",&#10;					"links": [&#10;						{&#10;							"rel": "getSim",&#10;							"href": "http://10.0.255.32/bssrest/v1/sim/89571871150031781308"&#10;						}&#10;					]&#10;				}&#10;			],&#10;			"tariffPackageIElements": [],&#10;			"subscription": {&#10;				"id": "SID2767408_TS1741280509210_0",&#10;				"links": [&#10;					{&#10;						"rel": "getSubscription",&#10;						"href": "http://10.0.255.32/bssrest/v1/subscription/SID2767408_TS1741280509210_0"&#10;					}&#10;				]&#10;			},&#10;			"contractStartDay": "2025-03-06",&#10;			"tariffPackageI": [],&#10;			"links": []&#10;		},&#10;		{&#10;			"id": "PKGID6255202_TS1741282661334",&#10;			"cancellationDate": "2025-03-06T12:44:16.000-05:00",&#10;			"provisioningDate": "2025-03-06T12:37:42.000-05:00",&#10;			"applicationDate": "2025-03-06T12:37:42.000-05:00",&#10;			"billingIgnore": false,&#10;			"contractStartDate": "2025-03-06T00:00:00.000-05:00",&#10;			"contractEndDate": "2025-03-06T00:00:00.000-05:00",&#10;			"status": "DELETED",&#10;			"packageType": "CHANGEPKG",&#10;			"pkg": {&#10;				"id": "D66354",&#10;				"links": [&#10;					{&#10;						"rel": "getPackage",&#10;						"href": "http://10.0.255.32/bssrest/v1/package/D66354"&#10;					}&#10;				]&#10;			},&#10;			"salesData": {&#10;				"salesChannel": "OWN_CALLCENTER"&#10;			},&#10;			"isVisible": true,&#10;			"renewable": true,&#10;			"prices": {&#10;				"activationPrice": {&#10;					"amount": 0.0&#10;				},&#10;				"price": {&#10;					"amount": 0.0&#10;				},&#10;				"renewalPrice": {&#10;					"amount": 0.0&#10;				},&#10;				"wholeSalePrice": {&#10;					"amount": 0.0&#10;				}&#10;			},&#10;			"isTariff": false,&#10;			"bonuses": [&#10;				{&#10;					"id": "26601655",&#10;					"links": [&#10;						{&#10;							"rel": "getDppi",&#10;							"href": "http://10.0.255.32/bssrest/v1/dppi/26601655"&#10;						}&#10;					]&#10;				}&#10;			],&#10;			"mpps": [],&#10;			"packs": [],&#10;			"msisdns": [],&#10;			"terminals": [],&#10;			"sims": [],&#10;			"tariffPackageIElements": [],&#10;			"subscription": {&#10;				"id": "SID2767408_TS1741280509210_0",&#10;				"links": [&#10;					{&#10;						"rel": "getSubscription",&#10;						"href": "http://10.0.255.32/bssrest/v1/subscription/SID2767408_TS1741280509210_0"&#10;					}&#10;				]&#10;			},&#10;			"contractStartDay": "2025-03-06",&#10;			"contractEndDay": "2025-03-06",&#10;			"tariffPackageI": [],&#10;			"links": []&#10;		},&#10;		{&#10;			"id": "PKGID6258025_TS1741296963137",&#10;			"provisioningDate": "2025-03-06T16:36:04.000-05:00",&#10;			"applicationDate": "2025-03-06T16:36:04.000-05:00",&#10;			"billingIgnore": false,&#10;			"contractStartDate": "2025-03-06T00:00:00.000-05:00",&#10;			"status": "ACTIVE",&#10;			"packageType": "CHANGEPKG",&#10;			"pkg": {&#10;				"id": "D66354",&#10;				"links": [&#10;					{&#10;						"rel": "getPackage",&#10;						"href": "http://10.0.255.32/bssrest/v1/package/D66354"&#10;					}&#10;				]&#10;			},&#10;			"salesData": {&#10;				"salesChannel": "OWN_CALLCENTER"&#10;			},&#10;			"isVisible": true,&#10;			"renewable": true,&#10;			"prices": {&#10;				"activationPrice": {&#10;					"amount": 0.0&#10;				},&#10;				"price": {&#10;					"amount": 0.0&#10;				},&#10;				"renewalPrice": {&#10;					"amount": 0.0&#10;				},&#10;				"wholeSalePrice": {&#10;					"amount": 0.0&#10;				}&#10;			},&#10;			"isTariff": false,&#10;			"bonuses": [&#10;				{&#10;					"id": "26606680",&#10;					"links": [&#10;						{&#10;							"rel": "getDppi",&#10;							"href": "http://10.0.255.32/bssrest/v1/dppi/26606680"&#10;						}&#10;					]&#10;				}&#10;			],&#10;			"mpps": [],&#10;			"packs": [],&#10;			"msisdns": [],&#10;			"terminals": [],&#10;			"sims": [],&#10;			"tariffPackageIElements": [],&#10;			"subscription": {&#10;				"id": "SID2767408_TS1741280509210_0",&#10;				"links": [&#10;					{&#10;						"rel": "getSubscription",&#10;						"href": "http://10.0.255.32/bssrest/v1/subscription/SID2767408_TS1741280509210_0"&#10;					}&#10;				]&#10;			},&#10;			"contractStartDay": "2025-03-06",&#10;			"tariffPackageI": [],&#10;			"links": []&#10;		},&#10;		{&#10;			"id": "PKGID6258034_TS1741297099044",&#10;			"provisioningDate": "2025-03-06T16:38:20.000-05:00",&#10;			"applicationDate": "2025-03-06T16:38:20.000-05:00",&#10;			"billingIgnore": false,&#10;			"contractStartDate": "2025-03-06T00:00:00.000-05:00",&#10;			"status": "ACTIVE",&#10;			"packageType": "CHANGEPKG",&#10;			"pkg": {&#10;				"id": "D66354",&#10;				"links": [&#10;					{&#10;						"rel": "getPackage",&#10;						"href": "http://10.0.255.32/bssrest/v1/package/D66354"&#10;					}&#10;				]&#10;			},&#10;			"salesData": {&#10;				"salesChannel": "OWN_CALLCENTER"&#10;			},&#10;			"isVisible": true,&#10;			"renewable": true,&#10;			"prices": {&#10;				"activationPrice": {&#10;					"amount": 0.0&#10;				},&#10;				"price": {&#10;					"amount": 0.0&#10;				},&#10;				"renewalPrice": {&#10;					"amount": 0.0&#10;				},&#10;				"wholeSalePrice": {&#10;					"amount": 0.0&#10;				}&#10;			},&#10;			"isTariff": false,&#10;			"bonuses": [&#10;				{&#10;					"id": "26606704",&#10;					"links": [&#10;						{&#10;							"rel": "getDppi",&#10;							"href": "http://10.0.255.32/bssrest/v1/dppi/26606704"&#10;						}&#10;					]&#10;				}&#10;			],&#10;			"mpps": [],&#10;			"packs": [],&#10;			"msisdns": [],&#10;			"terminals": [],&#10;			"sims": [],&#10;			"tariffPackageIElements": [],&#10;			"subscription": {&#10;				"id": "SID2767408_TS1741280509210_0",&#10;				"links": [&#10;					{&#10;						"rel": "getSubscription",&#10;						"href": "http://10.0.255.32/bssrest/v1/subscription/SID2767408_TS1741280509210_0"&#10;					}&#10;				]&#10;			},&#10;			"contractStartDay": "2025-03-06",&#10;			"tariffPackageI": [],&#10;			"links": []&#10;		}&#10;	],&#10;	"page": {&#10;		"size": 10,&#10;		"totalElements": 4,&#10;		"totalPages": 1,&#10;		"number": 0&#10;	}&#10;}]' mediaType="application/json" />
				</munit-tools:then-return>
			</munit-tools:mock-when>
			<munit-tools:mock-when doc:name="Mock Patch pkgid with status" doc:id="b899e6f6-1916-431a-b544-eb596cbd4795" processor="http:request" >
				<munit-tools:with-attributes >
					<munit-tools:with-attribute whereValue="021ec9cd-1eff-4da8-b7b9-b0e5df9b3f0f" attributeName="doc:id" />
				</munit-tools:with-attributes>
				<munit-tools:then-return >
					<munit-tools:payload value="#[output application/json&#10;---&#10;{}]" />
				</munit-tools:then-return>
			</munit-tools:mock-when>
		</munit:behavior>
		<munit:execution >
			<munit:set-event doc:name="Set Event" doc:id="e463ec8e-9680-452e-9578-409b56131f33" >
				<munit:payload value='#[output application/json &#10;--- &#10;{&#10;   "integrationId": "MDM-PLTE-022250-1",&#10;   "svas":[&#10;      {&#10;         "action": "MODIFY_PASAGIGAS",&#10;         "idInstanceJSC": "D66354"&#10;      }&#10;   ]&#10;}]' mediaType="application/json" />
				<munit:attributes value='#[{ &#10;	"attributes": { &#10;		"headers": { &#10;			"origenTransaccion": "salesforce-xapi-services" &#10;		}&#10;	}&#10;}]' />
			</munit:set-event>
			<flow-ref doc:name="Flow-ref to post:\v1\sva:application\json:service-papi-services-config" doc:id="c26437b0-5357-4698-a6f9-058a67fa85a6" name="post:\v1\sva:application\json:service-papi-services-config" />
		</munit:execution>
		<munit:validation >
			<munit-tools:assert-that doc:name="Assert that" doc:id="121d0355-3af8-4d6b-9256-a619d1302aaa" expression="#[payload]" is="#[MunitTools::notNullValue()]" />
		</munit:validation>
	</munit:test>
	<munit:test name="post-sva-test-suite-update-pasagigas-missmatch" doc:id="7459e721-d0b0-4b91-8238-98ce375b7894" description="Test" >
		<munit:behavior >
			<munit-tools:mock-when doc:name="Get token" doc:id="ef72b54e-8a6c-4cdd-88df-f8631ff4882d" processor="http:request" >
				<munit-tools:with-attributes >
					<munit-tools:with-attribute whereValue="a0904c22-a3d7-4db1-937f-39c97089e3b8" attributeName="doc:id" />
				</munit-tools:with-attributes>
				<munit-tools:then-return >
					<munit-tools:payload value='#[output application/json --- {&#10;  "accessToken": "eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzI1NiJ9.eyJhdWQiOiJjYW1wYWlnbnMiLCJzdWIiOiI2aXc4d2tkSjY3ZGdoYWplcnQ5MDJqYWQ5blJFYWlkaGZvciIsImlzcyI6IiIsImV4cCI6MTcwODQ1MjMyNX0.ve9-4YF96RQXBjcZ42z3lr1rYPdgUgbm-FAflIDheRw",&#10;  "tokenType": "Bearer",&#10;  "ipOrigen": "0.0.0.0",&#10;  "expiresIn": "2024-02-07T20:00:00.000Z"&#10;}]' mediaType="application/json" />
				</munit-tools:then-return>
			</munit-tools:mock-when>
			<munit-tools:mock-when doc:name="Get subscription" doc:id="1d9d09ef-743b-4794-b360-8effc6a53e8f" processor="http:request" >
				<munit-tools:with-attributes >
					<munit-tools:with-attribute whereValue="Get subscription" attributeName="doc:name" />
					<munit-tools:with-attribute whereValue="2a6f3410-1023-471f-a692-c18b2850a358" attributeName="doc:id" />
				</munit-tools:with-attributes>
				<munit-tools:then-return >
					<munit-tools:payload value='#[output application/json &#10;--- &#10;{&#10;  "links": [&#10;    {&#10;      "rel": "string",&#10;      "href": "string",&#10;      "hreflang": "string",&#10;      "media": "string",&#10;      "title": "string",&#10;      "type": "string",&#10;      "deprecation": "string",&#10;      "profile": "string",&#10;      "name": "string"&#10;    }&#10;  ],&#10;  "content": [&#10;    {&#10;      "id": "1234",&#10;      "name": "Name",&#10;      "domain": "string",&#10;      "status": "PRE_ACTIVE",&#10;      "networkStatus": "PRE_ACTIVE",&#10;      "type": "RETAIL",&#10;      "portabilityStatus": "NO_PORTABILITY",&#10;      "billingType": "PREPAY",&#10;      "creationDate": "2022-04-20T10:13:15.686Z",&#10;      "firstActivationDate": "2022-04-20T10:13:15.686Z",&#10;      "terminationDate": "2022-04-20T10:13:15.686Z",&#10;      "balance": 15.45,&#10;      "balanceExpirationDate": "2022-04-20T10:13:15.686Z",&#10;      "lastTrafficDate": "2022-04-20T10:13:15.686Z",&#10;      "externalName": "Prepay Mobile",&#10;      "language": "en_US",&#10;      "ntwID": "555112",&#10;      "publicIdentity": "555112",&#10;      "externalID": "555112",      &#10;      "subscriber": {&#10;        "id": "1234",&#10;        "name": "Name",&#10;        "links": [&#10;          {&#10;            "rel": "string",&#10;            "href": "string",&#10;            "hreflang": "string",&#10;            "media": "string",&#10;            "title": "string",&#10;            "type": "string",&#10;            "deprecation": "string",&#10;            "profile": "string",&#10;            "name": "string"&#10;          }&#10;        ]      &#10;      },&#10;      "lastUpdate": "2022-04-20T10:13:15.686Z",&#10;      "links": [&#10;        {&#10;          "rel": "string",&#10;          "href": "string",&#10;          "hreflang": "string",&#10;          "media": "string",&#10;          "title": "string",&#10;          "type": "string",&#10;          "deprecation": "string",&#10;          "profile": "string",&#10;          "name": "string"&#10;        }&#10;      ]&#10;    }&#10;  ],&#10;  "page": {&#10;    "size": 0,&#10;    "totalElements": 0,&#10;    "totalPages": 0,&#10;    "number": 0&#10;  }&#10;}]' mediaType="application/json" />
				</munit-tools:then-return>
			</munit-tools:mock-when>
			<munit-tools:mock-when doc:name="Mock Get PKGI with SID by status" doc:id="01f17da3-1c22-49f5-ad4a-48b0855d01cb" processor="http:request" >
				<munit-tools:with-attributes >
					<munit-tools:with-attribute whereValue="74f4f955-51e4-495d-ab84-bfb840a4fafe" attributeName="doc:id" />
				</munit-tools:with-attributes>
				<munit-tools:then-return >
					<munit-tools:payload value='#[output application/json&#10;---&#10;{ &#10;  "content": [&#10;    {&#10;      "id": "1234",&#10;      "name": "Name",&#10;      "cancellationDate": "2022-04-20T10:13:15.686Z",&#10;      "provisioningDate": "2022-04-20T10:13:15.686Z",&#10;      "applicationDate": "2022-04-20T10:13:15.686Z",&#10;      "billingIgnore": true,&#10;      "status": "FREE",&#10;      "packageType": "INITIAL",&#10;      "pkg": {&#10;        "id": "1234",&#10;        "name": "Name",&#10;        "links": [&#10;          {&#10;            "rel": "string",&#10;            "href": "string",&#10;            "hreflang": "string",&#10;            "media": "string",&#10;            "title": "string",&#10;            "type": "string",&#10;            "deprecation": "string",&#10;            "profile": "string",&#10;            "name": "string"&#10;          }&#10;        ]&#10;      },&#10;      "subscription": {&#10;        "id": "1234",&#10;        "name": "Name",&#10;        "links": [&#10;          {&#10;            "rel": "string",&#10;            "href": "string",&#10;            "hreflang": "string",&#10;            "media": "string",&#10;            "title": "string",&#10;            "type": "string",&#10;            "deprecation": "string",&#10;            "profile": "string",&#10;            "name": "string"&#10;          }&#10;        ]&#10;      }&#10;    }&#10;  ]&#10;}]' mediaType="application/json" />
				</munit-tools:then-return>
			</munit-tools:mock-when>
			<munit-tools:mock-when doc:name="Mock Patch pkgid with status" doc:id="3ee0f5bf-7b09-4475-b64a-af160f73f3ac" processor="http:request" >
				<munit-tools:with-attributes >
					<munit-tools:with-attribute whereValue="021ec9cd-1eff-4da8-b7b9-b0e5df9b3f0f" attributeName="doc:id" />
				</munit-tools:with-attributes>
				<munit-tools:then-return >
					<munit-tools:payload value="#[output application/json&#10;---&#10;{}]" />
				</munit-tools:then-return>
			</munit-tools:mock-when>
		</munit:behavior>
		<munit:execution >
			<munit:set-event doc:name="Set Event" doc:id="1a53d8a7-a8c4-4f8c-9379-12e34c9b1b29" >
				<munit:payload value='#[output application/json &#10;--- &#10;{&#10;   "integrationId": "MDM-PLTE-022250-1",&#10;   "svas":[&#10;      {&#10;         "action": "MODIFY_PASAGIGAS",&#10;         "idInstanceJSC": "D66354"&#10;      }&#10;   ]&#10;}]' mediaType="application/json" />
				<munit:attributes value='#[{ &#10;	"attributes": { &#10;		"headers": { &#10;			"origenTransaccion": "salesforce-xapi-services" &#10;		}&#10;	}&#10;}]' />
			</munit:set-event>
			<flow-ref doc:name="Flow-ref to post:\v1\sva:application\json:service-papi-services-config" doc:id="9abe2a2a-a54c-4a10-a6ea-32f3b57233f6" name="post:\v1\sva:application\json:service-papi-services-config" />
		</munit:execution>
		<munit:validation >
			<munit-tools:assert-that doc:name="Assert that" doc:id="236ba0a9-3580-41c6-9fca-6918b8e0871f" expression="#[payload]" is="#[MunitTools::notNullValue()]" />
		</munit:validation>
	</munit:test>
	<munit:test name="post-sva-test-suite-add-promocion-portado" doc:id="bfee723d-f23b-482b-bf4a-e92995a5e505" >
		<munit:behavior >
			<munit-tools:mock-when doc:name="Get token" doc:id="004df29b-6114-4c3c-8a8c-caef14203ec3" processor="http:request" >
				<munit-tools:with-attributes >
					<munit-tools:with-attribute whereValue="a0904c22-a3d7-4db1-937f-39c97089e3b8" attributeName="doc:id" />
				</munit-tools:with-attributes>
				<munit-tools:then-return >
					<munit-tools:payload value='#[output application/json --- {&#10;  "accessToken": "eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzI1NiJ9.eyJhdWQiOiJjYW1wYWlnbnMiLCJzdWIiOiI2aXc4d2tkSjY3ZGdoYWplcnQ5MDJqYWQ5blJFYWlkaGZvciIsImlzcyI6IiIsImV4cCI6MTcwODQ1MjMyNX0.ve9-4YF96RQXBjcZ42z3lr1rYPdgUgbm-FAflIDheRw",&#10;  "tokenType": "Bearer",&#10;  "ipOrigen": "0.0.0.0",&#10;  "expiresIn": "2024-02-07T20:00:00.000Z"&#10;}]' mediaType="application/json" />
				</munit-tools:then-return>
			</munit-tools:mock-when>
			<munit-tools:mock-when doc:name="Get subscription" doc:id="fe817eea-f8cc-4904-a6ac-6a92b781e0a6" processor="http:request" >
				<munit-tools:with-attributes >
					<munit-tools:with-attribute whereValue="Get subscription" attributeName="doc:name" />
					<munit-tools:with-attribute whereValue="2a6f3410-1023-471f-a692-c18b2850a358" attributeName="doc:id" />
				</munit-tools:with-attributes>
				<munit-tools:then-return >
					<munit-tools:payload value='#[output application/json &#10;--- &#10;{&#10;  "links": [&#10;    {&#10;      "rel": "string",&#10;      "href": "string",&#10;      "hreflang": "string",&#10;      "media": "string",&#10;      "title": "string",&#10;      "type": "string",&#10;      "deprecation": "string",&#10;      "profile": "string",&#10;      "name": "string"&#10;    }&#10;  ],&#10;  "content": [&#10;    {&#10;      "id": "1234",&#10;      "name": "Name",&#10;      "domain": "string",&#10;      "status": "PRE_ACTIVE",&#10;      "networkStatus": "PRE_ACTIVE",&#10;      "type": "RETAIL",&#10;      "portabilityStatus": "NO_PORTABILITY",&#10;      "billingType": "PREPAY",&#10;      "creationDate": "2022-04-20T10:13:15.686Z",&#10;      "firstActivationDate": "2022-04-20T10:13:15.686Z",&#10;      "terminationDate": "2022-04-20T10:13:15.686Z",&#10;      "balance": 15.45,&#10;      "balanceExpirationDate": "2022-04-20T10:13:15.686Z",&#10;      "lastTrafficDate": "2022-04-20T10:13:15.686Z",&#10;      "externalName": "Prepay Mobile",&#10;      "language": "en_US",&#10;      "ntwID": "555112",&#10;      "publicIdentity": "555112",&#10;      "externalID": "555112",      &#10;      "subscriber": {&#10;        "id": "1234",&#10;        "name": "Name",&#10;        "links": [&#10;          {&#10;            "rel": "string",&#10;            "href": "string",&#10;            "hreflang": "string",&#10;            "media": "string",&#10;            "title": "string",&#10;            "type": "string",&#10;            "deprecation": "string",&#10;            "profile": "string",&#10;            "name": "string"&#10;          }&#10;        ]      &#10;      },&#10;      "lastUpdate": "2022-04-20T10:13:15.686Z",&#10;      "links": [&#10;        {&#10;          "rel": "string",&#10;          "href": "string",&#10;          "hreflang": "string",&#10;          "media": "string",&#10;          "title": "string",&#10;          "type": "string",&#10;          "deprecation": "string",&#10;          "profile": "string",&#10;          "name": "string"&#10;        }&#10;      ]&#10;    }&#10;  ],&#10;  "page": {&#10;    "size": 0,&#10;    "totalElements": 0,&#10;    "totalPages": 0,&#10;    "number": 0&#10;  }&#10;}]' mediaType="application/json" />
				</munit-tools:then-return>
			</munit-tools:mock-when>
			<munit-tools:mock-when doc:name="Retrieve promXpkg" doc:id="b49a12fe-2054-4356-ae00-29ddce8f2cef" processor="os:retrieve" >
				<munit-tools:with-attributes >
					<munit-tools:with-attribute whereValue="Retrieve promXpkg" attributeName="doc:name" />
					<munit-tools:with-attribute whereValue="8b657bea-bd7b-48cb-832f-d1bc6f2a885b" attributeName="doc:id" />
				</munit-tools:with-attributes>
				<munit-tools:then-return >
					<munit-tools:variables >
						<munit-tools:variable key="promXpkg" value="#[output application/json --- readUrl('classpath://svaPromociones\promXpkg.dwl')]" mediaType="application/json" />
					</munit-tools:variables>
				</munit-tools:then-return>
			</munit-tools:mock-when>
			<munit-tools:mock-when doc:name="Request to get active service" doc:id="54629d97-bf24-49ee-be62-cdaadef062ea" processor="http:request">
				<munit-tools:with-attributes >
					<munit-tools:with-attribute whereValue="Request to get active service" attributeName="doc:name" />
					<munit-tools:with-attribute whereValue="f2b9187a-e4cf-4692-ae9f-b64e80f8afcb" attributeName="doc:id" />
				</munit-tools:with-attributes>
				<munit-tools:then-return >
					<munit-tools:payload value='#[output application/json &#10;--- &#10;[&#10;	{&#10;	  "_id": {&#10;	    "\$oid": "5a3baa28080e9b2280b20eb8"&#10;	  },&#10;	  "Tipo_Documento": "CC",&#10;	  "Numero_Identificacion": "609919093",&#10;	  "Cuenta_Facturacion": "12051048911",&#10;	  "Tecnologia": "FO",&#10;	  "Usuario_Creador": "0-1",&#10;	  "Usuario_Modificador": "0-1",&#10;	  "Direccion_Instalacion": "AC 134 10A 48 AP 703",&#10;	  "Departamento": "BOGOTA",&#10;	  "Ciudad": "BOGOTA D.C.",&#10;	  "Barrio": "008513",&#10;	  "Localidad": "CC-38281206",&#10;	  "Estrato": "5",&#10;	  "Pais": "Colombia",&#10;	  "Id_Orden_Relacionada": "",&#10;	  "Id_Activo_Padre": "1-EJO381P",&#10;	  "Empaquetado": "DOBLE 20M",&#10;	  "Tipo_Producto": "raiz",&#10;	  "Codigo_Producto_Servicio": "6DQS-BCVPU",&#10;	  "Codigo_Servicio": "1-3GYCD",&#10;	  "Producto": "VOIP",&#10;	  "Servicio": "RVC VOZ FIJO MOVIL",&#10;	  "Oferta_Plan": "",&#10;	  "Valor_Oferta": "0",&#10;	  "Numero_Conexion": "6019980647",&#10;	  "Duracion_Servicio": "",&#10;	  "Flag_Facturable": "S",&#10;	  "Integration_Id": "1-EIOHS9G",&#10;	  "Id_Caracterizacion_Prom": "",&#10;	  "Fecha_Creacion": {&#10;	    "\$date": "2015-09-30T18:51:09.000Z"&#10;	  },&#10;	  "Fecha_Actualizacion": {&#10;	    "\$date": "2023-07-07T00:00:00.000Z"&#10;	  },&#10;	  "Fecha_Activacion": {&#10;	    "\$date": "2025-03-30T05:00:00.000Z"&#10;	  },&#10;	  "Fecha_Inactivacion": null,&#10;	  "Modalidad_Servicio": "",&#10;	  "Flag_Convergencia": "",&#10;	  "Numero_Anterior": "",&#10;	  "Clausula_Permanencia": "",&#10;	  "Id_Activo_Sistema_Origen": "1-EJO383G",&#10;	  "Id_Activo_Raiz": "1-EJO3813",&#10;	  "Id_Cuenta_Servicio_Origen": "1-EIOECK5",&#10;	  "Sistema_Origen": "FIBRA",&#10;	  "Ruta": "ERROR-LINE",&#10;	  "Caracteristica_Servicio": null,&#10;	  "Estado_Servicio": null,&#10;	  "Promociones_Servicio": null,&#10;	  "Descuento_Servicio": null,&#10;	  "Tipo_Linea": "",&#10;	  "Segmento_Servicio": "",&#10;	  "Id_Servicio_Salesforce": "",&#10;	  "Direccion_Latitud": "4,714130",&#10;	  "Direccion_Longitud": "-74,036005",&#10;	  "Direccion_GIS": "612802304577911051",&#10;	  "Molecula": "FTO04",&#10;	  "Distrito": "TOBERIN",&#10;	  "Estado_Pago": "1",&#10;	  "Estado_Fraude": "",&#10;	  "Estado_Robo": "",&#10;	  "Estado_Perdida": "",&#10;	  "Estado_Voluntaria": "1",&#10;	  "Estado_Robo_Perdida": "",&#10;	  "Bundles": null,&#10;	  "Estado": "Suspendido"&#10;	}&#10;]]' mediaType="application/json" />
				</munit-tools:then-return>
			</munit-tools:mock-when>
			<munit-tools:mock-when doc:name="Request to get order by fact account" doc:id="2a55dc93-208f-4677-b648-6edd3af00827" processor="http:request">
				<munit-tools:with-attributes>
					<munit-tools:with-attribute whereValue="Request to get order by fact account" attributeName="doc:name" />
					<munit-tools:with-attribute whereValue="e6fabac3-744d-4058-a266-4bd228e2f728" attributeName="doc:id" />
				</munit-tools:with-attributes>
				<munit-tools:then-return >
					<munit-tools:payload value='#[output application/json &#10;--- &#10;[{&#10;  "_id": {&#10;    "\$oid": "5f49837d06c0d414b05244ed"&#10;  },&#10;  "Tipo_Documento": "NIT",&#10;  "Numero_Identificacion": "800066572",&#10;  "CUN": "4347200000131301",&#10;  "Id_Distribuidor": 2110,&#10;  "Tipo_Orden": "VENTA LTE",&#10;  "Subtipo_Orden": "VENTA LTE NCP",&#10;  "Estado_Orden": "COMPLETADA",&#10;  "Causal_Estado_Orden": null,&#10;  "Numero_Orden": "MDM-POR-151033",&#10;  "Fecha_Creacion_Orden": {&#10;    "\$date": "2020-08-28T22:21:50.165Z"&#10;  },&#10;  "Usuario_Creador": "michamaa",&#10;  "Usuario_Modificador": "michamaa",&#10;  "Usuario_Vendedor": null,&#10;  "Fecha_Actualizacion_Orden": {&#10;    "\$date": "2020-08-28T22:33:27.892Z"&#10;  },&#10;  "Canal": "DISTRIBUIDOR",&#10;  "Subcanal": null,&#10;  "Causal_Retiro_Cliente": null,&#10;  "Forma_Entrega_Contrato": null,&#10;  "Fecha_Inicio_Contrato": null,&#10;  "Id_Orden_Sistema_Origen": "MDM-POR-151033",&#10;  "Sistema_Origen": "MDM",&#10;  "num_agrupacion": 2647,&#10;  "tipo_entrega_factura": "EMAIL",&#10;  "tipo_plan": "Postpago",&#10;  "Flag_Envio_Recibo": true,&#10;  "codigo_operador": "00003",&#10;  "celular_portabilidad": "3230009090",&#10;  "tipo_plan_donante": "Prepago",&#10;  "Caracteristicas_Orden": [&#10;    {&#10;      "Caracteristica": "Autorizo_Centrales_Riesgo",&#10;      "Valor": "False",&#10;      "Accion": "Autorizo_Centrales_Riesgo",&#10;      "actualizacion_extractor": "1"&#10;    },&#10;    {&#10;      "Caracteristica": "integration_id",&#10;      "Valor": "MDM-POR-151033",&#10;      "Accion": "",&#10;      "actualizacion_extractor": "1"&#10;    },&#10;    {&#10;      "Caracteristica": "Cupo Empresa",&#10;      "Valor": "1000000",&#10;      "Accion": "",&#10;      "actualizacion_extractor": "1"&#10;    },&#10;    {&#10;      "Caracteristica": "SIMPreactiva",&#10;      "Valor": "",&#10;      "Accion": null,&#10;      "actualizacion_extractor": "1"&#10;    },&#10;    {&#10;      "Caracteristica": "Anexo de autorizaci坦n consulta y reporte a centrales de riesgo",&#10;      "Valor": "800066572/MDM-POR-151033/Anexo de autorizaci坦n consulta y reporte a centrales de riesgo",&#10;      "Accion": null,&#10;      "actualizacion_extractor": "1"&#10;    },&#10;    {&#10;      "Caracteristica": "AutorizoUsoMismaFirma",&#10;      "Valor": "True",&#10;      "Accion": null,&#10;      "actualizacion_extractor": "1"&#10;    },&#10;    {&#10;      "Caracteristica": "TipoFirma",&#10;      "Valor": "Firma Digital",&#10;      "Accion": null,&#10;      "actualizacion_extractor": "1"&#10;    }&#10;  ],&#10;  "Pago": [&#10;    {&#10;      "Tipo_Recaudo": null,&#10;      "Forma_Pago": "EFECTIVO",&#10;      "Recibo_Pago": "5000002951",&#10;      "Valor_Pagado": "99700",&#10;      "Valor_Facturado": "99700",&#10;      "Valor_Sin_Iva": "99700",&#10;      "Fecha_Pago": {&#10;        "\$date": "2020-08-28T05:00:00.000Z"&#10;      },&#10;      "Banco": null,&#10;      "Canal_Pago": "2110",&#10;      "Fecha_Limite_Pago": null,&#10;      "Numero_Confirmacion": "",&#10;      "Estado": null,&#10;      "Codigo_Respuesta": null,&#10;      "Mensaje_Respuesta": null,&#10;      "pago_online": null,&#10;      "actualizacion_extractor": "1"&#10;    }&#10;  ],&#10;  "Validacion": null,&#10;  "Fase_Orden": [&#10;    {&#10;      "Fase": "ORDEN CREADA",&#10;      "Fecha_Ejecucion": {&#10;        "\$date": "2020-08-28T22:21:49.149Z"&#10;      },&#10;      "Resultado": "",&#10;      "Causal_Fase": "",&#10;      "Usuario_Creo": "michamaa",&#10;      "Estado": "EXITOSO",&#10;      "Detalle_Fase": null,&#10;      "Reintentos": 0,&#10;      "actualizacion_extractor": "1"&#10;    },&#10;    {&#10;      "Fase": "INVENTARIO",&#10;      "Fecha_Ejecucion": {&#10;        "\$date": "2020-08-28T22:23:24.277Z"&#10;      },&#10;      "Resultado": null,&#10;      "Causal_Fase": null,&#10;      "Usuario_Creo": "michamaa",&#10;      "Estado": "EXITOSO",&#10;      "Detalle_Fase": null,&#10;      "Reintentos": 0,&#10;      "actualizacion_extractor": "1"&#10;    },&#10;    {&#10;      "Fase": "RECIBO PAGO",&#10;      "Fecha_Ejecucion": {&#10;        "\$date": "2020-08-28T22:23:59.659Z"&#10;      },&#10;      "Resultado": null,&#10;      "Causal_Fase": null,&#10;      "Usuario_Creo": "michamaa",&#10;      "Estado": "EXITOSO",&#10;      "Detalle_Fase": null,&#10;      "Reintentos": 0,&#10;      "actualizacion_extractor": "1"&#10;    },&#10;    {&#10;      "Fase": "PAGO",&#10;      "Fecha_Ejecucion": {&#10;        "\$date": "2020-08-28T22:23:59.759Z"&#10;      },&#10;      "Resultado": null,&#10;      "Causal_Fase": null,&#10;      "Usuario_Creo": "michamaa",&#10;      "Estado": "EXITOSO",&#10;      "Detalle_Fase": null,&#10;      "Reintentos": 0,&#10;      "actualizacion_extractor": "1"&#10;    },&#10;    {&#10;      "Fase": "PORTACION",&#10;      "Fecha_Ejecucion": {&#10;        "\$date": "2020-08-28T22:24:43.121Z"&#10;      },&#10;      "Resultado": "Fecha Ventana : 20200828000000",&#10;      "Causal_Fase": null,&#10;      "Usuario_Creo": "michamaa",&#10;      "Estado": "APROBADA",&#10;      "Detalle_Fase": null,&#10;      "Reintentos": 0,&#10;      "actualizacion_extractor": "1"&#10;    },&#10;    {&#10;      "Fase": "APROVISIONAMIENTO",&#10;      "Fecha_Ejecucion": {&#10;        "\$date": "2020-08-28T22:31:05.196Z"&#10;      },&#10;      "Resultado": "",&#10;      "Causal_Fase": "",&#10;      "Usuario_Creo": "MDM",&#10;      "Estado": "EXITOSO",&#10;      "Detalle_Fase": null,&#10;      "Reintentos": 0,&#10;      "actualizacion_extractor": "1"&#10;    },&#10;    {&#10;      "Fase": "FACTURACION",&#10;      "Fecha_Ejecucion": {&#10;        "\$date": "2020-08-28T22:33:14.821Z"&#10;      },&#10;      "Resultado": "",&#10;      "Causal_Fase": "",&#10;      "Usuario_Creo": "MDM",&#10;      "Estado": "EXITOSO",&#10;      "Detalle_Fase": null,&#10;      "Reintentos": 0,&#10;      "actualizacion_extractor": "1"&#10;    },&#10;    {&#10;      "Fase": "RMCA",&#10;      "Fecha_Ejecucion": {&#10;        "\$date": "2020-08-28T22:33:18.313Z"&#10;      },&#10;      "Resultado": "",&#10;      "Causal_Fase": "",&#10;      "Usuario_Creo": "MDM",&#10;      "Estado": "EXITOSO",&#10;      "Detalle_Fase": null,&#10;      "Reintentos": 0,&#10;      "actualizacion_extractor": "1"&#10;    },&#10;    {&#10;      "Fase": "COMPLETADO",&#10;      "Fecha_Ejecucion": {&#10;        "\$date": "2020-08-28T22:33:27.892Z"&#10;      },&#10;      "Resultado": "",&#10;      "Causal_Fase": "",&#10;      "Usuario_Creo": "MDM",&#10;      "Estado": "EXITOSO",&#10;      "Detalle_Fase": null,&#10;      "Reintentos": 0,&#10;      "actualizacion_extractor": "1"&#10;    }&#10;  ],&#10;  "Cuenta_Facturacion": "15052851803",&#10;  "Cuenta_Facturacion_Equipo": null,&#10;  "Pago_Anticipado": "SI",&#10;  "Valor_Recaudo": "99700",&#10;  "Reportado_Pago": null,&#10;  "Bundle_activo": null,&#10;  "Bundle_orden": [&#10;    {&#10;      "_id": {&#10;        "\$oid": "5da730837b67fb0464ef3596"&#10;      },&#10;      "id_catalogo": "2647",&#10;      "nombre": "AVANZADO 80GB",&#10;      "fecha_activacion": null,&#10;      "fecha_inactivacion": null,&#10;      "primarios": [&#10;        {&#10;          "_id": {&#10;            "\$oid": "5da731917b67fb0464ef35ad"&#10;          },&#10;          "id_primario": "11111",&#10;          "numero_conexion": null,&#10;          "nombre": "LTE POSPAGO",&#10;          "fecha_activacion": null,&#10;          "fecha_inactivacion": null,&#10;          "caracteristicas_primarios": null,&#10;          "secundarios": [&#10;            {&#10;              "_id": {&#10;                "\$oid": "5da731917b67fb0464ef35ae"&#10;              },&#10;              "id_secundario": "21111100436",&#10;              "nombre": "VOZ ILIMITADA",&#10;              "fecha_activacion": null,&#10;              "fecha_inactivacion": null,&#10;              "caracteristicas_secundario": null&#10;            },&#10;            {&#10;              "_id": {&#10;                "\$oid": "5da731917b67fb0464ef35af"&#10;              },&#10;              "id_secundario": "21111473",&#10;              "nombre": "SMS 100",&#10;              "fecha_activacion": null,&#10;              "fecha_inactivacion": null,&#10;              "caracteristicas_secundario": null&#10;            },&#10;            {&#10;              "_id": {&#10;                "\$oid": "5da731917b67fb0464ef35b0"&#10;              },&#10;              "id_secundario": "21111298",&#10;              "nombre": "DATOS 12 GB 3G/4G",&#10;              "fecha_activacion": null,&#10;              "fecha_inactivacion": null,&#10;              "caracteristicas_secundario": null&#10;            },&#10;            {&#10;              "_id": {&#10;                "\$oid": "5da731917b67fb0464ef35b1"&#10;              },&#10;              "id_secundario": "21111200439",&#10;              "nombre": "DATOS 68 GB EN 4G",&#10;              "fecha_activacion": null,&#10;              "fecha_inactivacion": null,&#10;              "caracteristicas_secundario": null&#10;            },&#10;            {&#10;              "_id": {&#10;                "\$oid": "5da731917b67fb0464ef35b2"&#10;              },&#10;              "id_secundario": "21111300430",&#10;              "nombre": "SVA REDES SOCIALES",&#10;              "fecha_activacion": null,&#10;              "fecha_inactivacion": null,&#10;              "caracteristicas_secundario": null&#10;            },&#10;            {&#10;              "_id": {&#10;                "\$oid": "5da731917b67fb0464ef35b3"&#10;              },&#10;              "id_secundario": "21111300431",&#10;              "nombre": "SVA WHATSAPP VOZ 1000",&#10;              "fecha_activacion": null,&#10;              "fecha_inactivacion": null,&#10;              "caracteristicas_secundario": null&#10;            },&#10;            {&#10;              "_id": {&#10;                "\$oid": "5da731917b67fb0464ef35b4"&#10;              },&#10;              "id_secundario": "21111200432",&#10;              "nombre": "SVA MOVILIDAD",&#10;              "fecha_activacion": null,&#10;              "fecha_inactivacion": null,&#10;              "caracteristicas_secundario": null&#10;            },&#10;            {&#10;              "_id": {&#10;                "\$oid": "5da731917b67fb0464ef35b5"&#10;              },&#10;              "id_secundario": "21111200433",&#10;              "nombre": "SVA OFFICE 365",&#10;              "fecha_activacion": null,&#10;              "fecha_inactivacion": null,&#10;              "caracteristicas_secundario": null&#10;            },&#10;            {&#10;              "_id": {&#10;                "\$oid": "5da731917b67fb0464ef35b6"&#10;              },&#10;              "id_secundario": "21111200434",&#10;              "nombre": "SVA EMAIL 1 GB",&#10;              "fecha_activacion": null,&#10;              "fecha_inactivacion": null,&#10;              "caracteristicas_secundario": null&#10;            },&#10;            {&#10;              "_id": {&#10;                "\$oid": "5da731917b67fb0464ef35b7"&#10;              },&#10;              "id_secundario": "21111200435",&#10;              "nombre": "SVA COMUNICACIONES UNIFICADAS ETB",&#10;              "fecha_activacion": null,&#10;              "fecha_inactivacion": null,&#10;              "caracteristicas_secundario": null&#10;            }&#10;          ],&#10;          "adicionales": null&#10;        }&#10;      ],&#10;      "opcionales": null,&#10;      "caracteristicas_bundle": null,&#10;      "estados_bundle": null&#10;    }&#10;  ],&#10;  "Direccion": null,&#10;  "actualizacion_extractor": "1",&#10;  "Promociones": [],&#10;  "ciclo_facturacion": "96"&#10;}]]' mediaType="application/json" />
				</munit-tools:then-return>
			</munit-tools:mock-when>
			<munit-tools:mock-when doc:name="Retrieve promociones" doc:id="ed72ee01-4665-4a0e-8bbf-7e79cb0613c6" processor="os:retrieve">
				<munit-tools:with-attributes >
					<munit-tools:with-attribute whereValue="Retrieve promociones" attributeName="doc:name" />
					<munit-tools:with-attribute whereValue="c1de42d4-951d-4235-9387-1880625cf376" attributeName="doc:id" />
				</munit-tools:with-attributes>
				<munit-tools:then-return >
					<munit-tools:variables >
						<munit-tools:variable key="promociones" value="#[output application/json --- readUrl('classpath://svaPromociones\promociones.dwl')]" mediaType="application/json" />
					</munit-tools:variables>
				</munit-tools:then-return>
			</munit-tools:mock-when>
			<munit-tools:mock-when doc:name="CreateOrder" doc:id="78062f84-efe6-4fdb-9e57-b998d24ff108" processor="http:request" >
				<munit-tools:with-attributes >
					<munit-tools:with-attribute whereValue="Post order" attributeName="doc:name" />
					<munit-tools:with-attribute whereValue="089db6f5-e7ae-4b06-8af1-f52f93dfecb3" attributeName="doc:id" />
				</munit-tools:with-attributes>
				<munit-tools:then-return >
					<munit-tools:payload value='#[output application/json &#10;---     &#10;{&#10;  "links": [&#10;    {&#10;      "rel": "string",&#10;      "href": "string",&#10;      "hreflang": "string",&#10;      "media": "string",&#10;      "title": "string",&#10;      "type": "string",&#10;      "deprecation": "string",&#10;      "profile": "string",&#10;      "name": "string"&#10;    }&#10;  ],&#10;  "content": [&#10;    {&#10;      "id": "1234",&#10;      "name": "Name",&#10;      "domain": "string",&#10;      "status": "PRE_ACTIVE",&#10;      "networkStatus": "PRE_ACTIVE",&#10;      "type": "RETAIL",&#10;      "portabilityStatus": "NO_PORTABILITY",&#10;      "billingType": "PREPAY",&#10;      "creationDate": "2022-04-20T10:13:15.686Z",&#10;      "firstActivationDate": "2022-04-20T10:13:15.686Z",&#10;      "terminationDate": "2022-04-20T10:13:15.686Z",&#10;      "balance": 15.45,&#10;      "balanceExpirationDate": "2022-04-20T10:13:15.686Z",&#10;      "lastTrafficDate": "2022-04-20T10:13:15.686Z",&#10;      "externalName": "Prepay Mobile",&#10;      "language": "en_US",&#10;      "ntwID": "555112",&#10;      "publicIdentity": "555112",&#10;      "externalID": "555112",&#10;      "priceplan": {&#10;        "id": "1234",&#10;        "name": "Name",&#10;        "pricePlanName": "Brand price plan"&#10;      },&#10;      "salesData": {&#10;        "salesChannel": "OWN_CALLCENTER",&#10;        "salesPerson": "cac_agent_john"&#10;      },&#10;      "packageList": [&#10;        {&#10;          "id": "1234",&#10;          "name": "Name",&#10;          "links": [&#10;            {&#10;              "rel": "string",&#10;              "href": "string",&#10;              "hreflang": "string",&#10;              "media": "string",&#10;              "title": "string",&#10;              "type": "string",&#10;              "deprecation": "string",&#10;              "profile": "string",&#10;              "name": "string"&#10;            }&#10;          ]&#10;        }&#10;      ],&#10;      "msisdnList": [&#10;        {&#10;          "id": "1234",&#10;          "name": "Name",&#10;          "links": [&#10;            {&#10;              "rel": "string",&#10;              "href": "string",&#10;              "hreflang": "string",&#10;              "media": "string",&#10;              "title": "string",&#10;              "type": "string",&#10;              "deprecation": "string",&#10;              "profile": "string",&#10;              "name": "string"&#10;            }&#10;          ]&#10;        }&#10;      ],      &#10;      "simList": [&#10;        {&#10;          "id": "1234",&#10;          "name": "Name",&#10;          "links": [&#10;            {&#10;              "rel": "string",&#10;              "href": "string",&#10;              "hreflang": "string",&#10;              "media": "string",&#10;              "title": "string",&#10;              "type": "string",&#10;              "deprecation": "string",&#10;              "profile": "string",&#10;              "name": "string"&#10;            }&#10;          ]&#10;        }&#10;      ],&#10;      "subscriber": {&#10;        "id": "1234",&#10;        "name": "Name",&#10;        "links": [&#10;          {&#10;            "rel": "string",&#10;            "href": "string",&#10;            "hreflang": "string",&#10;            "media": "string",&#10;            "title": "string",&#10;            "type": "string",&#10;            "deprecation": "string",&#10;            "profile": "string",&#10;            "name": "string"&#10;          }&#10;        ]&#10;      }&#10;    }&#10;  ]&#10;}]' mediaType="application/json" />
				</munit-tools:then-return>
			</munit-tools:mock-when>
			<munit-tools:mock-when doc:name="Apply Order" doc:id="e180023e-5faa-49ec-8a24-4d375c36294a" processor="http:request" >
				<munit-tools:with-attributes >
					<munit-tools:with-attribute whereValue="End order" attributeName="doc:name" />
					<munit-tools:with-attribute whereValue="de69c118-3d0c-4e07-8c64-4c8eb28ac386" attributeName="doc:id" />
				</munit-tools:with-attributes>
				<munit-tools:then-return >
					<munit-tools:payload value="#[output application/json ---&#10;{}]" mediaType="application/json" />
				</munit-tools:then-return>
			</munit-tools:mock-when>
			<munit-tools:mock-when doc:name="Log applyed promotions" doc:id="fa310bd5-035f-4b91-b53e-7d31e4ee8290" processor="http:request">
				<munit-tools:with-attributes >
					<munit-tools:with-attribute whereValue="Request to log applyed promotions" attributeName="doc:name" />
					<munit-tools:with-attribute whereValue="623f8309-fb77-46e7-8a87-21444a02c174" attributeName="doc:id" />
				</munit-tools:with-attributes>
			</munit-tools:mock-when>
		</munit:behavior>
		<munit:execution >
			<munit:set-event doc:name="Set Event" doc:id="f9ce28b2-28c4-48b8-a36f-dbb496c93cf7" >
				<munit:payload value='#[output application/json &#10;--- &#10;{&#10;   "integrationId": "MDM-MOV-5002334-1",&#10;   "svas":[&#10;        {&#10;            "action": "ADD",&#10;            "packageId": "156",&#10;            "id_opcional": "5732"&#10;        },&#10;        {&#10;            "action": "ADD",&#10;            "packageId": "234",&#10;            "id_opcional": "1234"&#10;        },&#10;        {&#10;            "action": "ADD",&#10;            "packageId": "543",&#10;            "id_opcional": "543"&#10;        },&#10;        {&#10;            "action": "ADD",&#10;            "packageId": "324",&#10;            "id_opcional": "324"&#10;        },&#10;        {&#10;            "action": "ADD",&#10;            "packageId": "2345",&#10;            "id_opcional": "2345"&#10;        },&#10;        {&#10;            "action": "ADD",&#10;            "packageId": "76543",&#10;            "id_opcional": "76543"&#10;        }&#10;    ]&#10;}]' mediaType="application/json" />
				<munit:attributes value='#[{ &#10;	headers: { &#10;		origenTransaccion: "salesforce-xapi-services" &#10;	}&#10;}]' />
			</munit:set-event>
			<flow-ref doc:name="Flow-ref to post:\v1\sva:application\json:service-papi-services-config" doc:id="38e0faed-91e9-4d01-9d56-c4a0585df5bc" name="post:\v1\sva:application\json:service-papi-services-config" />
		</munit:execution>
		<munit:validation >
			<munit-tools:assert-that doc:name="Assert that" doc:id="bb873783-9efa-4604-ab2e-39b49c58640d" expression="#[payload]" is="#[MunitTools::notNullValue()]" />
		</munit:validation>
	</munit:test>
	<munit:test name="post-sva-test-suite-add-promocion-nuevo" doc:id="55359480-d863-44d9-af5c-7453f11bd805" >
		<munit:behavior >
			<munit-tools:mock-when doc:name="Get token" doc:id="b6b446f3-1905-4a8c-b56e-14dbd1e3f4c6" processor="http:request" >
				<munit-tools:with-attributes >
					<munit-tools:with-attribute whereValue="a0904c22-a3d7-4db1-937f-39c97089e3b8" attributeName="doc:id" />
				</munit-tools:with-attributes>
				<munit-tools:then-return >
					<munit-tools:payload value='#[output application/json --- {&#10;  "accessToken": "eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzI1NiJ9.eyJhdWQiOiJjYW1wYWlnbnMiLCJzdWIiOiI2aXc4d2tkSjY3ZGdoYWplcnQ5MDJqYWQ5blJFYWlkaGZvciIsImlzcyI6IiIsImV4cCI6MTcwODQ1MjMyNX0.ve9-4YF96RQXBjcZ42z3lr1rYPdgUgbm-FAflIDheRw",&#10;  "tokenType": "Bearer",&#10;  "ipOrigen": "0.0.0.0",&#10;  "expiresIn": "2024-02-07T20:00:00.000Z"&#10;}]' mediaType="application/json" />
				</munit-tools:then-return>
			</munit-tools:mock-when>
			<munit-tools:mock-when doc:name="Get subscription" doc:id="78c071c8-a1be-4b1b-b143-dfc0a7cf5d8b" processor="http:request" >
				<munit-tools:with-attributes >
					<munit-tools:with-attribute whereValue="Get subscription" attributeName="doc:name" />
					<munit-tools:with-attribute whereValue="2a6f3410-1023-471f-a692-c18b2850a358" attributeName="doc:id" />
				</munit-tools:with-attributes>
				<munit-tools:then-return >
					<munit-tools:payload value='#[output application/json &#10;--- &#10;{&#10;  "links": [&#10;    {&#10;      "rel": "string",&#10;      "href": "string",&#10;      "hreflang": "string",&#10;      "media": "string",&#10;      "title": "string",&#10;      "type": "string",&#10;      "deprecation": "string",&#10;      "profile": "string",&#10;      "name": "string"&#10;    }&#10;  ],&#10;  "content": [&#10;    {&#10;      "id": "1234",&#10;      "name": "Name",&#10;      "domain": "string",&#10;      "status": "PRE_ACTIVE",&#10;      "networkStatus": "PRE_ACTIVE",&#10;      "type": "RETAIL",&#10;      "portabilityStatus": "NO_PORTABILITY",&#10;      "billingType": "PREPAY",&#10;      "creationDate": "2022-04-20T10:13:15.686Z",&#10;      "firstActivationDate": "2022-04-20T10:13:15.686Z",&#10;      "terminationDate": "2022-04-20T10:13:15.686Z",&#10;      "balance": 15.45,&#10;      "balanceExpirationDate": "2022-04-20T10:13:15.686Z",&#10;      "lastTrafficDate": "2022-04-20T10:13:15.686Z",&#10;      "externalName": "Prepay Mobile",&#10;      "language": "en_US",&#10;      "ntwID": "555112",&#10;      "publicIdentity": "555112",&#10;      "externalID": "555112",      &#10;      "subscriber": {&#10;        "id": "1234",&#10;        "name": "Name",&#10;        "links": [&#10;          {&#10;            "rel": "string",&#10;            "href": "string",&#10;            "hreflang": "string",&#10;            "media": "string",&#10;            "title": "string",&#10;            "type": "string",&#10;            "deprecation": "string",&#10;            "profile": "string",&#10;            "name": "string"&#10;          }&#10;        ]      &#10;      },&#10;      "lastUpdate": "2022-04-20T10:13:15.686Z",&#10;      "links": [&#10;        {&#10;          "rel": "string",&#10;          "href": "string",&#10;          "hreflang": "string",&#10;          "media": "string",&#10;          "title": "string",&#10;          "type": "string",&#10;          "deprecation": "string",&#10;          "profile": "string",&#10;          "name": "string"&#10;        }&#10;      ]&#10;    }&#10;  ],&#10;  "page": {&#10;    "size": 0,&#10;    "totalElements": 0,&#10;    "totalPages": 0,&#10;    "number": 0&#10;  }&#10;}]' mediaType="application/json" />
				</munit-tools:then-return>
			</munit-tools:mock-when>
			<munit-tools:mock-when doc:name="Retrieve promXpkg" doc:id="f6fe695e-0ec2-4731-91ae-c46921248d6c" processor="os:retrieve">
				<munit-tools:with-attributes>
					<munit-tools:with-attribute whereValue="Retrieve promXpkg" attributeName="doc:name" />
					<munit-tools:with-attribute whereValue="8b657bea-bd7b-48cb-832f-d1bc6f2a885b" attributeName="doc:id" />
				</munit-tools:with-attributes>
				<munit-tools:then-return>
					<munit-tools:variables>
						<munit-tools:variable key="promXpkg" value="#[output application/json --- readUrl('classpath://svaPromociones\promXpkg.dwl')]" mediaType="application/json" />
					</munit-tools:variables>
				</munit-tools:then-return>
			</munit-tools:mock-when>
			<munit-tools:mock-when doc:name="Request to get active service" doc:id="68e54510-eff8-4945-9e9e-42d03c37e20b" processor="http:request" >
				<munit-tools:with-attributes >
					<munit-tools:with-attribute whereValue="Request to get active service" attributeName="doc:name" />
					<munit-tools:with-attribute whereValue="f2b9187a-e4cf-4692-ae9f-b64e80f8afcb" attributeName="doc:id" />
				</munit-tools:with-attributes>
				<munit-tools:then-return >
					<munit-tools:payload value='#[output application/json &#10;--- &#10;[&#10;	{&#10;	  "_id": {&#10;	    "\$oid": "5a3baa28080e9b2280b20eb8"&#10;	  },&#10;	  "Tipo_Documento": "CC",&#10;	  "Numero_Identificacion": "609919093",&#10;	  "Cuenta_Facturacion": "12051048911",&#10;	  "Tecnologia": "FO",&#10;	  "Usuario_Creador": "0-1",&#10;	  "Usuario_Modificador": "0-1",&#10;	  "Direccion_Instalacion": "AC 134 10A 48 AP 703",&#10;	  "Departamento": "BOGOTA",&#10;	  "Ciudad": "BOGOTA D.C.",&#10;	  "Barrio": "008513",&#10;	  "Localidad": "CC-38281206",&#10;	  "Estrato": "5",&#10;	  "Pais": "Colombia",&#10;	  "Id_Orden_Relacionada": "",&#10;	  "Id_Activo_Padre": "1-EJO381P",&#10;	  "Empaquetado": "DOBLE 20M",&#10;	  "Tipo_Producto": "raiz",&#10;	  "Codigo_Producto_Servicio": "6DQS-BCVPU",&#10;	  "Codigo_Servicio": "1-3GYCD",&#10;	  "Producto": "VOIP",&#10;	  "Servicio": "RVC VOZ FIJO MOVIL",&#10;	  "Oferta_Plan": "",&#10;	  "Valor_Oferta": "0",&#10;	  "Numero_Conexion": "6019980647",&#10;	  "Duracion_Servicio": "",&#10;	  "Flag_Facturable": "S",&#10;	  "Integration_Id": "1-EIOHS9G",&#10;	  "Id_Caracterizacion_Prom": "",&#10;	  "Fecha_Creacion": {&#10;	    "\$date": "2015-09-30T18:51:09.000Z"&#10;	  },&#10;	  "Fecha_Actualizacion": {&#10;	    "\$date": "2023-07-07T00:00:00.000Z"&#10;	  },&#10;	  "Fecha_Activacion": {&#10;	    "\$date": "2025-03-30T05:00:00.000Z"&#10;	  },&#10;	  "Fecha_Inactivacion": null,&#10;	  "Modalidad_Servicio": "",&#10;	  "Flag_Convergencia": "",&#10;	  "Numero_Anterior": "",&#10;	  "Clausula_Permanencia": "",&#10;	  "Id_Activo_Sistema_Origen": "1-EJO383G",&#10;	  "Id_Activo_Raiz": "1-EJO3813",&#10;	  "Id_Cuenta_Servicio_Origen": "1-EIOECK5",&#10;	  "Sistema_Origen": "FIBRA",&#10;	  "Ruta": "ERROR-LINE",&#10;	  "Caracteristica_Servicio": null,&#10;	  "Estado_Servicio": null,&#10;	  "Promociones_Servicio": null,&#10;	  "Descuento_Servicio": null,&#10;	  "Tipo_Linea": "",&#10;	  "Segmento_Servicio": "",&#10;	  "Id_Servicio_Salesforce": "",&#10;	  "Direccion_Latitud": "4,714130",&#10;	  "Direccion_Longitud": "-74,036005",&#10;	  "Direccion_GIS": "612802304577911051",&#10;	  "Molecula": "FTO04",&#10;	  "Distrito": "TOBERIN",&#10;	  "Estado_Pago": "1",&#10;	  "Estado_Fraude": "",&#10;	  "Estado_Robo": "",&#10;	  "Estado_Perdida": "",&#10;	  "Estado_Voluntaria": "1",&#10;	  "Estado_Robo_Perdida": "",&#10;	  "Bundles": null,&#10;	  "Estado": "Suspendido"&#10;	}&#10;]]' mediaType="application/json" />
				</munit-tools:then-return>
			</munit-tools:mock-when>
			<munit-tools:mock-when doc:name="Request to get order by fact account" doc:id="641ed5e3-0f57-49f4-a157-160b09f143cc" processor="http:request" >
				<munit-tools:with-attributes >
					<munit-tools:with-attribute whereValue="Request to get order by fact account" attributeName="doc:name" />
					<munit-tools:with-attribute whereValue="e6fabac3-744d-4058-a266-4bd228e2f728" attributeName="doc:id" />
				</munit-tools:with-attributes>
				<munit-tools:then-return >
					<munit-tools:payload value='#[output application/json &#10;--- &#10;[{&#10;  "_id": {&#10;    "\$oid": "5f4921a106c0d40f8c9df1bf"&#10;  },&#10;  "Tipo_Documento": "NIT",&#10;  "Numero_Identificacion": "800127648",&#10;  "CUN": "4347200000131206",&#10;  "Id_Distribuidor": 2110,&#10;  "Tipo_Orden": "VENTA LTE",&#10;  "Subtipo_Orden": "VENTA LTE",&#10;  "Estado_Orden": "COMPLETADA",&#10;  "Causal_Estado_Orden": null,&#10;  "Numero_Orden": "MDM-POR-151025",&#10;  "Fecha_Creacion_Orden": {&#10;    "\$date": "2020-08-28T15:24:18.177Z"&#10;  },&#10;  "Usuario_Creador": "michamaa",&#10;  "Usuario_Modificador": "michamaa",&#10;  "Usuario_Vendedor": null,&#10;  "Fecha_Actualizacion_Orden": {&#10;    "\$date": "2020-08-28T15:35:01.590Z"&#10;  },&#10;  "Canal": "DISTRIBUIDOR",&#10;  "Subcanal": null,&#10;  "Causal_Retiro_Cliente": null,&#10;  "Forma_Entrega_Contrato": null,&#10;  "Fecha_Inicio_Contrato": null,&#10;  "Id_Orden_Sistema_Origen": "MDM-POR-151025",&#10;  "Sistema_Origen": "MDM",&#10;  "num_agrupacion": 2646,&#10;  "tipo_entrega_factura": "EMAIL",&#10;  "tipo_plan": "Postpago",&#10;  "Flag_Envio_Recibo": true,&#10;  "codigo_operador": null,&#10;  "celular_portabilidad": null,&#10;  "tipo_plan_donante": null,&#10;  "Caracteristicas_Orden": [&#10;    {&#10;      "Caracteristica": "Autorizo_Centrales_Riesgo",&#10;      "Valor": "False",&#10;      "Accion": "Autorizo_Centrales_Riesgo",&#10;      "actualizacion_extractor": "1"&#10;    },&#10;    {&#10;      "Caracteristica": "integration_id",&#10;      "Valor": "MDM-POR-151025",&#10;      "Accion": "",&#10;      "actualizacion_extractor": "1"&#10;    },&#10;    {&#10;      "Caracteristica": "Cupo Empresa",&#10;      "Valor": "1000000",&#10;      "Accion": "",&#10;      "actualizacion_extractor": "1"&#10;    },&#10;    {&#10;      "Caracteristica": "SIMPreactiva",&#10;      "Valor": "",&#10;      "Accion": null,&#10;      "actualizacion_extractor": "1"&#10;    },&#10;    {&#10;      "Caracteristica": "Fotocopia de la C辿dula de Representante legal",&#10;      "Valor": "800127648/MDM-POR-151025/Fotocopia de la C辿dula de Representante legal",&#10;      "Accion": null,&#10;      "actualizacion_extractor": "1"&#10;    },&#10;    {&#10;      "Caracteristica": "AutorizoUsoMismaFirma",&#10;      "Valor": "True",&#10;      "Accion": null,&#10;      "actualizacion_extractor": "1"&#10;    },&#10;    {&#10;      "Caracteristica": "TipoFirma",&#10;      "Valor": "Firma Digital",&#10;      "Accion": null,&#10;      "actualizacion_extractor": "1"&#10;    },&#10;    {&#10;      "Caracteristica": "Contrato Digital Definitivo",&#10;      "Valor": "800127648/MDM-POR-151025/CONTRATO-DEFINITIVO.pdf",&#10;      "Accion": "Contrato Digital Definitivo",&#10;      "actualizacion_extractor": "1"&#10;    }&#10;  ],&#10;  "Pago": [&#10;    {&#10;      "Tipo_Recaudo": null,&#10;      "Forma_Pago": "EFECTIVO",&#10;      "Recibo_Pago": "5000002943",&#10;      "Valor_Pagado": "79700",&#10;      "Valor_Facturado": "79700",&#10;      "Valor_Sin_Iva": "79700",&#10;      "Fecha_Pago": {&#10;        "\$date": "2020-08-28T05:00:00.000Z"&#10;      },&#10;      "Banco": null,&#10;      "Canal_Pago": "2110",&#10;      "Fecha_Limite_Pago": null,&#10;      "Numero_Confirmacion": null,&#10;      "Estado": null,&#10;      "Codigo_Respuesta": null,&#10;      "Mensaje_Respuesta": null,&#10;      "pago_online": null,&#10;      "actualizacion_extractor": "1"&#10;    }&#10;  ],&#10;  "Validacion": null,&#10;  "Fase_Orden": [&#10;    {&#10;      "Fase": "ORDEN CREADA",&#10;      "Fecha_Ejecucion": {&#10;        "\$date": "2020-08-28T15:24:17.764Z"&#10;      },&#10;      "Resultado": "",&#10;      "Causal_Fase": "",&#10;      "Usuario_Creo": "michamaa",&#10;      "Estado": "EXITOSO",&#10;      "Detalle_Fase": null,&#10;      "Reintentos": 0,&#10;      "actualizacion_extractor": "1"&#10;    },&#10;    {&#10;      "Fase": "INVENTARIO",&#10;      "Fecha_Ejecucion": {&#10;        "\$date": "2020-08-28T15:25:10.502Z"&#10;      },&#10;      "Resultado": null,&#10;      "Causal_Fase": null,&#10;      "Usuario_Creo": "michamaa",&#10;      "Estado": "EXITOSO",&#10;      "Detalle_Fase": null,&#10;      "Reintentos": 0,&#10;      "actualizacion_extractor": "1"&#10;    },&#10;    {&#10;      "Fase": "RECIBO PAGO",&#10;      "Fecha_Ejecucion": {&#10;        "\$date": "2020-08-28T15:25:51.743Z"&#10;      },&#10;      "Resultado": null,&#10;      "Causal_Fase": null,&#10;      "Usuario_Creo": "michamaa",&#10;      "Estado": "EXITOSO",&#10;      "Detalle_Fase": null,&#10;      "Reintentos": 0,&#10;      "actualizacion_extractor": "1"&#10;    },&#10;    {&#10;      "Fase": "PAGO",&#10;      "Fecha_Ejecucion": {&#10;        "\$date": "2020-08-28T15:25:51.843Z"&#10;      },&#10;      "Resultado": null,&#10;      "Causal_Fase": null,&#10;      "Usuario_Creo": "michamaa",&#10;      "Estado": "EXITOSO",&#10;      "Detalle_Fase": null,&#10;      "Reintentos": 0,&#10;      "actualizacion_extractor": "1"&#10;    },&#10;    {&#10;      "Fase": "APROVISIONAMIENTO",&#10;      "Fecha_Ejecucion": {&#10;        "\$date": "2020-08-28T15:27:26.470Z"&#10;      },&#10;      "Resultado": "",&#10;      "Causal_Fase": "",&#10;      "Usuario_Creo": "MDM",&#10;      "Estado": "EXITOSO",&#10;      "Detalle_Fase": null,&#10;      "Reintentos": 0,&#10;      "actualizacion_extractor": "1"&#10;    },&#10;    {&#10;      "Fase": "FACTURACION",&#10;      "Fecha_Ejecucion": {&#10;        "\$date": "2020-08-28T15:30:47.267Z"&#10;      },&#10;      "Resultado": "",&#10;      "Causal_Fase": "",&#10;      "Usuario_Creo": "MDM",&#10;      "Estado": "EXITOSO",&#10;      "Detalle_Fase": null,&#10;      "Reintentos": 0,&#10;      "actualizacion_extractor": "1"&#10;    },&#10;    {&#10;      "Fase": "RMCA",&#10;      "Fecha_Ejecucion": {&#10;        "\$date": "2020-08-28T15:32:14.998Z"&#10;      },&#10;      "Resultado": "",&#10;      "Causal_Fase": "",&#10;      "Usuario_Creo": "MDM",&#10;      "Estado": "EXITOSO",&#10;      "Detalle_Fase": null,&#10;      "Reintentos": 0,&#10;      "actualizacion_extractor": "1"&#10;    },&#10;    {&#10;      "Fase": "COMPLETADO",&#10;      "Fecha_Ejecucion": {&#10;        "\$date": "2020-08-28T15:35:01.575Z"&#10;      },&#10;      "Resultado": "",&#10;      "Causal_Fase": "",&#10;      "Usuario_Creo": "MDM",&#10;      "Estado": "EXITOSO",&#10;      "Detalle_Fase": null,&#10;      "Reintentos": 0,&#10;      "actualizacion_extractor": "1"&#10;    }&#10;  ],&#10;  "Cuenta_Facturacion": "15052851778",&#10;  "Cuenta_Facturacion_Equipo": null,&#10;  "Pago_Anticipado": "SI",&#10;  "Valor_Recaudo": "79700",&#10;  "Reportado_Pago": null,&#10;  "Bundle_activo": null,&#10;  "Bundle_orden": [&#10;    {&#10;      "_id": {&#10;        "\$oid": "5da72e527b67fb0464ef3574"&#10;      },&#10;      "id_catalogo": "2646",&#10;      "nombre": "INTERMEDIO 50GB",&#10;      "fecha_activacion": null,&#10;      "fecha_inactivacion": null,&#10;      "primarios": [&#10;        {&#10;          "_id": {&#10;            "\$oid": "5da72f837b67fb0464ef358b"&#10;          },&#10;          "id_primario": "11111",&#10;          "numero_conexion": null,&#10;          "nombre": "LTE POSPAGO",&#10;          "fecha_activacion": null,&#10;          "fecha_inactivacion": null,&#10;          "caracteristicas_primarios": null,&#10;          "secundarios": [&#10;            {&#10;              "_id": {&#10;                "\$oid": "5da72f837b67fb0464ef358c"&#10;              },&#10;              "id_secundario": "21111100436",&#10;              "nombre": "VOZ ILIMITADA",&#10;              "fecha_activacion": null,&#10;              "fecha_inactivacion": null,&#10;              "caracteristicas_secundario": null&#10;            },&#10;            {&#10;              "_id": {&#10;                "\$oid": "5da72f837b67fb0464ef358d"&#10;              },&#10;              "id_secundario": "21111473",&#10;              "nombre": "SMS 100",&#10;              "fecha_activacion": null,&#10;              "fecha_inactivacion": null,&#10;              "caracteristicas_secundario": null&#10;            },&#10;            {&#10;              "_id": {&#10;                "\$oid": "5da72f837b67fb0464ef358e"&#10;              },&#10;              "id_secundario": "21111296",&#10;              "nombre": "DATOS 8 GB 3G/4G",&#10;              "fecha_activacion": null,&#10;              "fecha_inactivacion": null,&#10;              "caracteristicas_secundario": null&#10;            },&#10;            {&#10;              "_id": {&#10;                "\$oid": "5da72f837b67fb0464ef358f"&#10;              },&#10;              "id_secundario": "21111200438",&#10;              "nombre": "DATOS 42 GB EN 4G",&#10;              "fecha_activacion": null,&#10;              "fecha_inactivacion": null,&#10;              "caracteristicas_secundario": null&#10;            },&#10;            {&#10;              "_id": {&#10;                "\$oid": "5da72f837b67fb0464ef3590"&#10;              },&#10;              "id_secundario": "21111300430",&#10;              "nombre": "SVA REDES SOCIALES",&#10;              "fecha_activacion": null,&#10;              "fecha_inactivacion": null,&#10;              "caracteristicas_secundario": null&#10;            },&#10;            {&#10;              "_id": {&#10;                "\$oid": "5da72f837b67fb0464ef3591"&#10;              },&#10;              "id_secundario": "21111300431",&#10;              "nombre": "SVA WHATSAPP VOZ 1000",&#10;              "fecha_activacion": null,&#10;              "fecha_inactivacion": null,&#10;              "caracteristicas_secundario": null&#10;            },&#10;            {&#10;              "_id": {&#10;                "\$oid": "5da72f837b67fb0464ef3592"&#10;              },&#10;              "id_secundario": "21111200432",&#10;              "nombre": "SVA MOVILIDAD",&#10;              "fecha_activacion": null,&#10;              "fecha_inactivacion": null,&#10;              "caracteristicas_secundario": null&#10;            },&#10;            {&#10;              "_id": {&#10;                "\$oid": "5da72f837b67fb0464ef3593"&#10;              },&#10;              "id_secundario": "21111200433",&#10;              "nombre": "SVA OFFICE 365",&#10;              "fecha_activacion": null,&#10;              "fecha_inactivacion": null,&#10;              "caracteristicas_secundario": null&#10;            },&#10;            {&#10;              "_id": {&#10;                "\$oid": "5da72f837b67fb0464ef3594"&#10;              },&#10;              "id_secundario": "21111200434",&#10;              "nombre": "SVA EMAIL 1 GB",&#10;              "fecha_activacion": null,&#10;              "fecha_inactivacion": null,&#10;              "caracteristicas_secundario": null&#10;            },&#10;            {&#10;              "_id": {&#10;                "\$oid": "5da72f837b67fb0464ef3595"&#10;              },&#10;              "id_secundario": "21111200435",&#10;              "nombre": "SVA COMUNICACIONES UNIFICADAS ETB",&#10;              "fecha_activacion": null,&#10;              "fecha_inactivacion": null,&#10;              "caracteristicas_secundario": null&#10;            }&#10;          ],&#10;          "adicionales": null&#10;        }&#10;      ],&#10;      "opcionales": null,&#10;      "caracteristicas_bundle": null,&#10;      "estados_bundle": null&#10;    }&#10;  ],&#10;  "Direccion": null,&#10;  "actualizacion_extractor": "1",&#10;  "Promociones": [],&#10;  "ciclo_facturacion": "96"&#10;}]]' mediaType="application/json" />
				</munit-tools:then-return>
			</munit-tools:mock-when>
			<munit-tools:mock-when doc:name="Retrieve promociones" doc:id="467936ee-c593-4ea9-b51e-5c1ea2bca236" processor="os:retrieve">
				<munit-tools:with-attributes>
					<munit-tools:with-attribute whereValue="Retrieve promociones" attributeName="doc:name" />
					<munit-tools:with-attribute whereValue="c1de42d4-951d-4235-9387-1880625cf376" attributeName="doc:id" />
				</munit-tools:with-attributes>
				<munit-tools:then-return>
					<munit-tools:variables>
						<munit-tools:variable key="promociones" value="#[output application/json --- readUrl('classpath://svaPromociones\promociones.dwl')]" mediaType="application/json" />
					</munit-tools:variables>
				</munit-tools:then-return>
			</munit-tools:mock-when>
			<munit-tools:mock-when doc:name="CreateOrder" doc:id="440a3511-4435-464a-90ee-020b9efd271c" processor="http:request" >
				<munit-tools:with-attributes >
					<munit-tools:with-attribute whereValue="Post order" attributeName="doc:name" />
					<munit-tools:with-attribute whereValue="089db6f5-e7ae-4b06-8af1-f52f93dfecb3" attributeName="doc:id" />
				</munit-tools:with-attributes>
				<munit-tools:then-return >
					<munit-tools:payload value='#[output application/json &#10;---     &#10;{&#10;  "links": [&#10;    {&#10;      "rel": "string",&#10;      "href": "string",&#10;      "hreflang": "string",&#10;      "media": "string",&#10;      "title": "string",&#10;      "type": "string",&#10;      "deprecation": "string",&#10;      "profile": "string",&#10;      "name": "string"&#10;    }&#10;  ],&#10;  "content": [&#10;    {&#10;      "id": "1234",&#10;      "name": "Name",&#10;      "domain": "string",&#10;      "status": "PRE_ACTIVE",&#10;      "networkStatus": "PRE_ACTIVE",&#10;      "type": "RETAIL",&#10;      "portabilityStatus": "NO_PORTABILITY",&#10;      "billingType": "PREPAY",&#10;      "creationDate": "2022-04-20T10:13:15.686Z",&#10;      "firstActivationDate": "2022-04-20T10:13:15.686Z",&#10;      "terminationDate": "2022-04-20T10:13:15.686Z",&#10;      "balance": 15.45,&#10;      "balanceExpirationDate": "2022-04-20T10:13:15.686Z",&#10;      "lastTrafficDate": "2022-04-20T10:13:15.686Z",&#10;      "externalName": "Prepay Mobile",&#10;      "language": "en_US",&#10;      "ntwID": "555112",&#10;      "publicIdentity": "555112",&#10;      "externalID": "555112",&#10;      "priceplan": {&#10;        "id": "1234",&#10;        "name": "Name",&#10;        "pricePlanName": "Brand price plan"&#10;      },&#10;      "salesData": {&#10;        "salesChannel": "OWN_CALLCENTER",&#10;        "salesPerson": "cac_agent_john"&#10;      },&#10;      "packageList": [&#10;        {&#10;          "id": "1234",&#10;          "name": "Name",&#10;          "links": [&#10;            {&#10;              "rel": "string",&#10;              "href": "string",&#10;              "hreflang": "string",&#10;              "media": "string",&#10;              "title": "string",&#10;              "type": "string",&#10;              "deprecation": "string",&#10;              "profile": "string",&#10;              "name": "string"&#10;            }&#10;          ]&#10;        }&#10;      ],&#10;      "msisdnList": [&#10;        {&#10;          "id": "1234",&#10;          "name": "Name",&#10;          "links": [&#10;            {&#10;              "rel": "string",&#10;              "href": "string",&#10;              "hreflang": "string",&#10;              "media": "string",&#10;              "title": "string",&#10;              "type": "string",&#10;              "deprecation": "string",&#10;              "profile": "string",&#10;              "name": "string"&#10;            }&#10;          ]&#10;        }&#10;      ],      &#10;      "simList": [&#10;        {&#10;          "id": "1234",&#10;          "name": "Name",&#10;          "links": [&#10;            {&#10;              "rel": "string",&#10;              "href": "string",&#10;              "hreflang": "string",&#10;              "media": "string",&#10;              "title": "string",&#10;              "type": "string",&#10;              "deprecation": "string",&#10;              "profile": "string",&#10;              "name": "string"&#10;            }&#10;          ]&#10;        }&#10;      ],&#10;      "subscriber": {&#10;        "id": "1234",&#10;        "name": "Name",&#10;        "links": [&#10;          {&#10;            "rel": "string",&#10;            "href": "string",&#10;            "hreflang": "string",&#10;            "media": "string",&#10;            "title": "string",&#10;            "type": "string",&#10;            "deprecation": "string",&#10;            "profile": "string",&#10;            "name": "string"&#10;          }&#10;        ]&#10;      }&#10;    }&#10;  ]&#10;}]' mediaType="application/json" />
				</munit-tools:then-return>
			</munit-tools:mock-when>
			<munit-tools:mock-when doc:name="Apply Order" doc:id="953fbe60-4347-4fea-8e50-f55ac913cd9e" processor="http:request" >
				<munit-tools:with-attributes >
					<munit-tools:with-attribute whereValue="End order" attributeName="doc:name" />
					<munit-tools:with-attribute whereValue="de69c118-3d0c-4e07-8c64-4c8eb28ac386" attributeName="doc:id" />
				</munit-tools:with-attributes>
				<munit-tools:then-return >
					<munit-tools:payload value="#[output application/json ---&#10;{}]" mediaType="application/json" />
				</munit-tools:then-return>
			</munit-tools:mock-when>
			<munit-tools:mock-when doc:name="Log applyed promotions" doc:id="60a87326-f6bc-4f96-ad99-1891458653fd" processor="http:request" >
				<munit-tools:with-attributes >
					<munit-tools:with-attribute whereValue="Request to log applyed promotions" attributeName="doc:name" />
					<munit-tools:with-attribute whereValue="623f8309-fb77-46e7-8a87-21444a02c174" attributeName="doc:id" />
				</munit-tools:with-attributes>
			</munit-tools:mock-when>
		</munit:behavior>
		<munit:execution >
			<munit:set-event doc:name="Set Event" doc:id="cc83bb47-58c8-441f-96a5-c95de22972bf" >
				<munit:payload value='#[output application/json &#10;--- &#10;{&#10;   "integrationId": "MDM-MOV-5002334-1",&#10;   "svas":[&#10;        {&#10;            "action": "ADD",&#10;            "packageId": "156",&#10;            "id_opcional": "5732"&#10;        },&#10;        {&#10;            "action": "ADD",&#10;            "packageId": "234",&#10;            "id_opcional": "1234"&#10;        },&#10;        {&#10;            "action": "ADD",&#10;            "packageId": "543",&#10;            "id_opcional": "543"&#10;        },&#10;        {&#10;            "action": "ADD",&#10;            "packageId": "324",&#10;            "id_opcional": "324"&#10;        },&#10;        {&#10;            "action": "ADD",&#10;            "packageId": "2345",&#10;            "id_opcional": "2345"&#10;        },&#10;        {&#10;            "action": "ADD",&#10;            "packageId": "76543",&#10;            "id_opcional": "76543"&#10;        }&#10;    ]&#10;}]' mediaType="application/json" />
				<munit:attributes value='#[{ &#10;	headers: { &#10;		origenTransaccion: "salesforce-xapi-services" &#10;	}&#10;}]' />
			</munit:set-event>
			<flow-ref doc:name="Flow-ref to post:\v1\sva:application\json:service-papi-services-config" doc:id="8edcb7a0-8173-4556-93dc-8a2580084d90" name="post:\v1\sva:application\json:service-papi-services-config" />
		</munit:execution>
		<munit:validation >
			<munit-tools:assert-that doc:name="Assert that" doc:id="c892863a-e4e7-48ed-94e5-d86a87f9854c" expression="#[payload]" is="#[MunitTools::notNullValue()]" />
		</munit:validation>
	</munit:test>


</mule>
