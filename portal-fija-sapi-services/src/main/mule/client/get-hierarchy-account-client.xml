<?xml version="1.0" encoding="UTF-8"?>

<mule xmlns:ee="http://www.mulesoft.org/schema/mule/ee/core" xmlns:http="http://www.mulesoft.org/schema/mule/http"
	xmlns="http://www.mulesoft.org/schema/mule/core"
	xmlns:doc="http://www.mulesoft.org/schema/mule/documentation" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://www.mulesoft.org/schema/mule/core http://www.mulesoft.org/schema/mule/core/current/mule.xsd
http://www.mulesoft.org/schema/mule/http http://www.mulesoft.org/schema/mule/http/current/mule-http.xsd
http://www.mulesoft.org/schema/mule/ee/core http://www.mulesoft.org/schema/mule/ee/core/current/mule-ee.xsd">
	<sub-flow name="get-hierarchy-account-client" doc:id="37803092-f5fd-4a66-8397-208b497822d5" >
		<try doc:name="Try" doc:id="e15ee8fe-910c-41cb-a922-671e3a39ad9a" >
			<async doc:name="Async" doc:id="800a6251-9424-4bbd-8322-e610187ad158" >
				<flow-ref doc:name="Call logger before" doc:id="c9936db9-4c07-47e3-ac73-34e944c6184a" name="loggin-client-call"/>
			</async>
			<http:request method="POST" doc:name="Call WS Portal Fija" doc:id="7e74e752-f246-4722-8168-10a65e952c0f" config-ref="HTTP_Request_configuration_portal" path="${portal-fija-client.path}">
			<http:headers><![CDATA[#[output application/java
---
{
	"Content-Type" : p('content-type')
}]]]></http:headers>
		</http:request>
		<async doc:name="Async" doc:id="ca34e180-ae6d-4507-b8f7-7f73e499c7d2" >
				<flow-ref doc:name="Call logger after" doc:id="490313b0-ad2d-461d-8927-e65f45265836" name="loggin-client-call"/>
			</async>
			<error-handler >
				<on-error-continue enableNotifications="true" logException="true" doc:name="On Error Continue" doc:id="c0a277c9-ca7a-411c-80e6-d5db5dce6040" type="HTTP:INTERNAL_SERVER_ERROR">
					<ee:transform doc:name="Error" doc:id="fe92b587-580d-4ab0-b31a-0a195450f25c" >
						<ee:message >
							<ee:set-payload ><![CDATA[%dw 2.0
output application/json
---
error.muleMessage.typedValue]]></ee:set-payload>
						</ee:message>
					</ee:transform>
				</on-error-continue>
			</error-handler>
		</try>
	</sub-flow>
</mule>
