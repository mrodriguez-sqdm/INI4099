<?xml version="1.0" encoding="UTF-8"?>

<mule xmlns:ee="http://www.mulesoft.org/schema/mule/ee/core" xmlns:db="http://www.mulesoft.org/schema/mule/db"
	xmlns="http://www.mulesoft.org/schema/mule/core"
	xmlns:doc="http://www.mulesoft.org/schema/mule/documentation" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://www.mulesoft.org/schema/mule/core http://www.mulesoft.org/schema/mule/core/current/mule.xsd
http://www.mulesoft.org/schema/mule/db http://www.mulesoft.org/schema/mule/db/current/mule-db.xsd
http://www.mulesoft.org/schema/mule/ee/core http://www.mulesoft.org/schema/mule/ee/core/current/mule-ee.xsd">
	<sub-flow name="get-document-homologation" doc:id="fea07a33-4905-4328-b4d0-24a26fa6d934" >
		<async doc:name="Async" doc:id="c667677f-7481-4de5-ac1f-578f503edc14" >
			<flow-ref doc:name="Call logger before" doc:id="7da9450f-799b-4b0f-9f7a-2bb0cbccc126" name="loggin-client-call" />
		</async>
		<db:select doc:name="Select" doc:id="12b9c216-3266-4eb6-9553-0a13e9b580ed" config-ref="Database_Config_Oracle_Log" >
			<db:sql ><![CDATA[SELECT VALOR_HOMOLOGADO FROM CATALOGO WHERE CATALOGO = :catalogo AND VALOR_ENTRADA = :valor_entrada]]></db:sql>
			<db:input-parameters ><![CDATA[#[{
	catalogo: p('oracle-db-logs.catalogo'),
	valor_entrada: vars.documentType
}]]]></db:input-parameters>
		</db:select>
		<async doc:name="Async" doc:id="97f12e38-47a5-4e6a-b027-14003ef750ef" >
			<flow-ref doc:name="Call logger after" doc:id="8f6e8004-c172-4c07-a46e-5633ad89ed3b" name="loggin-client-call" />
		</async>
	</sub-flow>
	<sub-flow name="get-homologation-client" doc:id="c43f0a3d-5f69-4f03-8ca5-6efe252e23ad" >
		<async doc:name="Async" doc:id="c35cb51e-ca06-4fd0-b1d5-a910973ef1f5">
			<flow-ref doc:name="Call logger before" doc:id="7947c7e4-3f21-4afc-a7c2-53942b6d1081" name="loggin-client-call" />
		</async>
		<db:select doc:name="Select" doc:id="954dfc43-2c61-459a-ac7c-3728abcc9478" config-ref="Database_Config_Oracle_Log" >
			<db:sql ><![CDATA[SELECT * FROM CATALOGO WHERE CATALOGO = :catalogo AND VALOR_ENTRADA = :valor_entrada]]></db:sql>
			<db:input-parameters ><![CDATA[#[{
	catalogo: vars.catalog,
	valor_entrada: vars.genericValue
}]]]></db:input-parameters>
		</db:select>
		<async doc:name="Async" doc:id="31c31ab8-a550-463a-b4d8-3657360d17ce" >
			<flow-ref doc:name="Call logger after" doc:id="62895379-96a6-4ec0-a0fe-f2192d88f6cc" name="loggin-client-call" />
		</async>
	</sub-flow>
	<sub-flow name="post-nonStandardAddress-client" doc:id="ae2a70c4-23b4-4ab0-9cef-b68dcfe67831" >
		<async doc:name="Async" doc:id="bf527ab1-717b-4871-9648-fc8fd4e9aea8" >
			<flow-ref doc:name="Call logger before" doc:id="2b8cac26-1eaf-4f6a-8695-472627cf10da" name="loggin-client-call" />
		</async>
		<db:insert doc:name="Insert" doc:id="df4ed97c-e578-40d9-b62b-4d0be06cd67d" config-ref="Database_Config_Oracle_Log">
			<db:sql ><![CDATA[INSERT INTO DIR_NO_NORMALIZADAS (DIRECCION) VALUES (:direccion)]]></db:sql>
			<db:input-parameters ><![CDATA[#[{
	direccion: vars.address
}]]]></db:input-parameters>
		</db:insert>
		<async doc:name="Async" doc:id="58b5670a-6b08-472d-8693-51057483bb89" >
			<flow-ref doc:name="Call logger after" doc:id="5e682ed0-acda-4844-af03-6429241d4311" name="loggin-client-call" />
		</async>
	</sub-flow>
	<sub-flow name="get-nonStandardAddressById-client" doc:id="ea6f2733-a034-4e7c-b2cf-668534cc6743" >
		<async doc:name="Async" doc:id="6e749097-11a3-44b7-b748-4b5868c1067a" >
			<flow-ref doc:name="Call logger before" doc:id="4a1adfc4-5a65-4314-8d49-0eb6ed215b76" name="loggin-client-call" />
		</async>
		<db:select doc:name="Select" doc:id="06be18c0-0360-487b-8f93-d5dff554c2c5" config-ref="Database_Config_Oracle_Log" >
			<db:sql ><![CDATA[SELECT DIRECCION FROM DIR_NO_NORMALIZADAS WHERE DIRECCION = :direccion]]></db:sql>
			<db:input-parameters ><![CDATA[#[{
	direccion: vars.address
}]]]></db:input-parameters>
		</db:select>
		<async doc:name="Async" doc:id="af60f77c-5051-401c-961b-05c2b6f6fab0" >
			<flow-ref doc:name="Call logger after" doc:id="1f60c890-ad85-47cd-84e2-0c6cd42916c8" name="loggin-client-call" />
		</async>
	</sub-flow>
	<sub-flow name="get-specialMunicipalities-client" doc:id="e6b4559e-b817-4416-8758-bbfcd75481f8" >
		<async doc:name="Async" doc:id="6d402083-0e56-4092-a6d1-e99d62c42244" >
			<flow-ref doc:name="Call logger before" doc:id="cfdb0318-213a-42de-9ceb-8dd941a63e96" name="loggin-client-call" />
		</async>
		<db:select doc:name="Select" doc:id="8a639d9e-9266-48ba-949a-10127421ca34" config-ref="Database_Config_Oracle_Log" >
			<db:sql ><![CDATA[SELECT VALUE 
FROM SPECIAL_CODES 
WHERE CODE = :municipioCodes AND ENABLED = :active]]></db:sql>
			<db:input-parameters ><![CDATA[#[{
	municipioCodes: p('oracle-db-normalize.specialMunicipiosCode'),
	active: 1
}]]]></db:input-parameters>
		</db:select>
		<async doc:name="Async" doc:id="9cd2338a-1899-4a9a-b3ca-f4a3b50f6313" >
			<flow-ref doc:name="Call logger after" doc:id="bf5ecebc-4a24-4f3a-a7af-5e0fbba24341" name="loggin-client-call" />
		</async>
	</sub-flow>
</mule>
