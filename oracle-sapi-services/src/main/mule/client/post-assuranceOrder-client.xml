<?xml version="1.0" encoding="UTF-8"?>

<mule xmlns:http="http://www.mulesoft.org/schema/mule/http" xmlns="http://www.mulesoft.org/schema/mule/core"
	xmlns:doc="http://www.mulesoft.org/schema/mule/documentation"
	xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://www.mulesoft.org/schema/mule/core http://www.mulesoft.org/schema/mule/core/current/mule.xsd
http://www.mulesoft.org/schema/mule/http http://www.mulesoft.org/schema/mule/http/current/mule-http.xsd">
	<sub-flow name="post-assuranceOrder-clientSub_Flow" doc:id="58ca3878-ce26-4875-87a8-e7961e998b39" >
		<async doc:name="Async" doc:id="bf923bc7-db6f-4f82-adb7-bd5e2ae084ea" >
			<flow-ref doc:name="Call logger before" doc:id="bfc9d5dd-22c1-4657-b403-05db76a02c5f" name="loggin-client-call"/>
		</async>
		<http:request method="POST" doc:name="Call Oracle OCS WS" doc:id="0143af39-eadb-4dea-9575-92a5e3091e16" config-ref="HTTP_Request_configuration_oracle_ocs" path="#[p('oracle-ocs.createAssuranceOrder.path')]">

					<http:headers ><![CDATA[#[output application/java
---
{
	"Authorization" : "Basic " ++ vars.authString
}]]]></http:headers>

		</http:request>
		<async doc:name="Async" doc:id="60d1b3e6-c9c7-4f1a-9a8c-0b0116217880" >
			<flow-ref doc:name="Call logger after" doc:id="4ffff67f-4f33-4064-b882-625b0ec7df46" name="loggin-client-call"/>
		</async>
	</sub-flow>
	<sub-flow name="put-assuranceOrder-clientSub_Flow" doc:id="bdff5b2d-e114-4389-ba2d-381b24cb55d9" >
		<async doc:name="Async" doc:id="67d6c4b2-ba3f-4b7e-9cf7-ecad8d49702f" >
			<flow-ref doc:name="Call logger before" doc:id="0e88b0a9-1722-48f6-ad9e-38f4c6281991" name="loggin-client-call" />
		</async>
		<http:request method="PUT" doc:name="Call Oracle OCS WS" doc:id="1b2dbca1-4c7a-4f35-862c-42b4bfe7a1b1" config-ref="HTTP_Request_configuration_oracle_ocs" path="#[p('oracle-ocs.createAssuranceOrder.path_put')]" >
			<http:headers ><![CDATA[#[output application/java
---
{
	"Authorization" : "Basic " ++ vars.authString,
	"Content-Type" : "application/octet-stream",
	"Content-Disposition" : "attachment; filename=" ++ vars.inputPayload.nombre_archivo
}]]]></http:headers>
			<http:uri-params ><![CDATA[#[output application/java
---
{
	"Activity_ID" : vars.response.activityId
}]]]></http:uri-params>
		</http:request>
		<async doc:name="Async" doc:id="ee91514b-f1af-4d0c-8872-be8ae47729d3" >
			<flow-ref doc:name="Call logger after" doc:id="7124823e-df25-4808-831b-e771f0d0d6d3" name="loggin-client-call" />
		</async>
	</sub-flow>
</mule>
