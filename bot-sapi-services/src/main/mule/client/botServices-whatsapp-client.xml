<?xml version="1.0" encoding="UTF-8"?>

<mule xmlns:http="http://www.mulesoft.org/schema/mule/http" xmlns="http://www.mulesoft.org/schema/mule/core"
	xmlns:doc="http://www.mulesoft.org/schema/mule/documentation"
	xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://www.mulesoft.org/schema/mule/core http://www.mulesoft.org/schema/mule/core/current/mule.xsd
http://www.mulesoft.org/schema/mule/http http://www.mulesoft.org/schema/mule/http/current/mule-http.xsd">
	<sub-flow name="botServices-whatsapp-getbyphone-clientSub_Flow" doc:id="118fc864-c55c-456a-8488-666faa082a3f" >
		<async doc:name="Async" doc:id="7a64d5d6-25ac-4e1d-b7bf-a84b3d5cb578" >
			<flow-ref doc:name="Call Logger" doc:id="cfd875ce-ee96-4d31-9103-0d316a1116b5" name="loggin-client-call" />
		</async>
		<http:request method="POST" doc:name="Call bot whatsapp getbyphone" doc:id="45c6d464-218e-420b-bf43-50cfe30945bd" config-ref="HTTP_Request_configuration_botServices" path="${botServices.whatsappGetByPhone.path}" responseTimeout="#[p('botServices.responseTimeout')]" >
			<http:body ><![CDATA[#[vars.initialPayload]]]></http:body>
			<http:headers ><![CDATA[#[output application/java
---
{
	"x_civ_request" : vars.headers."x_civ_request",
	"Authorization" : "Bearer " ++ vars.generatedToken.WSResponseBody.SecurityToken
}]]]></http:headers>
		</http:request>
		<async doc:name="Async1" doc:id="9095676a-259e-43bf-8825-63e7db0dd51e" >
			<flow-ref doc:name="Call Logger" doc:id="1a58d452-cc2c-4cd7-bf99-d6e3d0c2ca28" name="loggin-client-call" />
		</async>
	</sub-flow>
	<sub-flow name="botServices-whatsapp-update-clientSub_Flow" doc:id="cc55f9f8-1f5a-4a54-bd10-401a5b3e181c" >
		<async doc:name="Async" doc:id="0a335570-0337-4e4b-84b9-caa259588a28" >
			<flow-ref doc:name="Call Logger" doc:id="e0c5f504-a71d-451c-b175-341572027b81" name="loggin-client-call" />
		</async>
		<http:request method="POST" doc:name="Call bot whatsapp update" doc:id="75453744-893a-406d-bbc0-9816cbaaa7b5" config-ref="HTTP_Request_configuration_botServices" path="${botServices.whatsappUpdate.path}" responseTimeout="#[p('botServices.responseTimeout')]" >
			<http:body ><![CDATA[#[vars.initialPayload]]]></http:body>
			<http:headers ><![CDATA[#[output application/java
---
{
	"x_civ_request" : vars.headers."x_civ_request",
	"Authorization" : "Bearer " ++ vars.generatedToken.WSResponseBody.SecurityToken
}]]]></http:headers>
		</http:request>
		<async doc:name="Async1" doc:id="3a23d6a6-e6d8-4330-bb0a-3238ea0715c9" >
			<flow-ref doc:name="Call Logger" doc:id="91c5b4a1-262f-4961-9412-444cb73c0f60" name="loggin-client-call" />
		</async>
	</sub-flow>
</mule>
