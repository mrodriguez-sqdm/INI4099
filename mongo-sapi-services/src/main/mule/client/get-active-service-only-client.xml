<?xml version="1.0" encoding="UTF-8"?>

<mule xmlns:mongo="http://www.mulesoft.org/schema/mule/mongo" xmlns="http://www.mulesoft.org/schema/mule/core"
	xmlns:doc="http://www.mulesoft.org/schema/mule/documentation"
	xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://www.mulesoft.org/schema/mule/core http://www.mulesoft.org/schema/mule/core/current/mule.xsd
http://www.mulesoft.org/schema/mule/mongo http://www.mulesoft.org/schema/mule/mongo/current/mule-mongo.xsd">
	<sub-flow name="get-active-service-only-clientSub_Flow" doc:id="8237116e-6511-443e-ae1a-c058ca15ddde" >
		<async doc:name="Async" doc:id="1ef3e999-6563-4bae-aec9-7fd736266d98">
			<flow-ref doc:name="Call logger before" doc:id="8f760cd5-4e2d-427b-aac1-82959af234db" name="loggin-client-call" />
		</async>
		<mongo:find-documents collectionName="${mongoDb-mdm.billing.activeService.collection}" fields="," doc:name="Find documents in active service" doc:id="cff655da-25fc-4495-836f-de4f0c9ce27f" config-ref="mdm_db_Config">
			<mongo:query><![CDATA[#[output application/json
---
{ 
    "Numero_Conexion": vars.id ,
    "Producto" : "TELEFONIA MOVIL (LTE)",
    "Estado" : {
    	"\$in" : [
    		"Activo",
    		"Suspendido"
    	]
    }
}]]]></mongo:query>
		</mongo:find-documents>
		<async doc:name="Async" doc:id="abf4424f-e48b-4f4e-be66-838a93fb382c">
			<flow-ref doc:name="Call logger after" doc:id="b76046cc-9dc0-4071-b571-b2353f43a6c3" name="loggin-client-call" />
		</async>
	</sub-flow>
</mule>
