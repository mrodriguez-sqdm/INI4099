<?xml version="1.0" encoding="UTF-8"?>

<mule xmlns:ee="http://www.mulesoft.org/schema/mule/ee/core" xmlns:mongo="http://www.mulesoft.org/schema/mule/mongo"
	xmlns="http://www.mulesoft.org/schema/mule/core"
	xmlns:doc="http://www.mulesoft.org/schema/mule/documentation" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://www.mulesoft.org/schema/mule/core http://www.mulesoft.org/schema/mule/core/current/mule.xsd
http://www.mulesoft.org/schema/mule/mongo http://www.mulesoft.org/schema/mule/mongo/current/mule-mongo.xsd
http://www.mulesoft.org/schema/mule/ee/core http://www.mulesoft.org/schema/mule/ee/core/current/mule-ee.xsd">
	<sub-flow name="mongo-portal-unificado-usuarioSub_Flow" doc:id="38edfc53-ac63-4813-a99f-e28abb5df3f5" >
		<async doc:name="Async" doc:id="20c6e55d-4054-46c1-89af-9e13922ebba5" >
			<flow-ref doc:name="Call logger before audits-mongo" doc:id="fa8af5c4-121a-49d3-8665-1442a521ef60" name="audits-mongo-log-before" />
		</async>
		<mongo:find-documents collectionName="${mongoDb-mdm.ecommerce.collection-users}" fields="," doc:name="Find documents" doc:id="7ad5225a-46ff-4a7b-a6fc-8324ea46e999" config-ref="mdm_db_Config" >
			<mongo:query ><![CDATA[#[%dw 2.0
output application/json
---
{
	TipoIdentificacion: vars.TipoIdentificacion,
	NumIdentificacion: vars.NumIdentificacion
}]]]></mongo:query>
		</mongo:find-documents>
		<async doc:name="Async" doc:id="160f37ba-efec-489d-b5ad-71c15fce774f" >
			<flow-ref doc:name="Call logger after audits-mongo" doc:id="fe712e86-4ca9-4f02-9b04-602b4fb86973" name="audits-mongo-log-after" />
		</async>
		<ee:transform doc:name="Set Output" doc:id="ccd5e315-5a41-4e95-ba02-cecedb12d858">
			<ee:message>
				<ee:set-payload><![CDATA[%dw 2.0
output application/json
---
payload]]></ee:set-payload>
			</ee:message>
		</ee:transform>
	</sub-flow>
</mule>
