<?xml version="1.0" encoding="UTF-8"?>

<mule xmlns:mongo="http://www.mulesoft.org/schema/mule/mongo" xmlns="http://www.mulesoft.org/schema/mule/core"
	xmlns:doc="http://www.mulesoft.org/schema/mule/documentation"
	xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://www.mulesoft.org/schema/mule/core http://www.mulesoft.org/schema/mule/core/current/mule.xsd
http://www.mulesoft.org/schema/mule/mongo http://www.mulesoft.org/schema/mule/mongo/current/mule-mongo.xsd">
	<sub-flow name="get-billingAccountMDM-clientSub_Flow" doc:id="be5e4aea-9584-482c-8b11-308d2ba0f885" >
		<choice doc:name="Choice" doc:id="175ad975-e167-466d-ae5f-33a990155207" >
			<when expression='#[vars.logs == "mongo"]'>
				<async doc:name="Async" doc:id="12dc5ee0-c085-40c1-b437-4211ebbc29a3" >
					<flow-ref doc:name="Call logger before" doc:id="60973bbb-806d-4d19-9f06-1b39c24140bb" name="audits-mongo-log-before" />
				</async>
			</when>
			<otherwise >
				<async doc:name="Async" doc:id="5f98d485-4415-4ec8-bba5-56f9fec3b17b">
			<flow-ref doc:name="Call logger after" doc:id="74934f4b-e25b-4a7e-b537-30b35421a3ce" name="loggin-client-call" />
		</async>
			</otherwise>
		</choice>
		<mongo:find-documents collectionName="${mongoDb-mdm.tibco.collection-ctaFact}" fields="," doc:name="Cuentas facturacion" doc:id="39a9ee3c-3b83-4449-95dd-e8821906dde3" config-ref="mdm_db_Config">
			<mongo:query ><![CDATA[#["{'Cuenta_Facturacion': '" ++ vars.idCuentaFacturacion ++"'}"]]]></mongo:query>
		</mongo:find-documents>
		<choice doc:name="Choice1" doc:id="032a0fbe-5898-4334-aad7-dd4fd46942d8" >
			<when expression='#[vars.logs == "mongo"]' >
				<async doc:name="Async" doc:id="1d6879e2-dcaf-4679-b51f-73c67e3e5717" >
					<flow-ref doc:name="Call logger after" doc:id="6c6a6496-1dab-4496-b76c-6244910978f0" name="audits-mongo-log-after" />
				</async>
			</when>
			<otherwise >
				<async doc:name="Async" doc:id="ea6d1136-8c8f-4965-8a89-5caf3546f9d4">
			<flow-ref doc:name="Call logger after" doc:id="f47b0767-5edb-492d-92b4-12d63ee76261" name="loggin-client-call" />
		</async>
			</otherwise>
		</choice>
	</sub-flow>
</mule>
