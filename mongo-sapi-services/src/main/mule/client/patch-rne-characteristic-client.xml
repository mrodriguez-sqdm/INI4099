<?xml version="1.0" encoding="UTF-8"?>

<mule xmlns:ee="http://www.mulesoft.org/schema/mule/ee/core" xmlns:mongo="http://www.mulesoft.org/schema/mule/mongo"
	xmlns="http://www.mulesoft.org/schema/mule/core"
	xmlns:doc="http://www.mulesoft.org/schema/mule/documentation" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://www.mulesoft.org/schema/mule/core http://www.mulesoft.org/schema/mule/core/current/mule.xsd
http://www.mulesoft.org/schema/mule/mongo http://www.mulesoft.org/schema/mule/mongo/current/mule-mongo.xsd
http://www.mulesoft.org/schema/mule/ee/core http://www.mulesoft.org/schema/mule/ee/core/current/mule-ee.xsd">
	<sub-flow name="get-characteristic-clientSub_Flow" doc:id="274f88fb-1438-4cfa-920e-387f700fbac5" >
		<async doc:name="Async" doc:id="157f8129-32fb-42a2-a0d6-1c0840461aa2">
			<flow-ref doc:name="Call logger before" doc:id="256c447d-d469-446d-80c3-857b723bfd42" name="loggin-client-call" />
		</async>
		<mongo:find-documents doc:name="Find documents" doc:id="27e1f99e-be70-41da-8cac-ae497257e7bf" config-ref="mdm_db_Config" collectionName="${mongoDb-mdm.mayoristas.collection-rneMoviles}" fields=",">
			<mongo:query><![CDATA[#[{ 
	'Integration_Id': vars.integrationId
}]]]></mongo:query>
		</mongo:find-documents>
		<async doc:name="Async" doc:id="635745e7-90d6-4969-b509-927c72ebdc5a">
			<flow-ref doc:name="Call logger after" doc:id="c3202635-f686-4d1f-86fa-581394c50f12" name="loggin-client-call" />
		</async>
		<ee:transform doc:name="Transform Message" doc:id="62be82e0-0294-4415-b2b8-9a246f77f0c5">
			<ee:message>
				<ee:set-payload><![CDATA[%dw 2.0
output application/json
---
payload]]></ee:set-payload>
			</ee:message>
		</ee:transform>
	</sub-flow>
	<sub-flow name="update-characteristic-clientSub_Flow" doc:id="5f493558-82e8-4c6b-a144-a6aeba704e74" >
		<async doc:name="Async" doc:id="a9fb5cdc-78b5-4a8f-bf20-4eb8273b179a">
			<flow-ref doc:name="Call logger before" doc:id="eeab34aa-2e7c-4154-85c3-252b757bd16c" name="loggin-client-call" />
		</async>
		<mongo:update-documents doc:name="Update documents" doc:id="deb6197a-9b5f-4fd8-a381-1ab290475e43" config-ref="mdm_db_Config" collectionName="${mongoDb-mdm.mayoristas.collection-rneMoviles}">
			<mongo:query ><![CDATA[#[%dw 2.0
output application/json
---
{ 
	'Integration_Id': vars.integrationId
}]]]></mongo:query>
			<mongo:content-to-update ><![CDATA[#[{"Caracteristica_Servicio": payload}]]]></mongo:content-to-update>
		
</mongo:update-documents>
		<async doc:name="Async" doc:id="aa0d7cc5-354c-4976-af07-da098b97b7e4" >
			<flow-ref doc:name="Call logger after" doc:id="600340bf-7712-4b4c-a05a-f2dc40be281c" name="loggin-client-call" />
		</async>
	</sub-flow>
</mule>
