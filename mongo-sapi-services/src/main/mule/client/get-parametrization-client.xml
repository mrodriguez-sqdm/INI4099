<?xml version="1.0" encoding="UTF-8"?>

<mule xmlns:mongo="http://www.mulesoft.org/schema/mule/mongo" xmlns="http://www.mulesoft.org/schema/mule/core"
	xmlns:doc="http://www.mulesoft.org/schema/mule/documentation"
	xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://www.mulesoft.org/schema/mule/core http://www.mulesoft.org/schema/mule/core/current/mule.xsd
http://www.mulesoft.org/schema/mule/mongo http://www.mulesoft.org/schema/mule/mongo/current/mule-mongo.xsd">
	<sub-flow name="get-parametrization-clientSub_Flow" doc:id="e58e51c6-aa1e-4447-9b02-30075ee55055" >
		<async doc:name="Async" doc:id="9430856b-f4ee-497e-a054-61bb4e7c762f" >
			<flow-ref doc:name="Call logger before" doc:id="1ce37c7b-8789-44fb-b86e-8e2a04b9f251" name="loggin-client-call" />
		</async>
		<mongo:find-documents doc:name="Find documents in mongo" doc:id="6a92c6eb-6265-4332-bd10-49a7c7d333c1" config-ref="mdm_parametrization" fields="," collectionName="${mongoDb-mdm.billing.parametrization-collection}">
			<mongo:query ><![CDATA[#[output application/json
---
{
	"Code": attributes.uriParams.code
}]]]></mongo:query>
		</mongo:find-documents>
		<async doc:name="Async" doc:id="241ce372-6056-4e1e-989d-8f4f4c836062" >
			<flow-ref doc:name="Call logger after" doc:id="3f7cf13a-b9ef-4ba6-b4db-4f18639e4d81" name="loggin-client-call" />
		</async>
	</sub-flow>
	<sub-flow name="get-parametrization-valor-clientSub_Flow" doc:id="d0deb6c7-ffdf-4d60-8a54-125bacc538be" >
		<async doc:name="Async" doc:id="89611b71-88e6-4ce9-8bea-8392f69427e4" >
			<flow-ref doc:name="Call logger before" doc:id="f665a1f8-afee-4c33-9945-81f0232a0007" name="loggin-client-call" />
		</async>
		<mongo:find-documents collectionName="${mongoDb-mdm.otiniciativas.collection-parametersMs}" fields="," doc:name="Find documents " doc:id="fb742309-833f-4a9e-9a69-b34cec76830e" config-ref="mdm_db_Config">
			<mongo:query><![CDATA[#[%dw 2.0
output application/json
---
{
	estado: true,
	parametro: vars.parametro
}]]]></mongo:query>
		</mongo:find-documents>
		<async doc:name="Async" doc:id="5589257c-d77a-4ac2-aa43-468fd7065f32" >
			<flow-ref doc:name="Call logger after" doc:id="8c8e3a10-e961-4890-8dfe-41fa2c89c7df" name="loggin-client-call" />
		</async>
	</sub-flow>
</mule>
