<?xml version="1.0" encoding="UTF-8"?>

<mule xmlns:mongo="http://www.mulesoft.org/schema/mule/mongo" xmlns="http://www.mulesoft.org/schema/mule/core"
	xmlns:doc="http://www.mulesoft.org/schema/mule/documentation"
	xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://www.mulesoft.org/schema/mule/core http://www.mulesoft.org/schema/mule/core/current/mule.xsd
http://www.mulesoft.org/schema/mule/mongo http://www.mulesoft.org/schema/mule/mongo/current/mule-mongo.xsd">
	<sub-flow name="put-billingAccount-clientSub_Flow" doc:id="2f88a358-ffa3-429c-904c-1160c39ff8dc" >
		<async doc:name="Async" doc:id="994fa889-a708-4c2f-8937-6c67e2d83ce6" >
			<flow-ref doc:name="Call logger before" doc:id="0270fbbd-61b0-4f45-aee1-2610a411310e" name="loggin-client-call"/>
		</async>
		<choice doc:name="Choice" doc:id="fbd354f2-23cd-470e-882e-29af30647652" >
			<when expression="#[vars.ordenOM != null]">
				<mongo:update-documents collectionName="#[p('mongoDb.collectionCtaFact')]" doc:name="Update cuenta Facturacion by ordenOM" doc:id="75b864f0-b0d3-43ba-83e4-885389c0615f" config-ref="or_db_config">
			<mongo:query><![CDATA[#["{ 'ordenOM': '" ++ vars.ordenOM ++ "'}"]]]></mongo:query>
		</mongo:update-documents>
			</when>
			<otherwise >
				<mongo:update-documents collectionName="#[p('mongoDb.collectionCtaFact')]" doc:name="Update cuenta Facturacion by idCuentaFacturacion" doc:id="bb185bfd-621e-4700-906d-96aa297c78c6" config-ref="or_db_config">
					<mongo:query><![CDATA[#["{ 'idCuentaFacturacion': '" ++ vars.idCuentaFacturacion ++ "'}"]]]></mongo:query>
				</mongo:update-documents>
			</otherwise>
		</choice>
		<async doc:name="Async" doc:id="78db9bf6-492d-48d3-aadc-44ed70eca06c" >
			<flow-ref doc:name="Call logger after" doc:id="afb8109d-d208-4069-86c5-e96e083f3bff" name="loggin-client-call"/>
		</async>
	</sub-flow>
</mule>
