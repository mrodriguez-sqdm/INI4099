<?xml version="1.0" encoding="UTF-8"?>

<mule xmlns:mongo="http://www.mulesoft.org/schema/mule/mongo" xmlns="http://www.mulesoft.org/schema/mule/core"
	xmlns:doc="http://www.mulesoft.org/schema/mule/documentation"
	xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://www.mulesoft.org/schema/mule/core http://www.mulesoft.org/schema/mule/core/current/mule.xsd
http://www.mulesoft.org/schema/mule/mongo http://www.mulesoft.org/schema/mule/mongo/current/mule-mongo.xsd">
	<sub-flow name="post-interaction-clientSub_Flow" doc:id="6be4de0b-0a23-4909-84a4-ce4dd356a679" >
		<async doc:name="Async" doc:id="9a182f6b-62eb-4cd2-ae2f-ca410627d2a8" >
			<flow-ref doc:name="Call logger before" doc:id="7a4a73eb-8456-443c-b258-8181344792e9" name="loggin-client-call" />
		</async>
		<choice doc:name="Choice" doc:id="aeeeaf0d-93c0-4841-b7b3-ec4f60f67d8f" >
			<when expression='#[attributes.headers.source == "portal-xapi-services"]'>
				<mongo:insert-document collectionName="${mongoDb-mdm.otiniciativas.collection-interaction-hcm}" doc:name="InsertarInteraccion" doc:id="ce06ea7e-4db2-4dff-b136-6e92ec4c49b9" config-ref="mdm_db_Config" />
			</when>
			<otherwise >
				<mongo:insert-document collectionName="${mongoDb-mdm.otiniciativas.collection-interaction}" doc:name="InsertarInteraccion" doc:id="3e7d171e-fcbb-446c-916d-f3822ef533fe" config-ref="mdm_db_Config" />
			</otherwise>
		</choice>
		<async doc:name="Async" doc:id="ddcc901e-ed28-4f62-ad41-072c041f8ab5" >
			<flow-ref doc:name="Call logger after" doc:id="bfde34a0-5dc4-4a1c-831b-78ff070f4b0f" name="loggin-client-call" />
		</async>
	</sub-flow>
</mule>
