<?xml version="1.0" encoding="UTF-8"?>

<mule xmlns:ee="http://www.mulesoft.org/schema/mule/ee/core" xmlns:mongo="http://www.mulesoft.org/schema/mule/mongo"
	xmlns="http://www.mulesoft.org/schema/mule/core"
	xmlns:doc="http://www.mulesoft.org/schema/mule/documentation" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://www.mulesoft.org/schema/mule/core http://www.mulesoft.org/schema/mule/core/current/mule.xsd
http://www.mulesoft.org/schema/mule/mongo http://www.mulesoft.org/schema/mule/mongo/current/mule-mongo.xsd
http://www.mulesoft.org/schema/mule/ee/core http://www.mulesoft.org/schema/mule/ee/core/current/mule-ee.xsd">
	<sub-flow name="insert-billingServices-clientSub_Flow" doc:id="5e60f679-41df-456b-8bb5-ebd4c1e03789" >
		<async doc:name="Async" doc:id="27cbd861-a27b-4ebf-a214-59e92c4dbcbf" >
			<flow-ref doc:name="Call logger before" doc:id="ed4187c9-3669-4e79-8c45-f767e0a68376" name="loggin-client-call"/>
		</async>
		<mongo:insert-document doc:name="Insert billingServices" doc:id="fd2111f1-fda5-44e4-8362-96ded7de9374" config-ref="mdm_db_Config" collectionName="${mongoDb-mdm.tibco.collection}">
			<mongo:document ><![CDATA[#[{
    "IdentificadorPeticion" : payload.petitionId,
    "SistemaOrigen" : payload.sourceSystem,
    "TipoOperacion" : payload.operationType,
    "Peticion" : payload.petition,
    "FechaPeticion" : payload.petitionDate,
    "IP" : payload.ip,
    "Observaciones" : payload.observations
}]]]></mongo:document>
		</mongo:insert-document>
		<async doc:name="Async" doc:id="22850d79-da28-4f5e-b679-1638e2cf550a" >
			<flow-ref doc:name="Call logger after" doc:id="b3bb1805-cabf-4d13-8b8c-bc46cb4b022c" name="loggin-client-call"/>
		</async>
	</sub-flow>
</mule>
