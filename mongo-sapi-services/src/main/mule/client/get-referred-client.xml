<?xml version="1.0" encoding="UTF-8"?>

<mule xmlns:ee="http://www.mulesoft.org/schema/mule/ee/core" xmlns:mongo="http://www.mulesoft.org/schema/mule/mongo"
	xmlns="http://www.mulesoft.org/schema/mule/core"
	xmlns:doc="http://www.mulesoft.org/schema/mule/documentation" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://www.mulesoft.org/schema/mule/core http://www.mulesoft.org/schema/mule/core/current/mule.xsd
http://www.mulesoft.org/schema/mule/mongo http://www.mulesoft.org/schema/mule/mongo/current/mule-mongo.xsd
http://www.mulesoft.org/schema/mule/ee/core http://www.mulesoft.org/schema/mule/ee/core/current/mule-ee.xsd">
	<sub-flow name="get-referred-client" doc:id="829b034d-7fe3-464e-bdec-d63f7dbdea4a" >
		<async doc:name="Async" doc:id="aaeaf21f-c294-42c1-9e1f-ecddf4fab4e2" >
			<flow-ref doc:name="Call logger before" doc:id="bd88f77f-2ffd-4394-9ed6-53b607467aea" name="audits-mongo-log-before"/>
		</async>
		<mongo:find-documents doc:name="Find documents" doc:id="0cc39851-83fd-4f65-a605-a857ef6da1eb" config-ref="mdm_db_Config" collectionName="${mongoDb-mdm.mayoristas.collection-referral}" fields=",">
			<mongo:query ><![CDATA[#["{'Tipo_Documento_Referido': '" ++ attributes.queryParams.tipoDocumento ++ "', 'Numero_Documento_Referido': '" ++ attributes.queryParams.numeroIdentificacion ++ "'}"]]]></mongo:query>
		</mongo:find-documents>
		<async doc:name="Async" doc:id="1bfcc077-8968-4284-98aa-2bbff2007099" >
			<flow-ref doc:name="Call logger after" doc:id="43bbf4b5-32e3-4d33-8a1d-91afcac131ee" name="audits-mongo-log-after"/>
		</async>
	</sub-flow>
</mule>
