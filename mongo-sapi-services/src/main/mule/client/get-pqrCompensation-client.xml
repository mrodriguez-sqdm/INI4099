<?xml version="1.0" encoding="UTF-8"?>

<mule xmlns:mongo="http://www.mulesoft.org/schema/mule/mongo" xmlns="http://www.mulesoft.org/schema/mule/core"
	xmlns:doc="http://www.mulesoft.org/schema/mule/documentation"
	xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://www.mulesoft.org/schema/mule/core http://www.mulesoft.org/schema/mule/core/current/mule.xsd
http://www.mulesoft.org/schema/mule/mongo http://www.mulesoft.org/schema/mule/mongo/current/mule-mongo.xsd">
	<sub-flow name="get-pqrCompensation-clientSub_Flow" doc:id="33be8608-657c-4dda-af78-0163ec27a374" >
		<async doc:name="Async" doc:id="47b9be9c-f13f-415d-84fa-6418e4be8db3" >
			<flow-ref doc:name="Call logger before" doc:id="58f95c79-436f-4086-88ae-db3dd1dd8c58" name="loggin-client-call" />
		</async>
		<mongo:find-documents doc:name="PQR compensations" doc:id="3e9ca3b1-948a-4bfe-a822-3a9dd41e1967" config-ref="mdm_db_Config" collectionName="${mongoDb-mdm.pqr.collection-compensations}" fields=",">
			<mongo:query ><![CDATA[#[output application/json
---
{
	("Tipo_Documento": attributes.queryParams.Tipo_Documento) if (!isEmpty(attributes.queryParams.Tipo_Documento)),
	("Numero_Documento": attributes.queryParams.Numero_Documento) if (!isEmpty(attributes.queryParams.Numero_Documento)),
	("Cuenta_Facturacion": attributes.queryParams.Cuenta_Facturacion) if (!isEmpty(attributes.queryParams.Cuenta_Facturacion))
}]]]></mongo:query>
		</mongo:find-documents>
		<async doc:name="Async" doc:id="8e83fb74-3ac8-40be-b206-decbdfac2933" >
			<flow-ref doc:name="Call logger after" doc:id="e5555722-2aaa-4d32-aae4-b8a172f262b3" name="loggin-client-call" />
		</async>
	</sub-flow>
</mule>
