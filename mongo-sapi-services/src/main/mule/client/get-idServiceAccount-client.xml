<?xml version="1.0" encoding="UTF-8"?>

<mule xmlns:ee="http://www.mulesoft.org/schema/mule/ee/core" xmlns:mongo="http://www.mulesoft.org/schema/mule/mongo"
	xmlns="http://www.mulesoft.org/schema/mule/core"
	xmlns:doc="http://www.mulesoft.org/schema/mule/documentation" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://www.mulesoft.org/schema/mule/core http://www.mulesoft.org/schema/mule/core/current/mule.xsd
http://www.mulesoft.org/schema/mule/mongo http://www.mulesoft.org/schema/mule/mongo/current/mule-mongo.xsd
http://www.mulesoft.org/schema/mule/ee/core http://www.mulesoft.org/schema/mule/ee/core/current/mule-ee.xsd">
	<sub-flow name="get-idServiceAccount-clientSub_Flow" doc:id="f3178991-cf48-4be8-a299-b10125212f44" >
		<async doc:name="Async" doc:id="699cc9ef-c18e-4de0-bc2c-3ea686c2b445" >
			<flow-ref doc:name="Call logger before" doc:id="627f323e-a8be-4a77-a0b9-62c4ca8ce7ea" name="loggin-client-call"/>
		</async>
		<mongo:find-documents doc:name="Get service by idServiceAccount" doc:id="6b65e20f-c3b8-4799-88d6-c87f5679c929" config-ref="mdm_db_Config" collectionName="${mongoDb-mdm.mayoristas.collection-services}" fields="," limit="1">
			<mongo:query ><![CDATA[#["{'Id_Cuenta_Servicio' : '" ++ vars.idServiceAccount ++ "'}"]]]></mongo:query>
		</mongo:find-documents>
		<async doc:name="Async" doc:id="350dd37b-3e18-4d95-ac18-df275c576d7a" >
			<flow-ref doc:name="Call logger after" doc:id="b3f69072-dfcc-4fc0-a310-273272ee2163" name="loggin-client-call"/>
		</async>
		<ee:transform doc:name="Transform Message" doc:id="d7545508-5118-4f42-a090-e8e3cf1a16fe" >
			<ee:message >
				<ee:set-payload ><![CDATA[%dw 2.0
output application/json
---
payload]]></ee:set-payload>
			</ee:message>
		</ee:transform>
	</sub-flow>
</mule>
