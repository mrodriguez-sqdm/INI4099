<?xml version="1.0" encoding="UTF-8"?>

<mule xmlns:mongo="http://www.mulesoft.org/schema/mule/mongo" xmlns:ee="http://www.mulesoft.org/schema/mule/ee/core"
	xmlns="http://www.mulesoft.org/schema/mule/core"
	xmlns:doc="http://www.mulesoft.org/schema/mule/documentation" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://www.mulesoft.org/schema/mule/core http://www.mulesoft.org/schema/mule/core/current/mule.xsd
http://www.mulesoft.org/schema/mule/ee/core http://www.mulesoft.org/schema/mule/ee/core/current/mule-ee.xsd
http://www.mulesoft.org/schema/mule/mongo http://www.mulesoft.org/schema/mule/mongo/current/mule-mongo.xsd">
	<sub-flow name="post-agreements-clientSub_Flow" doc:id="92fcf3d8-302a-4f10-b849-20b9948645a4" >
		<async doc:name="Async" doc:id="f7197b30-324f-4d9a-a9e2-0b2a889b0c13">
			<flow-ref doc:name="Call logger before" doc:id="5b1ac131-e0b2-4334-b262-a1b1a0bd4886" name="loggin-client-call" />
		</async>
		<mongo:insert-document collectionName="${mongoDb-mdm.otiniciativas.collection-acuerdos}" doc:name="Insert docs acuerdos" doc:id="b9a8d7eb-6881-4423-b344-7f26ed1ad7f3" config-ref="mdm_db_Config" />
		<async doc:name="Async" doc:id="4aa7b4db-b3ee-4fe0-869e-7d5f0cb98c41" >
			<flow-ref doc:name="Call logger before" doc:id="2bf72bff-80af-45cc-ba04-08a49802567f" name="loggin-client-call" />
		</async>
	</sub-flow>
	<sub-flow name="patch-agreements-clientSub_Flow" doc:id="e0f499a0-205d-42fc-a61e-13000baa3d6d" >
		<async doc:name="Async" doc:id="133c998f-1ad2-43cf-93b3-214465416ab4" >
			<flow-ref doc:name="Call logger before" doc:id="df6107da-226f-4851-8620-bb832cca71dd" name="loggin-client-call" />
		</async>
		<mongo:update-documents doc:name="Update docs acuerdos" doc:id="547821e4-9d90-49ec-bd8c-65e936dab18d" config-ref="mdm_db_Config" collectionName="${mongoDb-mdm.otiniciativas.collection-acuerdos}">
			<mongo:query><![CDATA[#["{'NumeroAcuerdo': '" ++ vars.acuerdoId ++ "','EstadoTramite': 'En Tramite'}"]]]></mongo:query>
		</mongo:update-documents>
		<async doc:name="Async" doc:id="1d0deaab-e568-4938-9cde-3ad17a066463" >
			<flow-ref doc:name="Call logger before" doc:id="fe348dcc-bc13-481a-87ca-770255ece4ec" name="loggin-client-call" />
		</async>
	</sub-flow>
	<sub-flow name="post-agreements-logs-clientSub_Flow" doc:id="0784c37e-ab67-4cea-8a2a-1ebe9d81dd19" >
		<async doc:name="Async" doc:id="8e5517ec-f030-4012-979d-ddece1a27c59" >
			<flow-ref doc:name="Call logger before" doc:id="0a2d3f68-f091-4b14-bc68-07a2ef87c5eb" name="loggin-client-call" />
		</async>
		<mongo:insert-document doc:name="Insert acuerdos logs" doc:id="b5ae97f6-e70a-4389-9e95-ce5febd9b79e" config-ref="mdm_db_Config" collectionName="${mongoDb-mdm.otiniciativas.collection-acuerdos-logs}" />
		<async doc:name="Async" doc:id="7b47a822-b123-4c12-a20d-c03293f1cdac" >
			<flow-ref doc:name="Call logger before" doc:id="3d8577b9-3ce9-4114-b712-3c25e5339543" name="loggin-client-call" />
		</async>
	</sub-flow>
	<sub-flow name="get-agreements-clientSub_Flow" doc:id="916796dc-60b3-424a-a16d-1d68a213576e" >
		<async doc:name="Async" doc:id="b034f4fe-02d2-43be-8fe2-8b9777080341" >
			<flow-ref doc:name="Call logger before" doc:id="108b7003-ced0-4eb3-8dfc-9d8f96dc8ab3" name="loggin-client-call" />
		</async>
		<mongo:find-documents doc:name="Find acuerdos" doc:id="64c3b306-9ccb-46d8-85bc-8192f9dc3d80" config-ref="mdm_db_Config" collectionName="${mongoDb-mdm.otiniciativas.collection-acuerdos}" fields=",">
			<mongo:query ><![CDATA[#["{'NumeroAcuerdo': '" ++ vars.acuerdoId ++ "'}"]]]></mongo:query>
		</mongo:find-documents>
		<async doc:name="Async1" doc:id="0a4f75ed-2f89-4e63-9f93-53bcc4a7c2fa" >
			<flow-ref doc:name="Call logger before" doc:id="73143c0c-4002-40e9-9627-fceb6bfb3447" name="loggin-client-call" />
		</async>
	</sub-flow>
</mule>
