<?xml version="1.0" encoding="UTF-8"?>

<mule xmlns:ee="http://www.mulesoft.org/schema/mule/ee/core" xmlns="http://www.mulesoft.org/schema/mule/core"
	xmlns:doc="http://www.mulesoft.org/schema/mule/documentation"
	xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://www.mulesoft.org/schema/mule/core http://www.mulesoft.org/schema/mule/core/current/mule.xsd
http://www.mulesoft.org/schema/mule/ee/core http://www.mulesoft.org/schema/mule/ee/core/current/mule-ee.xsd">
	<sub-flow name="put-orders-orchestrator" doc:id="634986a6-c39c-47f9-afc7-36712e9febd5" >
		<flow-ref doc:name="put-orders-client" doc:id="b8db6306-a868-4cc9-b20a-d50ca831eace" name="put-orders-client"/>
		<ee:transform doc:name="set response" doc:id="3a41c272-dc88-4098-adea-a0c8e3227d66">
			<ee:message>
				<ee:set-payload><![CDATA[%dw 2.0
var resultCode = if(payload.modified > 0) 'SUCCESS' else "FAIL"
var resultDescription = if(payload.modified > 0) "Order updated" else "The order could not be updated. The record has already been updated"
output application/json
---
{
  response: {
    result: {
      code: resultCode,
      description: resultDescription
    },
    responseDate: now(),
    orderNumber: vars.orderNumber
  }
}]]></ee:set-payload>
			</ee:message>
					<ee:variables>
						<ee:set-variable variableName="httpStatus"><![CDATA[%dw 2.0
output application/java
---
if(payload.modified > 0) 200 else 404]]></ee:set-variable>
					</ee:variables>
		</ee:transform>
	</sub-flow>
</mule>
